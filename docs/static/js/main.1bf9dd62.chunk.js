(this.webpackJsonpsudoku=this.webpackJsonpsudoku||[]).push([[0],[,,function(e,t,n){"use strict";(function(e){n.d(t,"h",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"f",(function(){return w})),n.d(t,"i",(function(){return C})),n.d(t,"g",(function(){return x})),n.d(t,"a",(function(){return E}));var a=n(15),r=n(16),c=n(7),i=n(6),o=n.n(i),l=n(3),s=n(1),u=o.a.mark(k),f=o.a.mark(y),h=o.a.mark(m),v=o.a.mark(O),d=!1,b=function(){},p=function(){d=!0};function k(e,t,n){var a,r,c,i,f,h;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(t<n)){o.next=3;break}o.next=38;break;case 3:if(1!==n){o.next=13;break}a=e;case 5:if(!(a<t+e)){o.next=11;break}return o.next=8,[a];case 8:a++,o.next=5;break;case 11:o.next=38;break;case 13:if(t!==n){o.next=20;break}for(r=[],c=e;c<t+e;c++)r.push(c);return o.next=18,r;case 18:o.next=38;break;case 20:i=Object(s.a)(k(e+1,t-1,n-1)),o.prev=21,i.s();case 23:if((f=i.n()).done){o.next=29;break}return h=f.value,o.next=27,[e].concat(Object(l.a)(h));case 27:o.next=23;break;case 29:o.next=34;break;case 31:o.prev=31,o.t0=o.catch(21),i.e(o.t0);case 34:return o.prev=34,i.f(),o.finish(34);case 37:return o.delegateYield(k(e+1,t-1,n),"t1",38);case 38:case"end":return o.stop()}}),u,null,[[21,31,34,37]])}function y(e,t){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(k(0,e,t),"t0",1);case 1:case"end":return n.stop()}}),f)}var g=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ends",i={},o=Object(s.a)(e);try{for(o.s();!(t=o.n()).done;){var l,u=t.value,f=u[n],h=u[(n+1)%2],v=w(i,f,(l={},Object(c.a)(l,a,f),Object(c.a)(l,r,new Set),l));v[r].add(h)}}catch(d){o.e(d)}finally{o.f()}return i};function m(e,t,n){var a,r,c,i,u,f,v=arguments;return o.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:if(a=v.length>3&&void 0!==v[3]?v[3]:{checkClear:!0},r=Object.values(g(e,n)),c=r.filter((function(e){return e.ends.size<=t})),!(a.checkClear&&r.length<=t)){h.next=5;break}return h.abrupt("return");case 5:i=Object(s.a)(y(c.length,t)),h.prev=6,f=o.a.mark((function e(){var n,i,f,h,v,d,b,p,k,y,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u.value,i=new Set,f=new Set,h=Object(s.a)(n),e.prev=4,h.s();case 6:if((v=h.n()).done){e.next=15;break}if(d=v.value,b=c[d],i.add(b.start),b.ends.forEach(f.add,f),!(f.size>t)){e.next=13;break}return e.abrupt("break",15);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),h.e(e.t0);case 20:return e.prev=20,h.f(),e.finish(20);case 23:if(f.size!==t){e.next=47;break}if(!(p=a.checkClear)){e.next=44;break}k=Object(s.a)(r.filter((function(e){return!i.has(e.start)}))),e.prev=27,k.s();case 29:if((y=k.n()).done){e.next=36;break}if(g=y.value,!(Object(l.a)(g.ends).filter((function(e){return!f.has(e)})).length<g.ends.size)){e.next=34;break}return p=!1,e.abrupt("break",36);case 34:e.next=29;break;case 36:e.next=41;break;case 38:e.prev=38,e.t1=e.catch(27),k.e(e.t1);case 41:return e.prev=41,k.f(),e.finish(41);case 44:if(p){e.next=47;break}return e.next=47,[i,f];case 47:case"end":return e.stop()}}),e,null,[[4,17,20,23],[27,38,41,44]])})),i.s();case 9:if((u=i.n()).done){h.next=13;break}return h.delegateYield(f(),"t0",11);case 11:h.next=9;break;case 13:h.next=18;break;case 15:h.prev=15,h.t1=h.catch(6),i.e(h.t1);case 18:return h.prev=18,i.f(),h.finish(18);case 21:case"end":return h.stop()}}),h,null,[[6,15,18,21]])}function O(e,t){var n,a,r,c,i,l,u,f,h,d,b;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=t+1,a=e.filter((function(e){return e.ends.size<=n})),r=Object(s.a)(y(a.length,t)),o.prev=3,r.s();case 5:if((c=r.n()).done){o.next=34;break}i=c.value,l=new Set,u=new Set,f=Object(s.a)(i),o.prev=10,f.s();case 12:if((h=f.n()).done){o.next=21;break}if(d=h.value,b=a[d],l.add(b.start),b.ends.forEach(u.add,u),!(u.size>n)){o.next=19;break}return o.abrupt("break",21);case 19:o.next=12;break;case 21:o.next=26;break;case 23:o.prev=23,o.t0=o.catch(10),f.e(o.t0);case 26:return o.prev=26,f.f(),o.finish(26);case 29:if(u.size!==n){o.next=32;break}return o.next=32,[l,u];case 32:o.next=5;break;case 34:o.next=39;break;case 36:o.prev=36,o.t1=o.catch(3),r.e(o.t1);case 39:return o.prev=39,r.f(),o.finish(39);case 42:case"end":return o.stop()}}),v,null,[[3,36,39,42],[10,23,26,29]])}var _=(window||e||{}).console||{},j={enabled:!0,ifEnabled:function(e,t){return this.enabled&&e||t},get group(){return this.ifEnabled(d&&_.group,b)},get groupEnd(){return this.ifEnabled(d&&_.groupEnd,b)},get log(){return this.ifEnabled(d&&_.log,b)},get error(){return this.ifEnabled(d&&_.error,b)}},w=function(e,t,n){return e.hasOwnProperty(t)||(e[t]=n),e[t]};function C(e){for(var t=Object(l.a)(e),n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),r=[t[a],t[n]];t[n]=r[0],t[a]=r[1]}return t}function x(e,t){var n,a=new Set,r=Object(s.a)(t);try{for(r.s();!(n=r.n()).done;){var c=n.value;e.has(c)&&a.add(c)}}catch(i){r.e(i)}finally{r.f()}return a}var E=function(){function e(t,n){Object(a.a)(this,e),this.timeout=t,this.confirmContinue=n,this.rt=0,this.st=new Date}return Object(r.a)(e,[{key:"continue",value:function(){var e=new Date-this.st;if(e>=this.timeout){if(this.rt+=e,j.log("running time: ".concat(this.rt/1e3,"s")),!this.confirmContinue(this.rt))return!1;this.st=new Date}return!0}}]),e}()}).call(this,n(50))},,,,,,function(e,t,n){e.exports={Value:"Cell_Value__1lDbW",Notes:"Cell_Notes__10ap7",Related:"Cell_Related__ET6Lg",Available:"Cell_Available__3vvqK",Place:"Cell_Place__3TPHN",Note:"Cell_Note__2U2fC",MarkedDomain:"Cell_MarkedDomain__31hFJ",MarkedEffect:"Cell_MarkedEffect___usON",MarkedHighlight:"Cell_MarkedHighlight__2O1xC",WithoutOutline:"Cell_WithoutOutline__35g8t",ActiveValue:"Cell_ActiveValue__3McOV",Placed:"Cell_Placed__3HOvj",Selected:"Cell_Selected__2LsAU",MarkedValue:"Cell_MarkedValue__dMEee",MarkedNoteValue:"Cell_MarkedNoteValue__24o3W",Effected:"Cell_Effected__HnLYk",RowNotes:"Cell_RowNotes__1QNhn",PlacedValue:"Cell_PlacedValue__2vP-2"}},function(e,t,n){e.exports={Zero:"Digits_Zero__2W6xd",One:"Digits_One__-wXsd",Two:"Digits_Two__5WRCG",Three:"Digits_Three__1GKk-",Four:"Digits_Four__1ahFU",Five:"Digits_Five__3m1dx",Six:"Digits_Six__kvriF",Seven:"Digits_Seven__2_nmU",Eight:"Digits_Eight__GNMw3",Nine:"Digits_Nine__3u9wd"}},,,function(e,t,n){e.exports={Controls:"Controls_Controls__1Accx",History:"Controls_History__2GRXF",Panel:"Controls_Panel__1AK4m",Tools:"Controls_Tools__1-fbY",Tip:"Controls_Tip__2IHiE",ChainSteper:"Controls_ChainSteper__RRrIh"}},function(e,t,n){e.exports={Digits:"Digits_Digits__3-KZF",Digit:"Digits_Digit__1MXW9",digit:"Digits_digit__3Mpxe",Disabled:"Digits_Disabled__1N4Jw",active:"Digits_active__2AexO",Count:"Digits_Count__Eq4Q5",isNoting:"Digits_isNoting__-OBTK"}},,,,function(e,t,n){e.exports={Menu:"Main_Menu__3YGZL",Board:"Main_Board__3XJet",Controls:"Main_Controls__1MSdo",Info:"Main_Info__2888w",QRCode:"Main_QRCode__1jj5B"}},,,function(e,t,n){e.exports={Block:"Block_Block__1kJyh",Odd:"Block_Odd__2xFZf",Row:"Block_Row__11Olq"}},function(e,t,n){e.exports={SudokuBoard:"Board_SudokuBoard__3cPYp",Row:"Board_Row__2r5V5",Complete:"Board_Complete__UekFD",SudokuComplete:"Board_SudokuComplete__13blN"}},function(e,t,n){e.exports={Modal:"Modal_Modal__31OI7",Show:"Modal_Show__d05bc",Close:"Modal_Close__IQjCe"}},function(e,t,n){e.exports={Button:"Button_Button__2Ajf-",Warn:"Button_Warn__1cddQ",On:"Button_On__3d77T",Off:"Button_Off__R9f9J"}},,function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__Vem4f",Absolute:"Backdrop_Absolute__Z8lxG"}},function(e,t,n){e.exports={NewGame:"NewGame_NewGame__2hKIv",Error:"NewGame_Error__mao55"}},,,,,,,,,,,function(e,t,n){e.exports={Pointer:"Arrow_Pointer__1rYd7"}},function(e,t,n){e.exports={Spinner:"Loading_Spinner__1CFco"}},function(e,t,n){e.exports={Loader:"Spinner_Loader__1twK-",load2:"Spinner_load2__2gkgc"}},,function(e,t,n){e.exports={Sudoku:"Sudoku_Sudoku__3acWS"}},,function(e,t,n){e.exports=n(61)},,,,,function(e,t,n){},,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getDigitLocalPos",(function(){return G})),n.d(a,"blockShape",(function(){return D})),n.d(a,"indices",(function(){return H})),n.d(a,"blocks",(function(){return z})),n.d(a,"rows",(function(){return V})),n.d(a,"cols",(function(){return U})),n.d(a,"rowColToBlock",(function(){return B})),n.d(a,"blockRowColIndex",(function(){return X})),n.d(a,"blockRows",(function(){return W})),n.d(a,"blockCols",(function(){return F})),n.d(a,"newCells",(function(){return Y})),n.d(a,"copyCells",(function(){return K})),n.d(a,"rowPositions",(function(){return Q})),n.d(a,"colPositions",(function(){return $})),n.d(a,"getPosition",(function(){return ce})),n.d(a,"getPosBlock",(function(){return ie})),n.d(a,"getBlockPositions",(function(){return oe})),n.d(a,"getBlockFlattenPositions",(function(){return le})),n.d(a,"getRowPositions",(function(){return se})),n.d(a,"getColPositions",(function(){return ue})),n.d(a,"getRelatedBlockPositions",(function(){return fe})),n.d(a,"getRelatedRowPositions",(function(){return he})),n.d(a,"getRelatedColPositions",(function(){return ve})),n.d(a,"getRelatedPositions",(function(){return de})),n.d(a,"flattenPositions",(function(){return be})),n.d(a,"getPositionByKey",(function(){return ke})),n.d(a,"mapPositionsTo",(function(){return ye})),n.d(a,"getCell",(function(){return ge})),n.d(a,"getCommonRelatedPositions",(function(){return Oe})),n.d(a,"findClosedPosPair",(function(){return je}));var r=n(0),c=n.n(r),i=n(33),o=n.n(i),l=(n(48),n(4)),s=n(7),u=n(1),f=n(5),h=n(3),v=n(23),d=n.n(v),b=function(e){var t=e.type,n=e.onClick,a=e.disabled,r=void 0!==a&&a,i=e.children,o=[d.a.Button];return t&&o.push(d.a[t]),c.a.createElement("button",{className:o.join(" "),disabled:r,onClick:n},i)},p=n(8),k=n.n(p),y=n(9),g=n.n(y),m=function(e){return function(t){var n,a=t.color,r=t.digitClassName,i=void 0===r?"digit":r,o=t.className,l=void 0===o?"":o,s=t.children;return c.a.createElement("div",{className:"".concat(e," ").concat(i," ").concat(l),style:(n=a,n?{backgroundColor:n}:{})},s)}},O=m(g.a.Zero),_=m(g.a.One),j=m(g.a.Two),w=m(g.a.Three),C=m(g.a.Four),x=m(g.a.Five),E=m(g.a.Six),N=m(g.a.Seven),S=m(g.a.Eight),A=m(g.a.Nine),P=[c.a.createElement(O,null),c.a.createElement(_,null),c.a.createElement(j,null),c.a.createElement(w,null),c.a.createElement(C,null),c.a.createElement(x,null),c.a.createElement(E,null),c.a.createElement(N,null),c.a.createElement(S,null),c.a.createElement(A,null)],T=n(6),I=n.n(T),L=n(15),M=n(16),G=function(e){return[Math.floor((e-1)/3),(e-1)%3]},R=[0,1,2,3,4,5,6,7,8],D=[[0,1,2],[3,4,5],[6,7,8]],H=R,z=R,V=R,U=R,B=function(e,t){return 3*Math.floor(e/3)+Math.floor(t/3)},X=function(e,t){return e%3*3+t%3},W=function(e){var t=3*Math.floor(e/3);return[t,t+1,t+2]},F=function(e){var t=e%3*3;return[t,t+1,t+2]},Y=function(e){return V.map((function(t){return U.map((function(n){return e&&e(t,n)}))}))},K=function(e){var t,n=Object(h.a)(e),a=Object(u.a)(V);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r]=Object(h.a)(n[r].map((function(e){return Object(f.a)({},e)})))}}catch(c){a.e(c)}finally{a.f()}return n},J=R.map((function(e){return R.map((function(t){return{key:"r".concat(e,"c").concat(t),toString:function(){return this.key},idx:9*e+t,row:e,col:t,block:B(e,t)}}))})),Q=J,Z=R.map((function(e){return R.map((function(t){return J[e].filter((function(e){return e.col!==t}))}))})),q=R.map((function(e){return R.map((function(t){return J[t][e]}))})),$=q,ee=R.map((function(e){return R.map((function(t){return q[e].filter((function(e){return e.row!==t}))}))})),te=R.map((function(e){return W(e).map((function(t){return J[t].filter((function(t){return t.block===e}))}))})),ne=R.map((function(e){var t=te[e];return[].concat(Object(h.a)(t[0]),Object(h.a)(t[1]),Object(h.a)(t[2]))})),ae=R.map((function(e){return R.map((function(t){return ne[e].filter((function(e,n){return n!==t}))}))})),re=R.map((function(e){return R.map((function(t){var n=B(e,t),a=[];return J.forEach((function(r){return r.forEach((function(r){var c=r.row,i=r.col,o=r.block;e===c&&t===i&&n===o||e!==c&&t!==i&&n!==o||a.push(r)}))})),a}))})),ce=function(e,t){return J[e][t]},ie=function(e,t){return J[e][t].block},oe=function(e){return te[e]},le=function(e){return ne[e]},se=function(e){return J[e]},ue=function(e){return q[e]},fe=function(e){var t=e.row,n=e.col,a=e.block;return ae[void 0===a?B(t,n):a][X(t,n)]},he=function(e){var t=e.row,n=e.col;return Z[t][n]},ve=function(e){var t=e.row,n=e.col;return ee[n][t]},de=function(e){var t=e.row,n=e.col;return re[t][n]},be=J.flat(),pe={};be.forEach((function(e){pe[e.key]=e}));var ke=function(e){return pe[e]},ye=function(e){return R.map((function(t){return R.map((function(n){return e(t,n)}))}))},ge=function(e,t){return e[t.row][t.col]},me=function(e,t){var n=new Set(t);return e.filter((function(e){return n.has(e)}))},Oe=function e(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];switch(n.length){case 0:return[];case 1:return de(n[0]);default:var r=n[0],c=n.slice(1);return me(de(r),e.apply(void 0,Object(h.a)(c)))}},_e=function(e,t){var n=e.row-t.row,a=e.col-t.col;return n*n+a*a},je=function(e,t){if(1===e.length&&1===t)return[e[0],t[0]];var n,a=Number.MAX_VALUE,r=null,c=null,i=Object(u.a)(e);try{for(i.s();!(n=i.n()).done;){var o,l=n.value,s=Object(u.a)(t);try{for(s.s();!(o=s.n()).done;){var f=o.value,h=_e(l,f);h<a&&(a=h,r=l,c=f)}}catch(v){s.e(v)}finally{s.f()}}}catch(v){i.e(v)}finally{i.f()}return[r,c]},we=n(2),Ce=[1,2,3,4,5,6,7,8,9],xe=function(){function e(){Object(L.a)(this,e)}return Object(M.a)(e,null,[{key:"new",value:function(){for(var t=e._base,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];for(var c=0,i=a;c<i.length;c++){var o=i[c];t|=1<<o}return t}},{key:"isEmpty",value:function(e){return e===this._base}},{key:"size",value:function(e){for(var t=0,n=1;n<=9;n++)1===(1&(e>>=1))&&t++;return t}},{key:"first",value:function(t){for(var n=1;n<=9;n++)if(e.has(t,n))return n}},{key:"entries",value:function(t){for(var n=[],a=1;a<=9;a++)e.has(t,a)&&n.push(a);return n}},{key:"is",value:function(e){return 0!==(e&this._base)}},{key:"has",value:function(t,n){return e.is(t)&&0!==(t&1<<n)}},{key:"add",value:function(e,t){return e|1<<t}},{key:"delete",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];for(var r=0,c=n;r<c.length;r++){var i=c[r];e&=~(1<<i)}return e}}]),e}();xe._base=65536;var Ee=I.a.mark(Pe),Ne=I.a.mark(Re),Se=function(e){for(var t={},n=function(){var n=r[a],c=new Set;e.forEach((function(e){return c.add(e[n])})),1===c.size&&(t[n]=Object(h.a)(c)[0])},a=0,r=["row","col","block"];a<r.length;a++)n();return t};function Ae(e,t){var n,a=[],r=Object(u.a)(t);try{for(r.s();!(n=r.n()).done;){var c=n.value,i=ge(e,c).value;if(xe.is(i)){var o,l=Object(u.a)(xe.entries(i));try{for(l.s();!(o=l.n()).done;){var s=o.value;a.push([c,s])}}catch(f){l.e(f)}finally{l.f()}}}}catch(f){r.e(f)}finally{r.f()}return a}function Pe(e,t,n){var a,r,c,i,o,f,h,v,d,b,p,k,y,g;return I.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:a=0,r=[["row",se],["col",ue],["block",le]];case 1:if(!(a<r.length)){m.next=41;break}c=Object(l.a)(r[a],2),i=c[0],o=c[1],f=Object(u.a)(H),m.prev=4,f.s();case 6:if((h=f.n()).done){m.next=30;break}v=h.value,d=Ae(e,o(v)),b=Object(u.a)(Object(we.e)(d,t,n,{checkClear:t>1})),m.prev=10,b.s();case 12:if((p=b.n()).done){m.next=20;break}return k=p.value,y=k[n],g=k[(n+1)%2],m.next=18,{type:"group",cls:n,n:t,domains:0===n?Se(y):Object(s.a)({},i,v),poses:y,notes:g,name:["naked","hidden"][n]+"-".concat(t,"-group")};case 18:m.next=12;break;case 20:m.next=25;break;case 22:m.prev=22,m.t0=m.catch(10),b.e(m.t0);case 25:return m.prev=25,b.f(),m.finish(25);case 28:m.next=6;break;case 30:m.next=35;break;case 32:m.prev=32,m.t1=m.catch(4),f.e(m.t1);case 35:return m.prev=35,f.f(),m.finish(35);case 38:a++,m.next=1;break;case 41:case"end":return m.stop()}}),Ee,null,[[4,32,35,38],[10,22,25,28]])}var Te=function(e,t){return function(n,a){for(var r=[],c=0;c<9;c++){var i,o=Object(u.a)(e(c));try{for(o.s();!(i=o.n()).done;){var l=i.value,s=n[l.row][l.col].value;xe.is(s)&&(xe.has(s,a)&&r.push([c,t(l)]))}}catch(f){o.e(f)}finally{o.f()}}return r}},Ie=Te(se,(function(e){return e.col})),Le=Te(se,(function(e){return B(e.row,e.col)})),Me=Te(ue,(function(e){return B(e.row,e.col)})),Ge=function(e,t,n){var a,r=[],c=Object(u.a)(n);try{for(c.s();!(a=c.n()).done;){var i=a.value,o=e[i.row][i.col].value;xe.is(o)&&xe.has(o,t)&&r.push(i)}}catch(l){c.e(l)}finally{c.f()}return r};function Re(e,t){var n,a,r,c,i,o,s,f,v,d,b,p,k,y,g,m,O,_,j,w,C,x,E,N,S,A,P,T,L,M,G,R,D,H,z,V,U,B,X,W,F,Y,K,J,Q,Z,q,$,ee,te,ne,ae,re,ce,ie,oe,fe,he,ve,de,be,pe,ke,ye,ge,me,Oe,_e,je,Ce,xe,Ee,Se,Ae,Pe=arguments;return I.a.wrap((function(I){for(;;)switch(I.prev=I.next){case 0:n=Pe.length>2&&void 0!==Pe[2]?Pe[2]:{rc:!0,cr:!0,rb:!0,br:!0,cb:!0,bc:!0},a=1;case 2:if(!(a<=9)){I.next=152;break}if(!n.rc&&!n.cr){I.next=53;break}if(r=Ie(e,a),!n.rc){I.next=29;break}c=Object(u.a)(Object(we.e)(r,t,0)),I.prev=7,c.s();case 9:if((i=c.n()).done){I.next=21;break}o=i.value,s=Object(l.a)(o,2),f=s[0],v=s[1],d=[],b=!0,p=Object(u.a)(f);try{for(p.s();!(k=p.n()).done;)y=k.value,(g=Ge(e,a,se(y))).length!==t&&(b=!1),d.push.apply(d,Object(h.a)(g))}catch(Ne){p.e(Ne)}finally{p.f()}return m="".concat(t,b?"-X-Wing":"-XRC-Group"),I.next=19,{name:m,domain:"row",effect:"col",rows:f,cols:v,poses:new Set(d),d:a};case 19:I.next=9;break;case 21:I.next=26;break;case 23:I.prev=23,I.t0=I.catch(7),c.e(I.t0);case 26:return I.prev=26,c.f(),I.finish(26);case 29:if(!n.cr){I.next=53;break}O=Object(u.a)(Object(we.e)(r,t,1)),I.prev=31,O.s();case 33:if((_=O.n()).done){I.next=45;break}j=_.value,w=Object(l.a)(j,2),C=w[0],x=w[1],E=[],N=!0,S=Object(u.a)(C);try{for(S.s();!(A=S.n()).done;)P=A.value,Ge(e,a,ue(P)).length!==t&&(N=!1),E.push.apply(E,Object(h.a)(Ge(e,a,ue(P))))}catch(Ne){S.e(Ne)}finally{S.f()}return T="".concat(t,N?"-X-Wing":"-XCR-Group"),I.next=43,{name:T,domain:"col",effect:"row",rows:x,cols:C,poses:new Set(E),d:a};case 43:I.next=33;break;case 45:I.next=50;break;case 47:I.prev=47,I.t1=I.catch(31),O.e(I.t1);case 50:return I.prev=50,O.f(),I.finish(50);case 53:if(!n.rb&&!n.br){I.next=101;break}if(L=Le(e,a),!n.rb){I.next=78;break}M=Object(u.a)(Object(we.e)(L,t,0)),I.prev=57,M.s();case 59:if((G=M.n()).done){I.next=70;break}R=G.value,D=Object(l.a)(R,2),H=D[0],z=D[1],V=[],U=Object(u.a)(H);try{for(U.s();!(B=U.n()).done;)X=B.value,V.push.apply(V,Object(h.a)(Ge(e,a,se(X))))}catch(Ne){U.e(Ne)}finally{U.f()}return W=1===t?"claiming":"".concat(t,"-XRB-Group"),I.next=68,{name:W,domain:"row",effect:"block",rows:H,blocks:z,poses:new Set(V),d:a};case 68:I.next=59;break;case 70:I.next=75;break;case 72:I.prev=72,I.t2=I.catch(57),M.e(I.t2);case 75:return I.prev=75,M.f(),I.finish(75);case 78:if(!n.br){I.next=101;break}F=Object(u.a)(Object(we.e)(L,t,1)),I.prev=80,F.s();case 82:if((Y=F.n()).done){I.next=93;break}K=Y.value,J=Object(l.a)(K,2),Q=J[0],Z=J[1],q=[],$=Object(u.a)(Q);try{for($.s();!(ee=$.n()).done;)te=ee.value,q.push.apply(q,Object(h.a)(Ge(e,a,le(te))))}catch(Ne){$.e(Ne)}finally{$.f()}return ne=1===t?"pointing":"".concat(t,"-XBR-Group"),I.next=91,{name:ne,domain:"block",effect:"row",rows:Z,blocks:Q,poses:new Set(q),d:a};case 91:I.next=82;break;case 93:I.next=98;break;case 95:I.prev=95,I.t3=I.catch(80),F.e(I.t3);case 98:return I.prev=98,F.f(),I.finish(98);case 101:if(!n.cb&&!n.bc){I.next=149;break}if(ae=Me(e,a),!n.cb){I.next=126;break}re=Object(u.a)(Object(we.e)(ae,t,0)),I.prev=105,re.s();case 107:if((ce=re.n()).done){I.next=118;break}ie=ce.value,oe=Object(l.a)(ie,2),fe=oe[0],he=oe[1],ve=[],de=Object(u.a)(fe);try{for(de.s();!(be=de.n()).done;)pe=be.value,ve.push.apply(ve,Object(h.a)(Ge(e,a,ue(pe))))}catch(Ne){de.e(Ne)}finally{de.f()}return ke=1===t?"claiming":"".concat(t,"-XCB-Group"),I.next=116,{name:ke,domain:"col",effect:"block",cols:fe,blocks:he,poses:new Set(ve),d:a};case 116:I.next=107;break;case 118:I.next=123;break;case 120:I.prev=120,I.t4=I.catch(105),re.e(I.t4);case 123:return I.prev=123,re.f(),I.finish(123);case 126:if(!n.bc){I.next=149;break}ye=Object(u.a)(Object(we.e)(ae,t,1)),I.prev=128,ye.s();case 130:if((ge=ye.n()).done){I.next=141;break}me=ge.value,Oe=Object(l.a)(me,2),_e=Oe[0],je=Oe[1],Ce=[],xe=Object(u.a)(_e);try{for(xe.s();!(Ee=xe.n()).done;)Se=Ee.value,Ce.push.apply(Ce,Object(h.a)(Ge(e,a,le(Se))))}catch(Ne){xe.e(Ne)}finally{xe.f()}return Ae=1===t?"pointing":"".concat(t,"-XBC-Group"),I.next=139,{name:Ae,domain:"block",effect:"col",cols:je,blocks:_e,poses:new Set(Ce),d:a};case 139:I.next=130;break;case 141:I.next=146;break;case 143:I.prev=143,I.t5=I.catch(128),ye.e(I.t5);case 146:return I.prev=146,ye.f(),I.finish(146);case 149:a++,I.next=2;break;case 152:case"end":return I.stop()}}),Ne,null,[[7,23,26,29],[31,47,50,53],[57,72,75,78],[80,95,98,101],[105,120,123,126],[128,143,146,149]])}var De=I.a.mark(ze),He=xe.new.apply(xe,Object(h.a)(Ce));function ze(e,t){var n,a,r,c,i,o,s,f;return I.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:if(t&&t.search++,!Ve(e)){h.next=5;break}return h.next=4,e;case 4:return h.abrupt("return");case 5:n=Ue(e),a=Object(l.a)(n,2),r=a[0],c=a[1],i=Object(u.a)(c),h.prev=7,i.s();case 9:if((o=i.n()).done){h.next=17;break}if(s=o.value,f=K(e),Be(f,r,s,t)&&We(f,t)){h.next=14;break}return h.abrupt("continue",15);case 14:return h.delegateYield(ze(f,t),"t0",15);case 15:h.next=9;break;case 17:h.next=22;break;case 19:h.prev=19,h.t1=h.catch(7),i.e(h.t1);case 22:return h.prev=22,i.f(),h.finish(22);case 25:case"end":return h.stop()}}),De,null,[[7,19,22,25]])}var Ve=function(e){var t,n=Object(u.a)(be);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=ge(e,a).value;if(xe.is(r))return!1}}catch(c){n.e(c)}finally{n.f()}return!0},Ue=function(e){var t,n,a,r=10,c=Object(u.a)(be);try{for(c.s();!(a=c.n()).done;){var i=a.value,o=ge(e,i).value;if(xe.is(o)){var l=xe.entries(o);l.length<r&&(t=i,n=l,r=l.length)}}}catch(s){c.e(s)}finally{c.f()}return[t,n]},Be=function(e,t,n,a){a&&a.setCellValue++;var r=ge(e,t).value;return!!xe.has(r,n)&&(e[t.row][t.col].value=n,Xe(e,de(t),n,a))},Xe=function(e,t,n,a){a&&a.basicEliminate++;var r,c=Object(u.a)(t);try{for(c.s();!(r=c.n()).done;){var i=r.value,o=ge(e,i).value;if(xe.has(o,n)){var l=xe.delete(o,n);if(xe.isEmpty(l))return!1;e[i.row][i.col].value=l}}}catch(s){c.e(s)}finally{c.f()}return!0},We=function(e,t){var n;t&&t.eliminate++;do{n=!1;for(var a=0,r=[0,1];a<r.length;a++){var c,i=r[a],o=Object(u.a)(Pe(e,1,i));try{for(o.s();!(c=o.n()).done;){var l=c.value,s=Object(h.a)(l.poses)[0],f=Object(h.a)(l.notes)[0];if(!Be(e,s,f,t))return!1;n=!0}}catch(v){o.e(v)}finally{o.f()}}}while(n);return!0},Fe=I.a.mark($e),Ye=I.a.mark(tt),Ke=I.a.mark(nt),Je=I.a.mark(at),Qe=function(){function e(t){var n=this;Object(L.a)(this,e),this.jumpTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e<n._historyLowerBound||(n._curCellsIdx=e,n._curCellsIdx<0?n._curCellsIdx=0:n._curCellsIdx>=n._cellsHistory.length&&(n._curCellsIdx=n._cellsHistory.length-1),t&&n._cut(),n._rollback(),n._notify())},this.revertTo=function(e){n.jumpTo(e,!0)},this.jump=function(e){n.jumpTo(n.curIdx+e)},this.jumpToFirst=function(){n.jumpTo(0)},this.jumpToLast=function(){n.jumpTo(n.lastIdx)},this.getCurCells=function(){return n._txCells?n._txCells:n.cells},this.getCell=function(e){var t=e.row,a=e.col;return n.getCurCells()[t][a]},this._setCellValue=function(e,t){n._txSetCellValue(e,t)},this._shouldNotify=!0,this.subscribers=[],this._setPuzzle(t||e.defaultPuzzle),this._chainCheckMemo={x:{},xy:{}}}return Object(M.a)(e,[{key:"_setPuzzle",value:function(t){this._cellsHistory=[],this._curCellsIdx=-1,this._txCells=null,this._historyLowerBound=0;var n=e.parse(t);t!==e.defaultPuzzle&&(this._results=function(e){var t,n=Y((function(){return{value:He}})),a=Object(u.a)(be);try{for(a.s();!(t=a.n()).done;){var r=t.value,c=ge(e,r);if(!xe.is(c.value)&&(n[r.row][r.col].origin=c.origin,!Be(n,r,c.value)))return[]}}catch(b){a.e(b)}finally{a.f()}var i,o=new Date,l={search:0,setCellValue:0,basicEliminate:0,eliminate:0},s=[],f=Object(u.a)(ze(n,l));try{for(f.s();!(i=f.n()).done;){var h=i.value,v=new Date;if(we.c.log("#".concat(s.length,">puzzle solving time: ").concat(v-o,"ms, ").concat(JSON.stringify(l))),s.push(h),s.length>1)break}}catch(b){f.e(b)}finally{f.f()}var d=new Date;return we.c.log("puzzle solving final time: ".concat(d-o,"ms, ").concat(JSON.stringify(l))),s}(n)),this._setCells(n,"init"),this.puzzle=this.stringify(),this._notify()}},{key:"solve",value:function(){this._results&&this._results.length>0&&(this._setCells(this._results[0],"solve"),this._notify())}},{key:"setHistoryLowerBound",value:function(e){this._historyLowerBound=e}},{key:"clearHistoryLowerBound",value:function(){this._historyLowerBound=0}},{key:"_cut",value:function(){this._curCellsIdx+1<this._cellsHistory.length&&(this._cellsHistory=this._cellsHistory.slice(0,this._curCellsIdx+1))}},{key:"_setCells",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._cut(),this._curCellsIdx++,this._cellsHistory.push({idx:this._curCellsIdx,cells:e,action:t,payload:n,get desc(){return"[".concat(t,"] ").concat(n.name||"")}})}},{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"_disableNotify",value:function(){this._shouldNotify=!1}},{key:"_enableNotify",value:function(){this._shouldNotify=!0}},{key:"_notify",value:function(){if(this._shouldNotify){this._checkComplete();var e,t=Object(u.a)(this.subscribers);try{for(t.s();!(e=t.n()).done;){(0,e.value)((function(e){return e+1}))}}catch(n){t.e(n)}finally{t.f()}}}},{key:"stringify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(f.a)({placedAsOrigin:!1,withNotes:!0,originAsPlaced:!1},t),e=e||this.cells;var n,a=[],r=Object(u.a)(be);try{for(r.s();!(n=r.n()).done;){var c=n.value,i=e[c.row][c.col],o=i.origin,l=i.value;if(xe.is(l)){if(!t.withNotes){a.push("0");continue}xe.isEmpty(l)?a.push("0"):a.push.apply(a,["n"].concat(Object(h.a)(xe.entries(l)),["N"]))}else!t.placedAsOrigin&&!o||t.originAsPlaced?a.push("p",l):a.push(l)}}catch(s){r.e(s)}finally{r.f()}return a.join("")}},{key:"calcAvailableDigits",value:function(e){var t=new Set([1,2,3,4,5,6,7,8,9]);if(!e)return t;if(this.getCell(e).origin)return new Set;var n,a=Object(u.a)(de(e));try{for(a.s();!(n=a.n()).done;){var r=n.value,c=this.getCell(r).value;xe.is(c)||t.delete(c)}}catch(i){a.e(i)}finally{a.f()}return t}},{key:"calcRemainingDigits",value:function(){var e,t={1:9,2:9,3:9,4:9,5:9,6:9,7:9,8:9,9:9},n=Object(u.a)(be);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=this.getCell(a).value;xe.is(r)||t[r]--}}catch(c){n.e(c)}finally{n.f()}return t}},{key:"calcAvailablePositions",value:function(e){if(!(e>=1&&e<=9))return null;var t,n=ye((function(){return!0})),a=Object(u.a)(be);try{for(a.s();!(t=a.n()).done;){var r=t.value,c=this.getCell(r).value;if(!xe.is(c)&&(n[r.row][r.col]=!1,c===e)){var i,o=Object(u.a)(de(r));try{for(o.s();!(i=o.n()).done;){var l=i.value,s=l.row,f=l.col;n[s][f]=!1}}catch(h){o.e(h)}finally{o.f()}}}}catch(h){a.e(h)}finally{a.f()}return n}},{key:"_txSetCellValue",value:function(e,t){var n=e.row,a=e.col;if(t!==this.getCell(e).value){this._startTx();var r=this.getCurCells();if(this._txCells===r&&(this._txCells=Object(h.a)(r)),this._txCells[n]===r[n]&&(this._txCells[n]=Object(h.a)(r[n])),this._txCells[n][a]===r[n][a]&&(this._txCells[n][a]=Object(f.a)({},r[n][a])),this._txCells[n][a].value=t,!xe.is(t)){var c,i=Object(u.a)(de(e));try{for(i.s();!(c=i.n()).done;){var o=c.value,l=this.getCell(o);xe.is(l.value)&&this._eliminate(o,t)}}catch(s){i.e(s)}finally{i.f()}}}}},{key:"_eliminate",value:function(e){for(var t=this.getCell(e),n=t.value,a=arguments.length,r=new Array(a>1?a-1:0),c=1;c<a;c++)r[c-1]=arguments[c];this._txSetCellValue(e,xe.delete.apply(xe,[n].concat(r)))}},{key:"_startTx",value:function(){this._txCells||(this._txCells=this.getCurCells())}},{key:"_commit",value:function(e,t){this._txCells&&this._txCells!==this.cells&&(this._setCells(this._txCells,e,t),this._txCells=null,this._notify())}},{key:"_rollback",value:function(){this._txCells=null}},{key:"_handlActions",value:function(t,n){switch(t){case e.actions.RESET:this._setPuzzle(this.puzzle);break;case e.actions.NOTE:this._note(n);break;case e.actions.AUTO_NOTE:this._autoNote();break;case e.actions.AUTO_PLACE:this._autoPlace();break;case e.actions.AUTO_POINTING:this._autoPointing();break;case e.actions.AUTO_CLAIMING:this._autoClaiming();break;case e.actions.AUTO_PLACE_POINTING_CLAIMING:this._autoPlacePointingClaiming();break;case e.actions.UPDATE_CELL_VALUE:this._updateCellValue(n);break;case e.actions.ELIMINATE_GROUP:!function(e,t,n){if(1===e.n)n(Object(h.a)(e.poses)[0],Object(h.a)(e.notes)[0]);else if(0===e.cls){var a,r=e.domains,c=r.row,i=r.col,o=r.block,l=[].concat(Object(h.a)(se(c)||[]),Object(h.a)(ue(i)||[]),Object(h.a)(le(o)||[])),s=Object(u.a)(l);try{for(s.s();!(a=s.n()).done;){var f=a.value,v=t(f).value;xe.is(v)&&!e.poses.has(f)&&n(f,xe.delete.apply(xe,[v].concat(Object(h.a)(e.notes))))}}catch(y){s.e(y)}finally{s.f()}}else if(1===e.cls){var d,b=Object(u.a)(e.poses);try{for(b.s();!(d=b.n()).done;){var p=d.value,k=t(p).value;n(p,xe.new.apply(xe,Object(h.a)(xe.entries(k).filter((function(t){return e.notes.has(t)})))))}}catch(y){b.e(y)}finally{b.f()}}}(n,this.getCell,this._setCellValue);break;case e.actions.ELIMINATE_XGROUP:!function(e,t,n){var a=[];if("row"===e.effect){var r,c=Object(u.a)(e.rows);try{for(c.s();!(r=c.n()).done;){var i=r.value;a.push.apply(a,Object(h.a)(se(i)))}}catch(g){c.e(g)}finally{c.f()}}else if("col"===e.effect){var o,l=Object(u.a)(e.cols);try{for(l.s();!(o=l.n()).done;){var s=o.value;a.push.apply(a,Object(h.a)(ue(s)))}}catch(g){l.e(g)}finally{l.f()}}else if("block"===e.effect){var f,v=Object(u.a)(e.blocks);try{for(v.s();!(f=v.n()).done;){var d=f.value;a.push.apply(a,Object(h.a)(le(d)))}}catch(g){v.e(g)}finally{v.f()}}for(var b=0,p=a;b<p.length;b++){var k=p[b],y=t(k).value;xe.is(y)&&!e.poses.has(k)&&n(k,xe.delete(y,e.d))}}(n,this.getCell,this._setCellValue);break;case e.actions.ELIMINATE_UR:this._eliminateUR(n);break;case e.actions.ELIMINATE_CHAIN:this._eliminateChain(n);break;case e.actions.ELIMINATE_TRIAL_ERROR:this._eliminateTrialError(n);break;case e.actions.HANDLE_TIP:this._handleTip(n)}}},{key:"dispatch",value:function(e,t,n){(n=Object(f.a)({commit:!0,log:!0},n||{})).log&&(we.c.group("[".concat(e,"]")),t&&we.c.log("->payload:",t),n&&we.c.log("->options:",n)),this._startTx(),this._handlActions(e,t),n.log&&we.c.groupEnd(),n.commit&&this._commit(e,t)}},{key:"reset",value:function(){this.dispatch(e.actions.RESET)}},{key:"note",value:function(t){this.dispatch(e.actions.NOTE,t)}},{key:"updateCellValue",value:function(t,n,a,r){this.dispatch(e.actions.UPDATE_CELL_VALUE,{isNoting:t,pos:n,value:a,name:"".concat(r||(t?"note":"place")," ").concat(a,"@").concat(n)})}},{key:"autoNote",value:function(){this.dispatch(e.actions.AUTO_NOTE)}},{key:"autoPlacePointingClaiming",value:function(){this.dispatch(e.actions.AUTO_PLACE_POINTING_CLAIMING)}},{key:"autoPlace",value:function(){this.dispatch(e.actions.AUTO_PLACE)}},{key:"autoPointing",value:function(){this.dispatch(e.actions.AUTO_POINTING)}},{key:"autoClaiming",value:function(){this.dispatch(e.actions.AUTO_CLAIMING)}},{key:"eliminateGroup",value:function(t){this.dispatch(e.actions.ELIMINATE_GROUP,t)}},{key:"eliminateXGroup",value:function(t){this.dispatch(e.actions.ELIMINATE_XGROUP,t)}},{key:"eliminateUR",value:function(t){this.dispatch(e.actions.ELIMINATE_UR,t)}},{key:"eliminateChain",value:function(t){this.dispatch(e.actions.ELIMINATE_CHAIN,t)}},{key:"eliminateTrialError",value:function(t){this.dispatch(e.actions.ELIMINATE_TRIAL_ERROR,t)}},{key:"handleTip",value:function(t){this.dispatch(e.actions.HANDLE_TIP,t)}},{key:"_checkValidity",value:function(){for(var e=this,t=0,n=[["row",se],["col",ue],["block",le]];t<n.length;t++){var a,r=Object(l.a)(n[t],2),c=r[0],i=r[1],o=Object(u.a)(H);try{var f=function(){var t,n,r=a.value,o=new Set(Ce),l=Object(u.a)(i(r));try{for(l.s();!(t=l.n()).done;){var f=t.value,h=e.getCell(f).value;if("row"===c&&xe.isEmpty(h))return{v:{domain:"cell",cell:f,digits:new Set}};xe.is(h)?xe.entries(h).forEach((function(e){return o.delete(e)})):o.delete(h)}}catch(v){l.e(v)}finally{l.f()}if(0!==o.size)return{v:(n={domain:c},Object(s.a)(n,c,r),Object(s.a)(n,"digits",o),n)}};for(o.s();!(a=o.n()).done;){var h=f();if("object"===typeof h)return h.v}}catch(v){o.e(v)}finally{o.f()}}}},{key:"_checkComplete",value:function(){var e,t=Object(u.a)(be);try{for(t.s();!(e=t.n()).done;){var n=e.value,a=this.getCell(n).value;if(xe.is(a))return this._isComplete=!1,!1}}catch(r){t.e(r)}finally{t.f()}return this._isComplete=!0,!0}},{key:"_note",value:function(e){var t=this.getCell(e).value;xe.is(t)&&(xe.size(t)>0||this._setCellValue(e,xe.new.apply(xe,Object(h.a)(this.calcAvailableDigits(e)))))}},{key:"_autoNote",value:function(){var t,n=Object(u.a)(be);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.dispatch(e.actions.NOTE,a,{commit:!1,log:!1})}}catch(r){n.e(r)}finally{n.f()}}},{key:"_autoPlacePointingClaiming",value:function(){try{var t=0;do{t=0,t+=this._autoPlace(),this._commit(e.actions.AUTO_PLACE),t+=this._autoPointing(),this._commit(e.actions.AUTO_POINTING),t+=this._autoClaiming(),this._commit(e.actions.AUTO_CLAIMING)}while(t>0)}catch(n){we.c.log(n)}}},{key:"_autoPlace",value:function(){var t=0,n=!1;we.c.group("[auto place]");do{n=!1;for(var a=0,r=[0,1];a<r.length;a++){var c,i=r[a],o=Object(u.a)(Pe(this.getCurCells(),1,i));try{for(o.s();!(c=o.n()).done;){var l=c.value;this.dispatch(e.actions.ELIMINATE_GROUP,l,{commit:!1}),t++,n=!0;break}}catch(s){o.e(s)}finally{o.f()}}}while(n);return we.c.groupEnd(),t}},{key:"_autoPointing",value:function(){var t=0;we.c.group("[auto pointing]");var n,a=Object(u.a)(Re(this.getCurCells(),1,{br:!0,bc:!0}));try{for(a.s();!(n=a.n()).done;){var r=n.value;we.c.log(r),this.dispatch(e.actions.ELIMINATE_XGROUP,r,{commit:!1}),t++}}catch(c){a.e(c)}finally{a.f()}return we.c.groupEnd(),t}},{key:"_autoClaiming",value:function(){var t=0;we.c.group("[auto claiming]");var n,a=Object(u.a)(Re(this.getCurCells(),1,{rb:!0,cb:!0}));try{for(a.s();!(n=a.n()).done;){var r=n.value;this.dispatch(e.actions.ELIMINATE_XGROUP,r,{commit:!1}),t++}}catch(c){a.e(c)}finally{a.f()}return we.c.groupEnd(),t}},{key:"_updateCellValue",value:function(e){var t=e.isNoting,n=e.pos,a=e.value;t?this._noteCellValue(n,a):this._placeCellValue(n,a)}},{key:"_placeCellValue",value:function(e,t){var n=this.getCell(e);n.origin||(n.value===t&&(t=xe.new()),this._setCellValue(e,t))}},{key:"_noteCellValue",value:function(e,t){var n=this.getCell(e).value;if(xe.is(n)){var a=n;a=xe.has(a,t)?xe.delete(a,t):xe.add(a,t),this._setCellValue(e,a)}}},{key:"findGroup",value:function(e){for(var t=1;t<=8;t++)for(var n=0,a=[0,1];n<a.length;n++){var r,c=a[n],i=Object(u.a)(Pe(e,t,c));try{for(i.s();!(r=i.n()).done;){return r.value}}catch(o){i.e(o)}finally{i.f()}}}},{key:"findXGroup",value:function(e){for(var t=1;t<=8;t++){var n,a=Object(u.a)(Re(e,t));try{for(a.s();!(n=a.n()).done;){var r=n.value;return r.type="X-Group",r}}catch(c){a.e(c)}finally{a.f()}}}},{key:"findUR",value:function(e){}},{key:"_eliminateUR",value:function(e){}},{key:"findTip",value:function(e){e=Object(f.a)({trial:!0,chain:{withoutALS:!1}},e);var t=this.getCurCells();return this.findGroup(t)||this.findXGroup(t)||this.findUR(t)||this.findChain(t,e.chain)||e.trial&&this.findTrialError()}},{key:"_handleTip",value:function(e){"group"===e.type?this.eliminateGroup(e):"X-Group"===e.type?this.eliminateXGroup(e):"ur"===e.type?this.eliminateUR(e):"chain"===e.type?this.eliminateChain(e):"trial-error"===e.type&&this.eliminateTrialError(e)}},{key:"findTrialError",value:function(){var e=this;this._disableNotify();for(var t=this._curCellsIdx,n=Object(we.i)(be.filter((function(t){var n=e.getCell(t).value;return xe.is(n)}))),a=0,r=[!1,{maxDepth:15},{maxDepth:25},{maxDepth:Number.MAX_VALUE}];a<r.length;a++){var c,i=r[a],o=Object(u.a)(n);try{for(o.s();!(c=o.n()).done;){var l,s=c.value,f=this.getCell(s).value,h=Object(u.a)(xe.entries(f));try{for(h.s();!(l=h.n()).done;){var v=l.value;we.c.enabled=!0,we.c.log("try: ".concat(v,"@").concat(s," ").concat(JSON.stringify(i))),we.c.enabled=!1;var d=0;this.updateCellValue(!1,s,v,"try"),this.autoPlacePointingClaiming();var b=this._checkValidity();if(!b&&i){for(var p=this.findTip({trial:!1,chain:{withoutALS:!0}});p&&(d++,this.handleTip(p),this.autoPlacePointingClaiming(),!(b=this._checkValidity()))&&!(d>i.maxDepth);)p=this.findTip({trial:!1,chain:{withoutALS:!0}});this._checkComplete()&&(b=!0)}if(b){var k=function(){we.c.enabled=!0,e._enableNotify();var n=e._curCellsIdx,a=new Set(e._cellsHistory.filter((function(e){var a=e.idx;return a>=t&&a<=n})).map((function(e){return e.cells})));return{v:{startIdx:t,endIdx:n,includedCells:a,pos:s,d:v,err:b,type:"trial-error",name:"try".concat(d?"*"+d:""," ").concat(v,"@").concat(s)}}}();if("object"===typeof k)return k.v}this.jumpTo(t)}}catch(y){h.e(y)}finally{h.f()}}}catch(y){o.e(y)}finally{o.f()}}this.jumpTo(t),this._enableNotify()}},{key:"_eliminateTrialError",value:function(e){var t=e.startIdx,n=e.pos,a=e.d;!0!==e.err&&(this.revertTo(t),this._eliminate(n,a))}},{key:"findChain",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(f.a)({withoutALS:!0,timeout:6e4,confirmContinue:null},t);var n=dt(e,{alsSizes:[1,2,3,4,5]}),a=Object(l.a)(n,4),r=a[0],c=a[1],i=a[2],o=a[3];we.c.log("dPoses:",r),we.c.log("dGroupPoses:",c),we.c.log("dAlsces:",i),we.c.log("dLinks:",o);for(var s=Object(we.i)(Ce),h={dLinks:o,dAlsces:i,val:!1,cells:e},v=[function(e){return r[e]}],d=[].concat(v,[function(e){return(c[e]||[]).filter((function(e){return e.isGroup}))}]),b={tryDigitLinks:!0,tryCellLinks:!1,tryGroupLinks:!1,tryAlscLinks:!1,posSrcs:d,searchChain:$e,earlyExitLen:7,checkMemo:this._chainCheckMemo},p={searchChainDFS:0,checkChainX:0,checkChainXY:0},k=t.confirmContinue&&new we.a(t.timeout,t.confirmContinue),y=0,g=[15,20];y<g.length;y++)for(var m=g[y],O=0,_=[b,Object(f.a)(Object(f.a)({},b),{},{tryCellLinks:!0}),Object(f.a)(Object(f.a)({},b),{},{tryCellLinks:!0,tryGroupLinks:!0})];O<_.length;O++){var j,w=_[O],C=Object(u.a)(w.posSrcs);try{for(C.s();!(j=C.n()).done;){var x,E=j.value,N=Object(f.a)(Object(f.a)(Object(f.a)({},h),{},{maxLength:m},w),{},{stat:Object(f.a)({},p)}),S=Object(u.a)(s);try{for(S.s();!(x=S.n()).done;){var A=x.value;N.td=A;var P,T=Object(u.a)(w.searchChain(A,E(A)||[],N));try{for(T.s();!(P=T.n()).done;){var I=P.value;return we.c.log("chain stat:",m,N.stat),qe(I)}}catch(J){T.e(J)}finally{T.f()}if(k&&!k.continue())return qe(N.res)}}catch(J){S.e(J)}finally{S.f()}if(we.c.log("chain stat:",m,N.stat),N.res)return qe(N.res)}}catch(J){C.e(J)}finally{C.f()}}if(!t.withoutALS)for(var L=[function(e){return Object.values(i[e]||{})}],M=Object(f.a)(Object(f.a)({},b),{},{tryDigitLinks:!1,posSrcs:[]}),G=0,R=[Object(f.a)(Object(f.a)({},M),{},{tryAlscLinks:!0,maxLength:15,posSrcs:L}),Object(f.a)(Object(f.a)({},b),{},{tryDigitLinks:!0,tryGroupLinks:!0,tryAlscLinks:!0,maxLength:15,posSrcs:d})];G<R.length;G++){var D,H=R[G],z=Object(u.a)(H.posSrcs);try{for(z.s();!(D=z.n()).done;){var V,U=D.value,B=Object(f.a)(Object(f.a)(Object(f.a)({},h),H),{},{stat:Object(f.a)({},p)}),X=Object(u.a)(s);try{for(X.s();!(V=X.n()).done;){var W=V.value;B.td=W;var F,Y=Object(u.a)(H.searchChain(W,U(W)||[],B,k));try{for(Y.s();!(F=Y.n()).done;){var K=F.value;return we.c.log("als stat:",15,B.stat),qe(K)}}catch(J){Y.e(J)}finally{Y.f()}if(B.exit||k&&!k.continue())return qe(B.res)}}catch(J){X.e(J)}finally{X.f()}if(we.c.log("als stat:",15,B.stat),B.res)return qe(B.res)}}catch(J){z.e(J)}finally{z.f()}}}},{key:"_eliminateChain",value:function(e){var t,n=Object(u.a)(e.effectedPoses);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=this.getCell(a).value;e.keep?this._eliminate.apply(this,[a].concat(Object(h.a)(xe.entries(r).filter((function(t){return t!==e.d&&t!==e.yd}))))):this._eliminate(a,e.d)}}catch(c){n.e(c)}finally{n.f()}}},{key:"results",get:function(){return this._results}},{key:"isComplete",get:function(){return this._isComplete}},{key:"initialPuzzle",get:function(){return this.puzzle}},{key:"cells",get:function(){return this._cellsHistory[this._curCellsIdx].cells}},{key:"cellsRecord",get:function(){return this._cellsHistory[this._curCellsIdx]}},{key:"curIdx",get:function(){return this._curCellsIdx}},{key:"lastIdx",get:function(){return this._cellsHistory.length-1}},{key:"hasPrev",get:function(){return this._curCellsIdx>0}},{key:"hasNext",get:function(){return this._curCellsIdx<this._cellsHistory.length-1}}],[{key:"parse",value:function(t){if(!t||t.length<81)throw new Error("bad sudoku puzzle format [".concat(t,"]"));var n=t.match(e.cellPattern);if(81!==n.length)throw new Error("bad sudoku puzzle format [".concat(t,"]"));var a,r=n.map((function(t){if(t.startsWith("n")&&t.endsWith("N")){var n=t.slice(1,-1).split("").map((function(e){return parseInt(e)}));return{value:xe.new.apply(xe,Object(h.a)(n))}}if(t.startsWith("p"))return{value:parseInt(t[1])};if(e.valuePattern.test(t))return{value:parseInt(t),origin:!0};if("0"===t||"."===t)return{value:xe.new()};throw new Error("impossible")})),c=Y(),i=Object(u.a)(be);try{for(i.s();!(a=i.n()).done;){var o=a.value;c[o.row][o.col]=r[o.idx]}}catch(l){i.e(l)}finally{i.f()}return c}}]),e}();Qe.defaultPuzzle="\n  000000000 000000000 000000000\n  000000000 000000000 000000000\n  000000000 000000000 000000000\n ",Qe.cellPattern=/(\d)|(p\d)|(n[1-9]*N)|\./g,Qe.valuePattern=/^[1-9]$/,Qe.actions={RESET:"Reset",NOTE:"Note",UPDATE_CELL_VALUE:"Update Cell",AUTO_NOTE:"Auto Note",AUTO_POINTING:"Auto Pointing",AUTO_CLAIMING:"Auto Claiming",AUTO_PLACE:"Auto Place",AUTO_PLACE_POINTING_CLAIMING:"Auto Place/Pointing/Claiming",ELIMINATE_GROUP:"X Group",ELIMINATE_XGROUP:"X XGroup",ELIMINATE_UR:"X UR",ELIMINATE_CHAIN:"X Chain",ELIMINATE_TRIAL_ERROR:"X Trial Error",HANDLE_TIP:"Handle Tip"};var Ze=function(e){return e.isAlsc?"a":e.isGroup?"g":"d"},qe=function(e){if(e){e.type="chain";var t,n=e.chain[0].pos,a=e.chain[e.chain.length-1],r=a.pos,c=e.d,i=!1,o=!1,l=!1,s=Object(u.a)(e.chain);try{for(s.s();!(t=s.n()).done;){var f=t.value;if(f.d!==c&&(i=!0),f.pos.isAlsc?l=!0:f.pos.isGroup&&(o=!0),i&&o&&l)break}}catch(v){s.e(v)}finally{s.f()}var h=[e.chain.length-1];return o&&h.push("G"),l&&h.push("ALS"),h.push(i?"XY":"X","Chain"),h.push([Ze(n),Ze(r),a.d===c?"-x":"-xy"].join("")),e.name=h.join("-"),e}};function $e(e,t,n,a){var r,c,i,o,l,s,f;return I.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:r=Object(u.a)(t),h.prev=1,r.s();case 3:if((c=r.n()).done){h.next=32;break}i=c.value,o={pos:i,d:e,val:n.val},l=Object(u.a)(at([],o,n,a)),h.prev=7,l.s();case 9:if((s=l.n()).done){h.next=20;break}if(!((f=s.value).chain.length<=n.earlyExitLen)){h.next=16;break}return h.next=14,f;case 14:h.next=18;break;case 16:n.res=f,n.maxLength=f.chain.length;case 18:h.next=9;break;case 20:h.next=25;break;case 22:h.prev=22,h.t0=h.catch(7),l.e(h.t0);case 25:return h.prev=25,l.f(),h.finish(25);case 28:if(!n.exit){h.next=30;break}return h.abrupt("return");case 30:h.next=3;break;case 32:h.next=37;break;case 34:h.prev=34,h.t1=h.catch(1),r.e(h.t1);case 37:return h.prev=37,r.f(),h.finish(37);case 40:case"end":return h.stop()}}),Fe,null,[[1,34,37,40],[7,22,25,28]])}var et=function(e,t){return void 0!==e&&e===t};function tt(e,t,n){var r,c,i,o,l,s,f,v,d,b,p,k,y,g,m,O,_,j,w,C,x,E,N,S;return I.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(r=t.pos,c=t.d,i=t.val,o=n.cells,l=n.td,!(!1===n.val&&!0===i&&e.length>1)){A.next=45;break}if(s=e[0].pos,f="".concat(l,"@").concat(s.key),v="".concat(c,"@").concat(r.key),c!==l){A.next=24;break}if(!(d=n.checkMemo.x[f])||!d.has(v)){A.next=10;break}return A.abrupt("return");case 10:n.stat.checkChainX++,b=new Set,p=[].concat(Object(h.a)(it(s)),Object(h.a)(it(r))),k=Object(u.a)(Oe.apply(a,Object(h.a)(p)));try{for(k.s();!(y=k.n()).done;)g=y.value,m=ge(o,g),O=m.value,xe.has(O,c)&&b.add(g)}catch(P){k.e(P)}finally{k.f()}if(!(b.size>0)){A.next=20;break}return A.next=18,{chain:[].concat(Object(h.a)(e),[t]),effectedPoses:b,d:l};case 18:A.next=22;break;case 20:Object(we.f)(n.checkMemo.x,f,new Set).add(v),Object(we.f)(n.checkMemo.x,v,new Set).add(f);case 22:A.next=45;break;case 24:if(!(_=n.checkMemo.xy[f])||!_.has(v)){A.next=27;break}return A.abrupt("return");case 27:if(n.stat.checkChainXY++,j=!1,w=it(r),s.key!==r.key||1!==w.length){A.next=34;break}return A.delegateYield(I.a.mark((function n(){var a,r,i,s,f,v;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=new Set,r=Object(u.a)(w);try{for(r.s();!(i=r.n()).done;)s=i.value,f=ge(o,s),v=f.value,xe.entries(v).forEach((function(e){return a.add(e)}))}catch(P){r.e(P)}finally{r.f()}if(a.delete(c),a.delete(l),!(a.size>0)){n.next=9;break}return j=!0,n.next=9,{chain:[].concat(Object(h.a)(e),[t]),effectedPoses:new Set(w),d:l,yd:c,effectedDs:a,keep:!0,keepDs:[c,l]};case 9:case"end":return n.stop()}}),n)}))(),"t0",32);case 32:A.next=44;break;case 34:if(C=it(s),1!==w.length||1!==C.length){A.next=44;break}if(x=C[0],E=w[0],!(et(E.row,x.row)||et(E.col,x.col)||et(E.block,x.block))){A.next=44;break}if(N=ge(o,E),S=N.value,!xe.has(S,l)){A.next=44;break}return j=!0,A.next=44,{chain:[].concat(Object(h.a)(e),[t]),effectedPoses:new Set([E]),d:l};case 44:j||(Object(we.f)(n.checkMemo.xy,f,new Set).add(v),s.key===r.key&&Object(we.f)(n.checkMemo.xy,v,new Set).add(f));case 45:case"end":return A.stop()}}),Ye)}function nt(e,t,n){var a,r,c,i,o,l,s,v,d,b,p,k,y,g,m,O,_,j,w,C,x,E,N,S;return I.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(a=t.pos,r=t.d,c=t.val,i=n.dLinks,o=n.dAlsces,!n.tryDigitLinks){A.next=29;break}l=0,s=[i[r][a][c],n.tryGroupLinks?i[r][a].group[c]:[]];case 4:if(!(l<s.length)){A.next=29;break}v=s[l],d=Object(u.a)(v),A.prev=7,d.s();case 9:if((b=d.n()).done){A.next=18;break}if(p=b.value,!rt(e,k={pos:p,val:!c,d:r})){A.next=14;break}return A.abrupt("continue",16);case 14:return A.next=16,[[].concat(Object(h.a)(e),[t]),k];case 16:A.next=9;break;case 18:A.next=23;break;case 20:A.prev=20,A.t0=A.catch(7),d.e(A.t0);case 23:return A.prev=23,d.f(),A.finish(23);case 26:l++,A.next=4;break;case 29:if(!n.tryCellLinks){A.next=50;break}y=Object(u.a)(i[r][a].cell[c]),A.prev=31,y.s();case 33:if((g=y.n()).done){A.next=42;break}if(m=g.value,!rt(e,O={pos:a,val:!c,d:m})){A.next=38;break}return A.abrupt("continue",40);case 38:return A.next=40,[[].concat(Object(h.a)(e),[t]),O];case 40:A.next=33;break;case 42:A.next=47;break;case 44:A.prev=44,A.t1=A.catch(31),y.e(A.t1);case 47:return A.prev=47,y.f(),A.finish(47);case 50:if(!n.tryAlscLinks){A.next=73;break}_=Object(u.a)(i[r][a].alsc[c]),A.prev=52,_.s();case 54:if((j=_.n()).done){A.next=65;break}if(w=j.value,C=null,x=null,c?(E=w,C=Object(f.a)(Object(f.a)({},t),{},{pos:o[r][a]}),x={pos:E,val:!c,d:E.d}):(N=w.als,S=w.alsc,C=Object(f.a)(Object(f.a)({},t),{},{pos:o[r][a],als:N}),x={pos:S,val:!c,d:S.d,als:N}),!rt(e,x)){A.next=61;break}return A.abrupt("continue",63);case 61:return A.next=63,[[].concat(Object(h.a)(e),[C]),x];case 63:A.next=54;break;case 65:A.next=70;break;case 67:A.prev=67,A.t2=A.catch(52),_.e(A.t2);case 70:return A.prev=70,_.f(),A.finish(70);case 73:case"end":return A.stop()}}),Ke,null,[[7,20,23,26],[31,44,47,50],[52,67,70,73]])}function at(e,t,n,a){var r,c,i;return I.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(n.stat.searchChainDFS++,!n.exit){o.next=3;break}return o.abrupt("return");case 3:if(!(e.length+1>=n.maxLength)){o.next=6;break}return a&&!a.continue()&&(n.exit=!0),o.abrupt("return");case 6:return o.delegateYield(tt(e,t,n),"t0",7);case 7:r=Object(u.a)(nt(e,t,n)),o.prev=8,r.s();case 10:if((c=r.n()).done){o.next=15;break}return i=c.value,o.delegateYield(at.apply(void 0,Object(h.a)(i).concat([n,a])),"t1",13);case 13:o.next=10;break;case 15:o.next=20;break;case 17:o.prev=17,o.t2=o.catch(8),r.e(o.t2);case 20:return o.prev=20,r.f(),o.finish(20);case 23:case"end":return o.stop()}}),Je,null,[[8,17,20,23]])}var rt=function(e,t){var n,a=it(t.pos),r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var c=n.value;if(c.val===t.val&&c.d===t.d&&c.pos.key===t.pos.key)return!0;if(c.d===t.d&&c.val&&t.val&&(c.pos.poses||t.pos.poses)&&ot(a,it(c.pos)))return!0}}catch(i){r.e(i)}finally{r.f()}return!1},ct=function(e,t,n,a,r){var c,i;if(a.length>1)return i={key:"".concat(r,"@").concat(e).concat(t,"block").concat(n),d:r,isGroup:!0,domain:new Set([e])},Object(s.a)(i,e,t),Object(s.a)(i,"block",n),Object(s.a)(i,"poses",a),Object(s.a)(i,"toString",(function(){return this.key})),i;var o=a[0];return c={key:o.key,d:r,isGroup:!1,domain:new Set([e])},Object(s.a)(c,e,t),Object(s.a)(c,"block",n),Object(s.a)(c,"pos",o),Object(s.a)(c,"poses",a),Object(s.a)(c,"toString",(function(){return this.key})),c},it=function(e){return e.isGroup||e.isAlsc?Object(h.a)(e.poses):[e]};var ot=function(e,t){return Object(we.g)(new Set(e),new Set(t)).size>0},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return void 0!==t.row&&e.row===t.row&&e.key!==t.key}))},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return void 0!==t.col&&e.col===t.col&&e.key!==t.key}))},ut=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=t.filter((function(e){return e.block===n.block&&e.key!==n.key&&!ot(e.poses,n.isGroup?n.poses:[n])})),r=a.filter((function(e){return e.isGroup})),c=Object(u.a)(a.filter((function(e){return!e.isGroup})));try{for(c.s();!(e=c.n()).done;){var i,o=e.value,l=!0,s=Object(u.a)(r);try{for(s.s();!(i=s.n()).done;){var f=i.value;if(ot(f.poses,o.poses)){l=!1;break}}}catch(h){s.e(h)}finally{s.f()}l&&r.push(o)}}catch(h){c.e(h)}finally{c.f()}return r};function ft(e,t){for(var n=new Set,a=new Set,r=0,c=[["row",lt],["col",st],["block",ut]];r<c.length;r++){var i=Object(l.a)(c[r],2),o=i[0],s=i[1];if(!t.isGroup||"block"===o||t.domain.has(o)){var f,h=0,v=null,d=Object(u.a)(s(e,t));try{for(d.s();!(f=d.n()).done;){var b=f.value;h++,b.isGroup&&(t.isGroup?(a.add(b),v=b):new Set(b.poses).has(t)||(a.add(b),v=b))}}catch(p){d.e(p)}finally{d.f()}1===h&&v&&n.add(v)}}return{false:n,true:a}}function ht(e,t,n){for(var a=new Set,r=new Set,c=function(){var c=Object(l.a)(o[i],2),s=c[0],f=c[1],h=n,v=new Set;if(n.isGroup){if("block"!==s&&!n.domain.has(s))return"continue";h=n.poses[0],v=new Set(n.poses)}var d,b=0,p=null,k=Object(u.a)(f(h).filter((function(e){return!v.has(e)})));try{for(k.s();!(d=k.n()).done;){var y=d.value,g=ge(e,y).value;xe.has(g,t)&&(r.add(y),b++,p=y)}}catch(m){k.e(m)}finally{k.f()}1===b&&a.add(p)},i=0,o=[["row",he],["col",ve],["block",fe]];i<o.length;i++)c();return{false:a,true:r}}function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return e[t]}function dt(e,t){var n,a=function(e){for(var t={},n=0,a=[["row",Q],["col",$]];n<a.length;n++){var r,c=Object(l.a)(a[n],2),i=c[0],o=c[1],s=Object(u.a)(o);try{for(s.s();!(r=s.n()).done;){var f,h=r.value,v={},d=0,b=Object(u.a)(h);try{for(b.s();!(f=b.n()).done;){var p=f.value;d=p[i];var k=ge(e,p).value;if(xe.is(k)){var y,g=Object(we.f)(v,p.block,{}),m=Object(u.a)(xe.entries(k));try{for(m.s();!(y=m.n()).done;){var O=y.value;Object(we.f)(g,O,[]).push(p)}}catch(M){m.e(M)}finally{m.f()}}}}catch(M){b.e(M)}finally{b.f()}for(var _=0,j=Object.entries(v);_<j.length;_++)for(var w=Object(l.a)(j[_],2),C=w[0],x=w[1],E=0,N=Object.entries(x);E<N.length;E++){var S=Object(l.a)(N[E],2),A=S[0],P=S[1],T=parseInt(C),I=parseInt(A),L=Object(we.f)(t,I,[]);P.length>1?L.push(ct(i,d,T,P,I)):function(){var e=P[0],t=L.filter((function(t){return t.pos===e}))[0];t||(t=ct(i,d,T,P,I),L.push(t)),t.domain.add(i),t[i]=d}()}}}catch(M){s.e(M)}finally{s.f()}}return t}(e),r=function(e,t,n){for(var a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object(f.a)({alsSizes:[1,2,3,4,5,6,7,8]},n);for(var a={},r={},c=0,i=[se,ue,le];c<i.length;c++){var o,s=i[c],v=Object(u.a)(H);try{for(v.s();!(o=v.n()).done;){var d,b=o.value,p=Ae(e,s(b)),k=Object.values(Object(we.b)(p,0)),y=Object(u.a)(n.alsSizes);try{for(y.s();!(d=y.n()).done;){var g,m=d.value,O=Object(u.a)(Object(we.d)(k,m));try{for(O.s();!(g=O.n()).done;){var _=Object(l.a)(g.value,2),j=_[0],w=_[1],C=Ae(e,j),x=Object(we.b)(C,1,"d","poses"),E=[].concat(Object(h.a)(Object(h.a)(j).map((function(e){return e.key})).sort()),[Object(h.a)(w).sort().join("")]).join("-"),N=a[E]||{key:E,poses:j,digits:w,domains:Se(j),digitInfos:x,toString:function(){return this.key}};a[E]=N;var S,A=Object(u.a)(w);try{for(A.s();!(S=A.n()).done;){var P=S.value,T=x[P],I=T.poses,L=Se(I),M=Object(we.f)(r,P,{}),G=null,R=null;if(1===I.size){var D=Object(h.a)(I)[0];G=D.key,R=M[G]||Object(f.a)(Object(f.a)({},T),{},{isAlsc:!0,domains:L,cell:D,key:G,type:"cell",alses:[],toString:function(){return this.key}})}else{var z=bt(P,t,L,I);z?(G=z.key,R=M[G]||Object(f.a)(Object(f.a)({},T),{},{isAlsc:!0,domains:L,group:z,key:z.key,type:"group",isGroup:!0,alses:[],toString:function(){return this.key}})):(G=Object(h.a)(I).map((function(e){return e.key})).sort().join("-"),R=M[G]||Object(f.a)(Object(f.a)({},T),{},{isAlsc:!0,domains:L,key:G,type:"alsc",alses:[],toString:function(){return this.key}}))}R.alses.push(N),M[G]=R,x[P]=R}}catch(V){A.e(V)}finally{A.f()}}}catch(V){O.e(V)}finally{O.f()}}}catch(V){y.e(V)}finally{y.f()}}}catch(V){v.e(V)}finally{v.f()}}return r}(e,t,n),r={},c=0,i=Object.values(a);c<i.length;c++)for(var o=i[c],s=0,v=Object.values(o);s<v.length;s++){var d,b=v[s],p=b.d,k=b.alses,y=Object(we.f)(r,p,{}),g=pt(o,b),m=[],O=Object(u.a)(k);try{for(O.s();!(d=O.n()).done;)for(var _=d.value,j=0,w=Object.values(_.digitInfos);j<w.length;j++){var C=w[j];C!==b&&m.push({als:_,alsc:C})}}catch(x){O.e(x)}finally{O.f()}y[b]={true:g,false:m}}return[a,r]}(e,a,t),c=Object(l.a)(r,2),i=c[0],o=c[1],s={},v={},d=Object(u.a)(be);try{for(d.s();!(n=d.n()).done;){var b=n.value,p=ge(e,b).value;if(xe.is(p)){var k,y=xe.entries(p),g=Object(u.a)(y);try{var m=function(){var t=k.value;Object(we.f)(v,t,[]).push(b);var n=Object(we.f)(s,t,{}),r=ht(e,t,b);n[b]=r,r.group=ft(a[t],b);var c=new Set(y.filter((function(e){return e!==t})));r.cell={false:2===y.length?c:new Set,true:c},r.alsc=vt(o[t],b)||{false:new Set,true:new Set}};for(g.s();!(k=g.n()).done;)m()}catch(X){g.e(X)}finally{g.f()}}}}catch(X){d.e(X)}finally{d.f()}for(var O=0,_=Object.entries(a);O<_.length;O++){var j,w=Object(l.a)(_[O],2),C=w[0],x=w[1],E=parseInt(C),N=Object(we.f)(s,E,{}),S=Object(u.a)(x.filter((function(e){return e.isGroup})));try{for(S.s();!(j=S.n()).done;){var A=j.value,P=ht(e,E,A);N[A]=P,P.group=ft(a[E],A),P.cell={false:new Set,true:new Set},P.alsc=vt(o[E],A)||{false:new Set,true:new Set}}}catch(X){S.e(X)}finally{S.f()}}for(var T=0,I=Object.entries(i);T<I.length;T++){var L,M=Object(l.a)(I[T],2),G=M[0],R=M[1],D=parseInt(G),z=Object(we.f)(s,D,{}),V=Object(u.a)(Object.values(R).filter((function(e){return"alsc"===e.type})));try{for(V.s();!(L=V.n()).done;){var U=L.value,B={false:new Set,true:new Set};z[U]=B,B.group={false:new Set,true:new Set},B.cell={false:new Set,true:new Set},B.alsc=vt(o[D],U)||{false:new Set,true:new Set}}}catch(X){V.e(X)}finally{V.f()}}return[v,a,i,s]}var bt=function(e,t,n,a){var r=n.row,c=n.col,i=n.block,o="".concat(e,"@row").concat(r,"col").concat(c,"block").concat(i),l=t[e].filter((function(e){return e.isGroup&&e.key===o&&e.poses.size===a.size}));if(1===l.length)return l[0]};function pt(e,t){for(var n=[],a=t.poses,r=t.domains,c=0,i=Object.entries(r);c<i.length;c++)for(var o=Object(l.a)(i[c],2),s=o[0],u=o[1],f=0,h=Object.values(e);f<h.length;f++){var v=h[f];v!==t&&(v.domains[s]===u&&(ot(v.poses,a)||n.push(v)))}return n}var kt=function(e,t,n,a,r,c){var i=[k.a.Note];if(e===t&&i.push(k.a.ActiveValue),r){var o=null;if(n?o=r.highlights:a&&(o=r.effect),o){var l=o,s=l.posNotes,u=l.posSubNotes,f=o,h=f.notes,v=f.subNotes;s&&u&&(h=s[c],v=u[c]),h&&h.has(e)?i.push(k.a.MarkedNoteValue):v&&v.has(e)&&i.push(k.a.MarkedValue),n&&a&&r.effect.notes.has(e)&&i.push(k.a.Effected)}}return i.join(" ")},yt=c.a.memo((function(e){var t=e.value,n=e.origin,a=e.pos,r=e.activePos,i=e.activeVal,o=e.available,l=e.showAvail,s=e.isNoting,u=e.onClick,f=e.marks,h=a.block,v=a.row,d=a.col,b=[],p=null,y=!1;if(r){var g=r.row,m=r.col,O=r.block;v===g&&d===m?(y=!0,b.push(k.a.Selected)):v!==g&&d!==m&&h!==O||b.push(k.a.Related)}var _=o;o?(b.push(k.a.Available),l&&b.push(s?k.a.Note:k.a.Place)):null===o?(b.push(k.a.Available),_=!0):s||n||t!==i||(b.push(k.a.Available),_=!0);var j=!1,w=!1,C=!1;if(f){var x=f.domain,E=f.effect,N=f.highlights;if(x){var S=x.rows,A=x.cols,T=x.blocks,I=x.cells;S&&S.has(v)&&(w=!0),A&&A.has(d)&&(w=!0),T&&T.has(h)&&(w=!0),I&&I.has(a)&&(w=!0)}if(E){var L=E.rows,M=E.cols,G=E.blocks,R=E.cells;L&&L.has(v)&&(C=!0),M&&M.has(d)&&(C=!0),G&&G.has(h)&&(C=!0),R&&R.has(a)&&(C=!0)}N&&N.cells.has(a)&&(j=!0)}if(j?(b.push(k.a.MarkedHighlight),f.highlights.withoutOutlinePoses&&f.highlights.withoutOutlinePoses.has(a)&&b.push(k.a.WithoutOutline)):w&&b.push(k.a.MarkedDomain),C&&b.push(k.a.MarkedEffect),xe.is(t)){b.push(k.a.Notes);var H=t;xe.size(H)>0&&(p=D.map((function(e,t){return c.a.createElement("div",{key:t,className:k.a.RowNotes},e.map((function(e){return c.a.createElement("div",{key:e,className:kt(e+1,i,j,C,f,a)},xe.has(H,e+1)?P[e+1]:null)})))})))}else b.push(k.a.Value),!n&&b.push(k.a.Placed),t!==i||y||b.push(k.a.ActiveValue),j&&f.highlights.values&&f.highlights.values.has(t)&&b.push(k.a.MarkedValue),p=P[t];return c.a.createElement("div",{className:b.join(" "),onClick:_?function(){return u(a)}:void 0},p)})),gt=n(20),mt=n.n(gt),Ot=function(e){var t=e.block,n=e.activePos,a=e.activeVal,r=e.cells,i=e.availableCells,o=e.cellClickedHandler,l=e.showAvail,s=e.isNoting,u=e.marks,f=t%2===1;return c.a.createElement("div",{className:"".concat(mt.a.Block," ").concat(f?mt.a.Odd:"")},oe(t).map((function(e,t){return c.a.createElement("div",{key:t,className:mt.a.Row},e.map((function(e){return c.a.createElement(yt,Object.assign({key:e.key},ge(r,e),{pos:e,activePos:n,activeVal:a,available:i&&i[e.row][e.col],onClick:o,showAvail:l,isNoting:s,marks:u}))})))})))},_t=n(10),jt=n(11);function wt(){var e=Object(_t.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  ","\n"]);return wt=function(){return e},e}function Ct(){var e=Object(_t.a)(["\n  width: ",";\n  height: 0;\n  padding-top: ","%;\n  position: relative;\n"]);return Ct=function(){return e},e}var xt=jt.a.div(Ct(),(function(e){var t=e.width;return void 0!==t?t:"auto"}),(function(e){return 100/e.ratio})),Et=jt.a.div(wt(),(function(e){var t=e.fixed,n=e.scroll;return t?"\n    height: 100%;\n    overflow: ".concat(n?"scroll":"hidden",";\n  "):"\n  min-height: 100%;\n  "})),Nt=function(e){var t=e.ratio,n=void 0===t?1:t,a=e.fixed,r=void 0===a||a,i=e.scroll,o=void 0!==i&&i,l=e.children;return c.a.createElement(xt,{ratio:n},c.a.createElement(Et,{fixed:r,scroll:o},l))},St=n(37),At=n.n(St),Pt=function(e,t){var n=e.row,a=e.col,r=G(t),c=Object(l.a)(r,2),i=c[0];return[(a+(c[1]+.5)/3+.35/100)*(.985/9)+(.5*(Math.floor(a/3)+1)-.25)/100,(n+(i+.5)/3+.35/100)*(.985/9)+(.5*(Math.floor(n/3)+1)-.25)/100]};function Tt(){var e=Object(_t.a)(["\n  user-select: none;\n  pointer-events: none;\n  position: absolute;\n  transform-origin: top left;\n"]);return Tt=function(){return e},e}var It=jt.a.div.attrs((function(e){var t=e.x,n=e.y,a=e.distance,r=e.deg,c=e.type;return{style:{borderTop:"2px ".concat(c," red"),width:"".concat(100*a,"%"),height:"".concat(100*a,"%"),transform:"translate(".concat(t/a*100,"%, ").concat(n/a*100,"%)\n    rotate(").concat(r,"deg)\n    translate(").concat(.01/a*100,"%)")}}}))(Tt()),Lt=function(e){var t=e.type,n=void 0===t?"solid":t,a=e.startPos,r=e.startDigit,i=e.endPos,o=e.endDigit,s=Pt(a,r),u=Pt(i,o),f=function(e,t){var n=Object(l.a)(e,2),a=n[0],r=n[1],c=Object(l.a)(t,2),i=c[0]-a,o=c[1]-r;return Math.sqrt(i*i+o*o)}(s,u),h=function(e,t,n){var a=Object(l.a)(e,2),r=a[0],c=a[1],i=Object(l.a)(t,2),o=i[0]-r,s=i[1]-c;return Math.acos(o/n)*(s<0?-1:1)/Math.PI*180}(s,u,f);return c.a.createElement(It,{x:s[0],y:s[1],distance:f-.02,deg:h,type:n},c.a.createElement("div",{className:At.a.Pointer}))};function Mt(){var e=Object(_t.a)(["\n  user-select: none;\n  pointer-events: none;\n  position: absolute;\n  border: 1px solid red;\n"]);return Mt=function(){return e},e}var Gt=jt.a.div.attrs((function(e){var t=e.sx,n=e.sy,a=e.ex,r=e.ey;return{style:{top:"".concat(100*n-.8,"%"),left:"".concat(100*t-.8,"%"),right:"".concat(100*(1-a)-.8,"%"),bottom:"".concat(100*(1-r)-.8,"%")}}}))(Mt()),Rt=function(e){var t,n,a,r,i=e.domain,o=e.row,s=e.col,u=e.block;"row"===i?(t=a=o,r=(n=F(u)[0])+2):"col"===i&&(n=r=s,a=(t=W(u)[0])+2);var f=Pt({row:t,col:n},1),h=Object(l.a)(f,2),v=h[0],d=h[1],b=Pt({row:a,col:r},9),p=Object(l.a)(b,2),k=p[0],y=p[1];return c.a.createElement(Gt,{sx:v,sy:d,ex:k,ey:y})},Dt=n(21),Ht=n.n(Dt),zt=function(e){var t=e.isComplete,n=e.availablePositions,a=e.cells,r=e.activeVal,i=e.activePos,o=e.cellClickedHandler,l=e.showAvail,s=e.isNoting,u=e.marks;i&&(r=ge(a,i).value);var f=[Ht.a.SudokuBoard];return t&&f.push(Ht.a.Complete),c.a.createElement(Nt,{ratio:1},c.a.createElement("div",{className:f.join(" ")},u&&u.frames&&u.frames.map((function(e){return c.a.createElement(Rt,e)})),u&&u.arrows&&u.arrows.map((function(e,t){return c.a.createElement(Lt,Object.assign({key:"".concat(e.startPos,"-").concat(e.endPos,"#").concat(t)},e))})),D.map((function(e,t){return c.a.createElement("div",{key:t,className:Ht.a.Row},e.map((function(e){return c.a.createElement(Ot,{key:e,block:e,cells:a,activePos:i,activeVal:r,availableCells:n,cellClickedHandler:o,showAvail:l,isNoting:s,marks:u})})))}))))},Vt=n(42);function Ut(){var e=Object(_t.a)(["\n  &::before {\n    content: '';\n    width: 1px;\n    margin-left: -1px;\n    float: left;\n    height: 0;\n    padding-top: ","%;\n  }\n  &::after {\n    content: '';\n    display: table;\n    clear: both;\n  }\n"]);return Ut=function(){return e},e}var Bt=jt.a.div(Ut(),(function(e){return 100/e.ratio})),Xt=function(e){var t=e.ratio,n=void 0===t?1:t,a=e.children,r=Object(Vt.a)(e,["ratio","children"]);return c.a.createElement(Bt,Object.assign({ratio:n},r),a)},Wt=n(13),Ft=n.n(Wt),Yt=c.a.memo((function(e){var t=e.isNoting,n=e.activeVal,a=e.availableDigits,i=e.remainingDigits,o=e.digitClickedHandler,l=Object(r.useCallback)((function(e){var t=[Ft.a.Digit];return e===n&&t.push(Ft.a.active),a.has(e)||t.push(Ft.a.Disabled),t.join(" ")}),[n,a]);return c.a.createElement("div",{className:"".concat(Ft.a.Digits," ").concat(t?Ft.a.isNoting:"")},c.a.createElement(Xt,{className:l(1),onClick:a.has(1)?function(){return o(1)}:void 0},P[1],c.a.createElement("div",{className:Ft.a.Count},P[i[1]])),[2,3,4,5,6,7,8,9].map((function(e){return c.a.createElement("div",{key:e,className:l(e),onClick:a.has(e)?function(){return o(e)}:void 0},P[e],c.a.createElement("div",{className:Ft.a.Count},P[i[e]]))})))})),Kt=n(12),Jt=n.n(Kt),Qt=function(e){var t=e.cellsRecord,n=e.hasPrev,a=e.hasNext,r=e.jump,i=e.jumpToFirst,o=e.jumpToLast,l=e.remainingDigits,s=e.activeVal,u=e.availableDigits,f=e.digitClickedHandler,h=e.showAvail,v=e.isNoting,d=e.withALS,p=e.deselectHandler,k=e.toggleShowAvailHandler,y=e.toggleIsNotingHandler,g=e.toggleWithALSHandler,m=e.solveHandler,O=e.resetHandler,_=e.eraseValueHandler,j=e.autoNoteHandler,w=e.autoPlacePointingClaimingHandler,C=e.tip,x=e.tipHandler,E=e.cancelTipHandler,N=e.changeChainStepHandler,S=e.jumpToTrailStartHandler;return c.a.createElement("div",{className:Jt.a.Controls},c.a.createElement("div",{className:Jt.a.History},c.a.createElement(b,{disabled:!n,onClick:i},"<<"),c.a.createElement(b,{disabled:!n,onClick:function(){return r(-1)}},"<"),c.a.createElement(b,{disabled:!a,onClick:function(){return r(1)}},">"),c.a.createElement(b,{disabled:!a,onClick:o},">>"),c.a.createElement("span",null,"#",t.idx),c.a.createElement("span",null,t.desc)),c.a.createElement("div",{className:Jt.a.Panel},c.a.createElement(b,{onClick:m},"Solve"),c.a.createElement(b,{onClick:O},"Reset"),c.a.createElement(b,{onClick:_},"Erase"),c.a.createElement(b,{onClick:p},"Deselect"),c.a.createElement(b,{type:h?"On":"Off",onClick:k},"Avail"),c.a.createElement(b,{type:v?"On":"Off",onClick:y},"Note"),c.a.createElement(b,{type:d?"On":"Off",onClick:g},"ALS")),c.a.createElement(Yt,{isNoting:v,activeVal:s,availableDigits:u,remainingDigits:l,digitClickedHandler:f}),c.a.createElement("div",{className:Jt.a.Tools},c.a.createElement(b,{onClick:j},"note"),c.a.createElement(b,{onClick:w},"place/point/claim"),c.a.createElement("div",{className:Jt.a.Tip},c.a.createElement(b,{type:C&&"On",onClick:x},C?C.name:"tip"),C&&c.a.createElement(b,{type:"Warn",onClick:E},"X"),C&&"chain"===C.type&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:Jt.a.ChainSteper,onClick:function(){return N(-1)}},"<"),c.a.createElement("span",{className:Jt.a.ChainSteper,onClick:function(){return N(1)}},">")),C&&"trial-error"===C.type&&c.a.createElement("span",{className:Jt.a.ChainSteper,onClick:S},"<start"))))},Zt=n(25),qt=n.n(Zt),$t=function(e){var t=e.show,n=e.onClick,a=e.absolute,r=void 0!==a&&a;if(!t)return null;var i=[qt.a.Backdrop];return r&&i.push(qt.a.Absolute),c.a.createElement("div",{className:i.join(" "),onClick:n})},en=n(22),tn=n.n(en),nn=c.a.memo(c.a.memo((function(e){var t=e.show,n=void 0!==t&&t,a=e.close,r=e.children,i=[tn.a.Modal];return n&&i.push(tn.a.Show),c.a.createElement(c.a.Fragment,null,c.a.createElement($t,{show:n,onClick:a}),c.a.createElement("div",{className:i.join(" ")},c.a.createElement("div",{className:tn.a.Close,onClick:a},"X"),r))})),(function(e,t){return!e.show&&!t.show})),an=n(38),rn=n.n(an),cn=n(39),on=n.n(cn),ln=function(){return c.a.createElement("div",{className:on.a.Loader},"Loading...")},sn=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement($t,{show:!0,absolute:!0}),c.a.createElement("div",{className:rn.a.Spinner},c.a.createElement(ln,null)))},un=n(40),fn=n.n(un),hn=n(17),vn=n.n(hn),dn=function(e){var t=e.sudoku,n=void 0===t?new Qe:t,a=e.startNewGameHandler,i=e.newGameHandler,o=e.emptyHandler,v=Object(r.useState)(!1),d=Object(l.a)(v,2),p=d[0],k=d[1],y=Object(r.useState)(!1),g=Object(l.a)(y,2),m=g[0],O=g[1],_=Object(r.useState)(0),j=Object(l.a)(_,2)[1];Object(r.useEffect)((function(){return n.subscribe(j),function(){n.unsubscribe(j)}}),[n]);var w=Object(r.useState)({pos:null,val:0}),C=Object(l.a)(w,2),x=C[0],E=C[1],N=x.pos,S=x.val,A=Object(r.useState)(!1),P=Object(l.a)(A,2),T=P[0],I=P[1],L=Object(r.useState)(!1),M=Object(l.a)(L,2),G=M[0],R=M[1],D=Object(r.useState)(!1),H=Object(l.a)(D,2),z=H[0],V=H[1],U=Object(r.useState)(null),B=Object(l.a)(U,2),X=B[0],W=B[1],F=Object(r.useState)(2),Y=Object(l.a)(F,2),K=Y[0],J=Y[1],Q=n.cellsRecord,Z=n.isComplete,q=Q.cells,$=Object(r.useMemo)((function(){return n.calcAvailableDigits(N,q)}),[N,n,q]),ee=Object(r.useMemo)((function(){return n.calcAvailablePositions(S,q)}),[S,n,q]),te=Object(r.useMemo)((function(){return n.calcRemainingDigits(q)}),[n,q]),ne=Object(r.useCallback)((function(){i(n.stringify(q,{placedAsOrigin:!0,withNotes:!1}))}),[q,i,n]),ae=Object(r.useCallback)((function(){i(n.stringify(q,{originAsPlaced:!0,withNotes:!1}),!1)}),[q,i,n]),re=Object(r.useCallback)((function(e){0!==S?n.updateCellValue(G,e,S):E((function(t){var n=t.pos;return n&&e===n&&(e=null),{pos:e,val:0}}))}),[S,G,n]),ie=Object(r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)E({pos:null,val:e});else{if(!$.has(e))return;N?n.updateCellValue(G,N,e):E((function(t){var n=t.val,a=e;return n===e&&(a=0),{pos:null,val:a}}))}}),[N,$,G,n]),oe=Object(r.useCallback)((function(){E({pos:null,val:0})}),[]),le=Object(r.useCallback)((function(){n.solve()}),[n]),se=Object(r.useCallback)((function(){window.confirm&&!window.confirm("Are you sure to reset?")||(n.reset(),oe())}),[oe,n]),ue=Object(r.useCallback)((function(){N&&n.updateCellValue(!1,N,xe.new())}),[N,n]),fe=Object(r.useCallback)((function(){I((function(e){return!e}))}),[]),he=Object(r.useCallback)((function(){R((function(e){return!e}))}),[]),ve=Object(r.useCallback)((function(){V((function(e){return!e}))}),[]),de=Object(r.useCallback)((function(){n.autoNote()}),[n]),be=Object(r.useCallback)((function(){n.autoPlacePointingClaiming()}),[n]),pe=Object(r.useCallback)((function(){oe(),X?(W(null),n.clearHistoryLowerBound(),n.handleTip(X)):(k(!0),setTimeout((function(){var e=n.findTip({chain:{timeout:1e4,confirmContinue:function(e){return window.confirm("already running for ".concat(e/1e3,"s, continue finding?"))},withoutALS:!z}});k(!1),e&&(we.c.log("tip:",e),W(e),"chain"===e.type?J(e.chain.length):"trial-error"===e.type&&(n.setHistoryLowerBound(e.startIdx),!0!==e.err&&e.err.digits.size>0&&ie(Object(h.a)(e.err.digits)[0],!0)))}),0))}),[oe,ie,n,X,z]),ke=Object(r.useCallback)((function(){X&&(W(null),"trial-error"===X.type&&(n.clearHistoryLowerBound(),n.revertTo(X.startIdx)))}),[n,X]),ye=Object(r.useCallback)((function(e,t){N&&E((function(n){var a=n.pos,r=a.row,c=a.col;return{val:0,pos:ce((r+9+e)%9,(c+9+t)%9)}}))}),[N]),ge=Object(r.useCallback)((function(e){S&&E((function(t){return{pos:null,val:(t.val-1+e+9)%9+1}}))}),[S]),me=Object(r.useMemo)((function(){if(X)if("group"===X.type){for(var e=X.cls,t=X.domains,n=X.poses,a=X.notes,r={},c=0,i=Object.entries(t);c<i.length;c++){var o=Object(l.a)(i[c],2),v=o[0],d=o[1];r[v+"s"]=new Set([d])}if(0===e)return{effect:Object(f.a)(Object(f.a)({},r),{},{notes:a}),highlights:{cells:n,notes:a}};if(1===e)return{domain:Object(f.a)(Object(f.a)({},r),{},{notes:a}),highlights:{cells:n,notes:a}}}else if("X-Group"===X.type){var b=X.domain,p=X.rows,k=X.cols,y=X.blocks,g=X.poses,m=X.d,O=new Set([m]);if("row"===b)return{domain:{rows:p},effect:{cols:k,blocks:y,notes:O},highlights:{cells:g,notes:O}};if("col"===b)return{domain:{cols:k},effect:{rows:p,blocks:y,notes:O},highlights:{cells:g,notes:O}};if("block"===b)return{domain:{blocks:y},effect:{rows:p,cols:k,notes:O},highlights:{cells:g,notes:O}}}else{if("chain"===X.type){var _=X.chain,j=X.effectedPoses,w=X.d,C=X.effectedDs,x=_.slice(0,K),E=[];x.forEach((function(e){var t=e.pos;t.isAlsc||E.push.apply(E,Object(h.a)(it(t)))}));var N=new Set(E),S=new Set(E);it(_[0].pos).forEach((function(e){return S.delete(e)})),it(_[_.length-1].pos).forEach((function(e){return S.delete(e)}));var A,P=C||new Set([w]),T={},I={},L=Object(u.a)(x);try{for(L.s();!(A=L.n()).done;){var M=A.value,G=T;M.d!==w&&(G=I);var R,D=M.pos,H=Object(u.a)(it(D));try{for(H.s();!(R=H.n()).done;){var z=R.value,V=G[z]||new Set;G[z]=V,V.add(M.d)}}catch(de){H.e(de)}finally{H.f()}}}catch(de){L.e(de)}finally{L.f()}var U=[],B={},W=null,F=null;x.forEach((function(e){var t=e.pos,n=e.als;if(t.isAlsc)W=n,F=t;else if(t.isGroup){var a=t.key,r=t.domain,c=t.block,i=t.row,o=t.col;U.push({key:a,domain:Object(h.a)(r)[0],block:c,row:i,col:o})}})),B.cells=W&&W.poses,F&&it(F).forEach((function(e){return N.add(e)}));var Y,J=[],Z=x[0],q=Object(u.a)(x.slice(1));try{for(q.s();!(Y=q.n()).done;){var $=Y.value,ee=je(it(Z.pos),it($.pos)),te=Object(l.a)(ee,2),ne=te[0],ae=te[1];J.push({startPos:ne,startDigit:Z.d,endPos:ae,endDigit:$.d,type:$.val?"solid":"dashed"}),Z=$}}catch(de){q.e(de)}finally{q.f()}var re=x.length===_.length?{cells:j,notes:P}:null;return{domain:B,frames:U,arrows:J,effect:re,highlights:{cells:N,posNotes:T,posSubNotes:I,withoutOutlinePoses:S}}}if("trial-error"===X.type){var ce=X.startIdx,ie=X.pos,oe=X.d,le=X.err,se=new Set([oe]),ue=null;if(!0===le)ue={highlights:{cells:new Set([ie]),values:se,notes:se}};else{var fe,he=le.domain,ve=le.digits;if(Q.idx>=ce)ue={effect:(fe={},Object(s.a)(fe,he+"s",new Set([le[he]])),Object(s.a)(fe,"notes",ve),Object(s.a)(fe,"values",ve),fe),highlights:{cells:new Set([ie]),values:se,notes:se}}}if(Q.idx>=ce)return ue}}}),[Q.idx,K,X]),Oe=Object(r.useCallback)((function(e){if(X&&"chain"===X.type){var t=X.chain.length;J((function(n){return(n-1+e+t)%t+1}))}}),[X]),_e=Object(r.useCallback)((function(){X&&"trial-error"===X.type&&n.jumpTo(X.startIdx)}),[n,X]);Object(r.useEffect)((function(){var e=function(e){if(we.c.log(e),!p)if(e.code.startsWith("Digit")){var t=parseInt(e.key);ie(t)}else if("N"===e.key)a();else if("n"===e.key)e.ctrlKey?de():he();else if("a"===e.key)e.ctrlKey?fe():ve();else if("s"!==e.key||e.isComposing||e.metaKey)if("r"!==e.key||e.isComposing||e.metaKey)if("e"===e.key)ue();else if("b"===e.key)S||N||re(ce(4,4));else if("d"===e.key||"Escape"===e.key)oe();else if("t"===e.key)pe();else if("x"===e.key)ke();else if("y"===e.key)Oe(-1),_e();else if("u"===e.key)Oe(1);else if("p"===e.key)be();else if("h"===e.key||"ArrowLeft"===e.key)N?ye(0,-1):S?ge(-1):n.jumpToFirst();else if("l"===e.key||"ArrowRight"===e.key)N?ye(0,1):S?ge(1):n.jumpToLast();else if("j"===e.key||"ArrowDown"===e.key)N?ye(1,0):S?ge(-1):n.jump(-1);else{if("k"!==e.key&&"ArrowUp"!==e.key)return;N?ye(-1,0):S?ge(1):n.jump(1)}else se();else le()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[N,S,de,be,ke,re,Oe,oe,ie,ue,p,_e,ye,ge,se,le,a,n,X,pe,he,fe,ve]),Object(r.useEffect)((function(){if(X){if(X.includedCells&&X.includedCells.has(q))return;W(null),n.clearHistoryLowerBound()}}),[q]);var Ce=null;if(m){var Ee=new URL(window.location),Ne=n.initialPuzzle,Se=n.stringify();Ee.search="?puzzle="+Se,Ce=c.a.createElement("div",{className:vn.a.QRCode},c.a.createElement(fn.a,{size:256,value:Ee.toString()}),c.a.createElement("p",null,Ne),c.a.createElement("p",null,Se))}return c.a.createElement(c.a.Fragment,null,p&&c.a.createElement(sn,null),c.a.createElement(nn,{show:m,close:function(){return O(!1)}},Ce),c.a.createElement("div",{className:vn.a.Menu},c.a.createElement(b,{onClick:a},"New"),c.a.createElement(b,{onClick:ne},"Start"),c.a.createElement(b,{onClick:ae},"Edit"),c.a.createElement(b,{onClick:o},"Empty"),c.a.createElement(b,{onClick:function(){return O(!0)}},"Share")),c.a.createElement("div",{className:vn.a.Board},c.a.createElement(zt,{isComplete:Z,cells:q,availablePositions:ee,activeVal:S,activePos:N,cellClickedHandler:re,showAvail:T,isNoting:G,marks:me})),c.a.createElement("div",{className:vn.a.Controls},c.a.createElement(Qt,{cellsRecord:Q,hasPrev:n.hasPrev,hasNext:n.hasNext,jump:n.jump,jumpToFirst:n.jumpToFirst,jumpToLast:n.jumpToLast,remainingDigits:te,activeVal:S,availableDigits:$,digitClickedHandler:ie,showAvail:T,isNoting:G,withALS:z,solveHandler:le,resetHandler:se,eraseValueHandler:ue,deselectHandler:oe,toggleShowAvailHandler:fe,toggleIsNotingHandler:he,toggleWithALSHandler:ve,autoNoteHandler:de,autoPlacePointingClaimingHandler:be,tip:X,tipHandler:pe,cancelTipHandler:ke,changeChainStepHandler:Oe,jumpToTrailStartHandler:_e})),c.a.createElement("div",{className:vn.a.Info}))},bn=n(26),pn=n.n(bn),kn=function(e){var t=e.cancelNewGameHandler,n=e.newGameHandler,a=e.error,i=Object(r.useState)(""),o=Object(l.a)(i,2),s=o[0],u=o[1],f=Object(r.useCallback)((function(e){u(e.target.value)}),[]),h=Object(r.useRef)();return Object(r.useEffect)((function(){h.current.focus()}),[]),Object(r.useEffect)((function(){var e=function(e){if("Escape"===e.key)t();else{if("Enter"!==e.key||!e.shiftKey)return;n(s)}e.preventDefault()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[t,n,s]),c.a.createElement("div",{className:pn.a.NewGame},c.a.createElement("h1",null,"input a new puzzle"),a&&c.a.createElement("div",{className:pn.a.Error},a.message),c.a.createElement("textarea",{ref:h,id:"puzzle",name:"puzzle",inputMode:"numeric",onChange:f,value:s,placeholder:"901002708\n570060000\n000000004\n000000000\n700421900\n000098030\n300506070\n009003000\n000080051"}),c.a.createElement(b,{onClick:t},"Cancel"),c.a.createElement(b,{onClick:function(){return n(s)}},"Done"))},yn=n(41),gn=n.n(yn),mn=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useCallback)((function(e){e&&(0===e.length?a("this sudoku has no solution"):e.length>1&&a("this sudoku has multi solutions"))}),[]),o=Object(r.useState)((function(){var e=new URLSearchParams(window.location.search).get("puzzle");try{var t=new Qe(e);return i(t.results),t}catch(n){return console.error(n),new Qe}})),s=Object(l.a)(o,2),u=s[0],f=s[1],h=Object(r.useState)(!1),v=Object(l.a)(h,2),d=v[0],b=v[1],p=Object(r.useState)(null),k=Object(l.a)(p,2),y=k[0],g=k[1],m=Object(r.useCallback)((function(){b(!0)}),[]),O=Object(r.useCallback)((function(){b(!1)}),[]),_=Object(r.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=new Qe(e);t&&i(n.results),f(n),b(!1),g(null)}catch(a){console.error(a),g(a)}}),[i]),j=Object(r.useCallback)((function(){_()}),[_]);Object(r.useEffect)((function(){n&&(alert(n),a(null))}),[n]),Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("debug");we.h(null!==e)}),[]);var w=null;return w=d?c.a.createElement(kn,{cancelNewGameHandler:O,newGameHandler:_,error:y}):c.a.createElement(dn,{sudoku:u,startNewGameHandler:m,newGameHandler:_,emptyHandler:j}),c.a.createElement("div",{className:gn.a.Sudoku},w)};function On(){return c.a.createElement(mn,null)}var _n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function jn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(c.a.createElement(On,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sudoku-tool",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/sudoku-tool","/service-worker.js");_n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):jn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):jn(t,e)}))}}()}],[[43,1,2]]]);
//# sourceMappingURL=main.1bf9dd62.chunk.js.map