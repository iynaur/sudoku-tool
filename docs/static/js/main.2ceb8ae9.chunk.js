(this.webpackJsonpsudoku=this.webpackJsonpsudoku||[]).push([[0],[,,,function(e,t,n){"use strict";(function(e){n.d(t,"g",(function(){return h})),n.d(t,"a",(function(){return k})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return _})),n.d(t,"h",(function(){return j})),n.d(t,"f",(function(){return w}));var a=n(7),r=n(6),c=n.n(r),i=n(2),o=n(1),l=c.a.mark(b),s=c.a.mark(p),u=c.a.mark(g),f=c.a.mark(y),v=!1,d=function(){},h=function(){v=!0};function b(e,t,n){var a,r,s,u,f,v;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!(t<n)){c.next=3;break}c.next=38;break;case 3:if(1!==n){c.next=13;break}a=e;case 5:if(!(a<t+e)){c.next=11;break}return c.next=8,[a];case 8:a++,c.next=5;break;case 11:c.next=38;break;case 13:if(t!==n){c.next=20;break}for(r=[],s=e;s<t+e;s++)r.push(s);return c.next=18,r;case 18:c.next=38;break;case 20:u=Object(o.a)(b(e+1,t-1,n-1)),c.prev=21,u.s();case 23:if((f=u.n()).done){c.next=29;break}return v=f.value,c.next=27,[e].concat(Object(i.a)(v));case 27:c.next=23;break;case 29:c.next=34;break;case 31:c.prev=31,c.t0=c.catch(21),u.e(c.t0);case 34:return c.prev=34,u.f(),c.finish(34);case 37:return c.delegateYield(b(e+1,t-1,n),"t1",38);case 38:case"end":return c.stop()}}),l,null,[[21,31,34,37]])}function p(e,t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(b(0,e,t),"t0",1);case 1:case"end":return n.stop()}}),s)}var k=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ends",i={},l=Object(o.a)(e);try{for(l.s();!(t=l.n()).done;){var s,u=t.value,f=u[n],v=u[(n+1)%2],d=_(i,f,(s={},Object(a.a)(s,r,f),Object(a.a)(s,c,new Set),s));d[c].add(v)}}catch(h){l.e(h)}finally{l.f()}return i};function g(e,t,n){var a,r,l,s,f,v,d=arguments;return c.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(a=d.length>3&&void 0!==d[3]?d[3]:{checkClear:!0},r=Object.values(k(e,n)),l=r.filter((function(e){return e.ends.size<=t})),!(a.checkClear&&r.length<=t)){u.next=5;break}return u.abrupt("return");case 5:s=Object(o.a)(p(l.length,t)),u.prev=6,v=c.a.mark((function e(){var n,s,u,v,d,h,b,p,k,g,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=f.value,s=new Set,u=new Set,v=Object(o.a)(n),e.prev=4,v.s();case 6:if((d=v.n()).done){e.next=15;break}if(h=d.value,b=l[h],s.add(b.start),b.ends.forEach(u.add,u),!(u.size>t)){e.next=13;break}return e.abrupt("break",15);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),v.e(e.t0);case 20:return e.prev=20,v.f(),e.finish(20);case 23:if(u.size!==t){e.next=47;break}if(!(p=a.checkClear)){e.next=44;break}k=Object(o.a)(r.filter((function(e){return!s.has(e.start)}))),e.prev=27,k.s();case 29:if((g=k.n()).done){e.next=36;break}if(y=g.value,!(Object(i.a)(y.ends).filter((function(e){return!u.has(e)})).length<y.ends.size)){e.next=34;break}return p=!1,e.abrupt("break",36);case 34:e.next=29;break;case 36:e.next=41;break;case 38:e.prev=38,e.t1=e.catch(27),k.e(e.t1);case 41:return e.prev=41,k.f(),e.finish(41);case 44:if(p){e.next=47;break}return e.next=47,[s,u];case 47:case"end":return e.stop()}}),e,null,[[4,17,20,23],[27,38,41,44]])})),s.s();case 9:if((f=s.n()).done){u.next=13;break}return u.delegateYield(v(),"t0",11);case 11:u.next=9;break;case 13:u.next=18;break;case 15:u.prev=15,u.t1=u.catch(6),s.e(u.t1);case 18:return u.prev=18,s.f(),u.finish(18);case 21:case"end":return u.stop()}}),u,null,[[6,15,18,21]])}function y(e,t){var n,a,r,i,l,s,u,v,d,h,b;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:n=t+1,a=e.filter((function(e){return e.ends.size<=n})),r=Object(o.a)(p(a.length,t)),c.prev=3,r.s();case 5:if((i=r.n()).done){c.next=34;break}l=i.value,s=new Set,u=new Set,v=Object(o.a)(l),c.prev=10,v.s();case 12:if((d=v.n()).done){c.next=21;break}if(h=d.value,b=a[h],s.add(b.start),b.ends.forEach(u.add,u),!(u.size>n)){c.next=19;break}return c.abrupt("break",21);case 19:c.next=12;break;case 21:c.next=26;break;case 23:c.prev=23,c.t0=c.catch(10),v.e(c.t0);case 26:return c.prev=26,v.f(),c.finish(26);case 29:if(u.size!==n){c.next=32;break}return c.next=32,[s,u];case 32:c.next=5;break;case 34:c.next=39;break;case 36:c.prev=36,c.t1=c.catch(3),r.e(c.t1);case 39:return c.prev=39,r.f(),c.finish(39);case 42:case"end":return c.stop()}}),f,null,[[3,36,39,42],[10,23,26,29]])}var m=(window||e||{}).console||{},O={enabled:!0,ifEnabled:function(e,t){return this.enabled&&e||t},get group(){return this.ifEnabled(v&&m.group,d)},get groupEnd(){return this.ifEnabled(v&&m.groupEnd,d)},get log(){return this.ifEnabled(v&&m.log,d)},get error(){return this.ifEnabled(v&&m.error,d)}},_=function(e,t,n){return e.hasOwnProperty(t)||(e[t]=n),e[t]};function j(e){for(var t=Object(i.a)(e),n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),r=[t[a],t[n]];t[n]=r[0],t[a]=r[1]}return t}function w(e,t){var n,a=new Set,r=Object(o.a)(t);try{for(r.s();!(n=r.n()).done;){var c=n.value;e.has(c)&&a.add(c)}}catch(i){r.e(i)}finally{r.f()}return a}}).call(this,n(50))},,,,,function(e,t,n){e.exports={Value:"Cell_Value__1lDbW",Notes:"Cell_Notes__10ap7",Related:"Cell_Related__ET6Lg",Available:"Cell_Available__3vvqK",Place:"Cell_Place__3TPHN",Note:"Cell_Note__2U2fC",MarkedDomain:"Cell_MarkedDomain__31hFJ",MarkedEffect:"Cell_MarkedEffect___usON",MarkedHighlight:"Cell_MarkedHighlight__2O1xC",WithoutOutline:"Cell_WithoutOutline__35g8t",ActiveValue:"Cell_ActiveValue__3McOV",Placed:"Cell_Placed__3HOvj",Selected:"Cell_Selected__2LsAU",MarkedValue:"Cell_MarkedValue__dMEee",MarkedNoteValue:"Cell_MarkedNoteValue__24o3W",Effected:"Cell_Effected__HnLYk",RowNotes:"Cell_RowNotes__1QNhn",PlacedValue:"Cell_PlacedValue__2vP-2"}},function(e,t,n){e.exports={Zero:"Digits_Zero__2W6xd",One:"Digits_One__-wXsd",Two:"Digits_Two__5WRCG",Three:"Digits_Three__1GKk-",Four:"Digits_Four__1ahFU",Five:"Digits_Five__3m1dx",Six:"Digits_Six__kvriF",Seven:"Digits_Seven__2_nmU",Eight:"Digits_Eight__GNMw3",Nine:"Digits_Nine__3u9wd"}},,,function(e,t,n){e.exports={Controls:"Controls_Controls__1Accx",History:"Controls_History__2GRXF",Panel:"Controls_Panel__1AK4m",Tools:"Controls_Tools__1-fbY",Tip:"Controls_Tip__2IHiE",ChainSteper:"Controls_ChainSteper__RRrIh"}},function(e,t,n){e.exports={Digits:"Digits_Digits__3-KZF",Digit:"Digits_Digit__1MXW9",digit:"Digits_digit__3Mpxe",Disabled:"Digits_Disabled__1N4Jw",active:"Digits_active__2AexO",Count:"Digits_Count__Eq4Q5",isNoting:"Digits_isNoting__-OBTK"}},,function(e,t,n){e.exports={Menu:"Main_Menu__3YGZL",Board:"Main_Board__3XJet",Controls:"Main_Controls__1MSdo",Info:"Main_Info__2888w",QRCode:"Main_QRCode__1jj5B"}},,,,,function(e,t,n){e.exports={Block:"Block_Block__1kJyh",Odd:"Block_Odd__2xFZf",Row:"Block_Row__11Olq"}},function(e,t,n){e.exports={SudokuBoard:"Board_SudokuBoard__3cPYp",Row:"Board_Row__2r5V5",Complete:"Board_Complete__UekFD",SudokuComplete:"Board_SudokuComplete__13blN"}},function(e,t,n){e.exports={Modal:"Modal_Modal__31OI7",Show:"Modal_Show__d05bc",Close:"Modal_Close__IQjCe"}},function(e,t,n){e.exports={Button:"Button_Button__2Ajf-",Warn:"Button_Warn__1cddQ",On:"Button_On__3d77T",Off:"Button_Off__R9f9J"}},,function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__Vem4f",Absolute:"Backdrop_Absolute__Z8lxG"}},function(e,t,n){e.exports={NewGame:"NewGame_NewGame__2hKIv",Error:"NewGame_Error__mao55"}},,,,,,,,,,,function(e,t,n){e.exports={Pointer:"Arrow_Pointer__1rYd7"}},function(e,t,n){e.exports={Spinner:"Loading_Spinner__1CFco"}},function(e,t,n){e.exports={Loader:"Spinner_Loader__1twK-",load2:"Spinner_load2__2gkgc"}},,function(e,t,n){e.exports={Sudoku:"Sudoku_Sudoku__3acWS"}},,function(e,t,n){e.exports=n(61)},,,,,function(e,t,n){},,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getDigitLocalPos",(function(){return H})),n.d(a,"blockShape",(function(){return D})),n.d(a,"indices",(function(){return R})),n.d(a,"blocks",(function(){return z})),n.d(a,"rows",(function(){return V})),n.d(a,"cols",(function(){return B})),n.d(a,"rowColToBlock",(function(){return U})),n.d(a,"blockRowColIndex",(function(){return X})),n.d(a,"blockRows",(function(){return W})),n.d(a,"blockCols",(function(){return F})),n.d(a,"newCells",(function(){return K})),n.d(a,"copyCells",(function(){return Y})),n.d(a,"rowPositions",(function(){return Q})),n.d(a,"colPositions",(function(){return $})),n.d(a,"getPosition",(function(){return ce})),n.d(a,"getPosBlock",(function(){return ie})),n.d(a,"getBlockPositions",(function(){return oe})),n.d(a,"getBlockFlattenPositions",(function(){return le})),n.d(a,"getRowPositions",(function(){return se})),n.d(a,"getColPositions",(function(){return ue})),n.d(a,"getRelatedBlockPositions",(function(){return fe})),n.d(a,"getRelatedRowPositions",(function(){return ve})),n.d(a,"getRelatedColPositions",(function(){return de})),n.d(a,"getRelatedPositions",(function(){return he})),n.d(a,"flattenPositions",(function(){return be})),n.d(a,"getPositionByKey",(function(){return ke})),n.d(a,"mapPositionsTo",(function(){return ge})),n.d(a,"getCell",(function(){return ye})),n.d(a,"getCommonRelatedPositions",(function(){return Oe})),n.d(a,"findClosedPosPair",(function(){return je}));var r=n(0),c=n.n(r),i=n(33),o=n.n(i),l=(n(48),n(4)),s=n(7),u=n(1),f=n(5),v=n(2),d=n(23),h=n.n(d),b=function(e){var t=e.type,n=e.onClick,a=e.disabled,r=void 0!==a&&a,i=e.children,o=[h.a.Button];return t&&o.push(h.a[t]),c.a.createElement("button",{className:o.join(" "),disabled:r,onClick:n},i)},p=n(8),k=n.n(p),g=n(9),y=n.n(g),m=function(e){return function(t){var n,a=t.color,r=t.digitClassName,i=void 0===r?"digit":r,o=t.className,l=void 0===o?"":o,s=t.children;return c.a.createElement("div",{className:"".concat(e," ").concat(i," ").concat(l),style:(n=a,n?{backgroundColor:n}:{})},s)}},O=m(y.a.Zero),_=m(y.a.One),j=m(y.a.Two),w=m(y.a.Three),C=m(y.a.Four),x=m(y.a.Five),E=m(y.a.Six),N=m(y.a.Seven),S=m(y.a.Eight),A=m(y.a.Nine),P=[c.a.createElement(O,null),c.a.createElement(_,null),c.a.createElement(j,null),c.a.createElement(w,null),c.a.createElement(C,null),c.a.createElement(x,null),c.a.createElement(E,null),c.a.createElement(N,null),c.a.createElement(S,null),c.a.createElement(A,null)],T=n(6),L=n.n(T),I=n(17),G=n(18),H=function(e){return[Math.floor((e-1)/3),(e-1)%3]},M=[0,1,2,3,4,5,6,7,8],D=[[0,1,2],[3,4,5],[6,7,8]],R=M,z=M,V=M,B=M,U=function(e,t){return 3*Math.floor(e/3)+Math.floor(t/3)},X=function(e,t){return e%3*3+t%3},W=function(e){var t=3*Math.floor(e/3);return[t,t+1,t+2]},F=function(e){var t=e%3*3;return[t,t+1,t+2]},K=function(e){return V.map((function(t){return B.map((function(n){return e&&e(t,n)}))}))},Y=function(e){var t,n=Object(v.a)(e),a=Object(u.a)(V);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r]=Object(v.a)(n[r].map((function(e){return Object(f.a)({},e)})))}}catch(c){a.e(c)}finally{a.f()}return n},J=M.map((function(e){return M.map((function(t){return{key:"r".concat(e,"c").concat(t),toString:function(){return this.key},idx:9*e+t,row:e,col:t,block:U(e,t)}}))})),Q=J,Z=M.map((function(e){return M.map((function(t){return J[e].filter((function(e){return e.col!==t}))}))})),q=M.map((function(e){return M.map((function(t){return J[t][e]}))})),$=q,ee=M.map((function(e){return M.map((function(t){return q[e].filter((function(e){return e.row!==t}))}))})),te=M.map((function(e){return W(e).map((function(t){return J[t].filter((function(t){return t.block===e}))}))})),ne=M.map((function(e){var t=te[e];return[].concat(Object(v.a)(t[0]),Object(v.a)(t[1]),Object(v.a)(t[2]))})),ae=M.map((function(e){return M.map((function(t){return ne[e].filter((function(e,n){return n!==t}))}))})),re=M.map((function(e){return M.map((function(t){var n=U(e,t),a=[];return J.forEach((function(r){return r.forEach((function(r){var c=r.row,i=r.col,o=r.block;e===c&&t===i&&n===o||e!==c&&t!==i&&n!==o||a.push(r)}))})),a}))})),ce=function(e,t){return J[e][t]},ie=function(e,t){return J[e][t].block},oe=function(e){return te[e]},le=function(e){return ne[e]},se=function(e){return J[e]},ue=function(e){return q[e]},fe=function(e){var t=e.row,n=e.col,a=e.block;return ae[void 0===a?U(t,n):a][X(t,n)]},ve=function(e){var t=e.row,n=e.col;return Z[t][n]},de=function(e){var t=e.row,n=e.col;return ee[n][t]},he=function(e){var t=e.row,n=e.col;return re[t][n]},be=J.flat(),pe={};be.forEach((function(e){pe[e.key]=e}));var ke=function(e){return pe[e]},ge=function(e){return M.map((function(t){return M.map((function(n){return e(t,n)}))}))},ye=function(e,t){return e[t.row][t.col]},me=function(e,t){var n=new Set(t);return e.filter((function(e){return n.has(e)}))},Oe=function e(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];switch(n.length){case 0:return[];case 1:return he(n[0]);default:var r=n[0],c=n.slice(1);return me(he(r),e.apply(void 0,Object(v.a)(c)))}},_e=function(e,t){var n=e.row-t.row,a=e.col-t.col;return n*n+a*a},je=function(e,t){if(1===e.length&&1===t)return[e[0],t[0]];var n,a=Number.MAX_VALUE,r=null,c=null,i=Object(u.a)(e);try{for(i.s();!(n=i.n()).done;){var o,l=n.value,s=Object(u.a)(t);try{for(s.s();!(o=s.n()).done;){var f=o.value,v=_e(l,f);v<a&&(a=v,r=l,c=f)}}catch(d){s.e(d)}finally{s.f()}}}catch(d){i.e(d)}finally{i.f()}return[r,c]},we=n(3),Ce=[1,2,3,4,5,6,7,8,9],xe=function(){function e(){Object(I.a)(this,e)}return Object(G.a)(e,null,[{key:"new",value:function(){for(var t=e._base,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];for(var c=0,i=a;c<i.length;c++){var o=i[c];t|=1<<o}return t}},{key:"isEmpty",value:function(e){return e===this._base}},{key:"size",value:function(e){for(var t=0,n=1;n<=9;n++)1===(1&(e>>=1))&&t++;return t}},{key:"first",value:function(t){for(var n=1;n<=9;n++)if(e.has(t,n))return n}},{key:"entries",value:function(t){for(var n=[],a=1;a<=9;a++)e.has(t,a)&&n.push(a);return n}},{key:"is",value:function(e){return 0!==(e&this._base)}},{key:"has",value:function(t,n){return e.is(t)&&0!==(t&1<<n)}},{key:"add",value:function(e,t){return e|1<<t}},{key:"delete",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];for(var r=0,c=n;r<c.length;r++){var i=c[r];e&=~(1<<i)}return e}}]),e}();xe._base=65536;var Ee=L.a.mark(Pe),Ne=L.a.mark(Me),Se=function(e){for(var t={},n=function(){var n=r[a],c=new Set;e.forEach((function(e){return c.add(e[n])})),1===c.size&&(t[n]=Object(v.a)(c)[0])},a=0,r=["row","col","block"];a<r.length;a++)n();return t};function Ae(e,t){var n,a=[],r=Object(u.a)(t);try{for(r.s();!(n=r.n()).done;){var c=n.value,i=ye(e,c).value;if(xe.is(i)){var o,l=Object(u.a)(xe.entries(i));try{for(l.s();!(o=l.n()).done;){var s=o.value;a.push([c,s])}}catch(f){l.e(f)}finally{l.f()}}}}catch(f){r.e(f)}finally{r.f()}return a}function Pe(e,t,n){var a,r,c,i,o,f,v,d,h,b,p,k,g,y;return L.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:a=0,r=[["row",se],["col",ue],["block",le]];case 1:if(!(a<r.length)){m.next=41;break}c=Object(l.a)(r[a],2),i=c[0],o=c[1],f=Object(u.a)(R),m.prev=4,f.s();case 6:if((v=f.n()).done){m.next=30;break}d=v.value,h=Ae(e,o(d)),b=Object(u.a)(Object(we.d)(h,t,n,{checkClear:t>1})),m.prev=10,b.s();case 12:if((p=b.n()).done){m.next=20;break}return k=p.value,g=k[n],y=k[(n+1)%2],m.next=18,{type:"group",cls:n,n:t,domains:0===n?Se(g):Object(s.a)({},i,d),poses:g,notes:y,name:["naked","hidden"][n]+"-".concat(t,"-group")};case 18:m.next=12;break;case 20:m.next=25;break;case 22:m.prev=22,m.t0=m.catch(10),b.e(m.t0);case 25:return m.prev=25,b.f(),m.finish(25);case 28:m.next=6;break;case 30:m.next=35;break;case 32:m.prev=32,m.t1=m.catch(4),f.e(m.t1);case 35:return m.prev=35,f.f(),m.finish(35);case 38:a++,m.next=1;break;case 41:case"end":return m.stop()}}),Ee,null,[[4,32,35,38],[10,22,25,28]])}var Te=function(e,t){return function(n,a){for(var r=[],c=0;c<9;c++){var i,o=Object(u.a)(e(c));try{for(o.s();!(i=o.n()).done;){var l=i.value,s=n[l.row][l.col].value;xe.is(s)&&(xe.has(s,a)&&r.push([c,t(l)]))}}catch(f){o.e(f)}finally{o.f()}}return r}},Le=Te(se,(function(e){return e.col})),Ie=Te(se,(function(e){return U(e.row,e.col)})),Ge=Te(ue,(function(e){return U(e.row,e.col)})),He=function(e,t,n){var a,r=[],c=Object(u.a)(n);try{for(c.s();!(a=c.n()).done;){var i=a.value,o=e[i.row][i.col].value;xe.is(o)&&xe.has(o,t)&&r.push(i)}}catch(l){c.e(l)}finally{c.f()}return r};function Me(e,t){var n,a,r,c,i,o,s,f,d,h,b,p,k,g,y,m,O,_,j,w,C,x,E,N,S,A,P,T,I,G,H,M,D,R,z,V,B,U,X,W,F,K,Y,J,Q,Z,q,$,ee,te,ne,ae,re,ce,ie,oe,fe,ve,de,he,be,pe,ke,ge,ye,me,Oe,_e,je,Ce,xe,Ee,Se,Ae,Pe=arguments;return L.a.wrap((function(L){for(;;)switch(L.prev=L.next){case 0:n=Pe.length>2&&void 0!==Pe[2]?Pe[2]:{rc:!0,cr:!0,rb:!0,br:!0,cb:!0,bc:!0},a=1;case 2:if(!(a<=9)){L.next=152;break}if(!n.rc&&!n.cr){L.next=53;break}if(r=Le(e,a),!n.rc){L.next=29;break}c=Object(u.a)(Object(we.d)(r,t,0)),L.prev=7,c.s();case 9:if((i=c.n()).done){L.next=21;break}o=i.value,s=Object(l.a)(o,2),f=s[0],d=s[1],h=[],b=!0,p=Object(u.a)(f);try{for(p.s();!(k=p.n()).done;)g=k.value,(y=He(e,a,se(g))).length!==t&&(b=!1),h.push.apply(h,Object(v.a)(y))}catch(Ne){p.e(Ne)}finally{p.f()}return m="".concat(t,b?"-X-Wing":"-XRC-Group"),L.next=19,{name:m,domain:"row",effect:"col",rows:f,cols:d,poses:new Set(h),d:a};case 19:L.next=9;break;case 21:L.next=26;break;case 23:L.prev=23,L.t0=L.catch(7),c.e(L.t0);case 26:return L.prev=26,c.f(),L.finish(26);case 29:if(!n.cr){L.next=53;break}O=Object(u.a)(Object(we.d)(r,t,1)),L.prev=31,O.s();case 33:if((_=O.n()).done){L.next=45;break}j=_.value,w=Object(l.a)(j,2),C=w[0],x=w[1],E=[],N=!0,S=Object(u.a)(C);try{for(S.s();!(A=S.n()).done;)P=A.value,He(e,a,ue(P)).length!==t&&(N=!1),E.push.apply(E,Object(v.a)(He(e,a,ue(P))))}catch(Ne){S.e(Ne)}finally{S.f()}return T="".concat(t,N?"-X-Wing":"-XCR-Group"),L.next=43,{name:T,domain:"col",effect:"row",rows:x,cols:C,poses:new Set(E),d:a};case 43:L.next=33;break;case 45:L.next=50;break;case 47:L.prev=47,L.t1=L.catch(31),O.e(L.t1);case 50:return L.prev=50,O.f(),L.finish(50);case 53:if(!n.rb&&!n.br){L.next=101;break}if(I=Ie(e,a),!n.rb){L.next=78;break}G=Object(u.a)(Object(we.d)(I,t,0)),L.prev=57,G.s();case 59:if((H=G.n()).done){L.next=70;break}M=H.value,D=Object(l.a)(M,2),R=D[0],z=D[1],V=[],B=Object(u.a)(R);try{for(B.s();!(U=B.n()).done;)X=U.value,V.push.apply(V,Object(v.a)(He(e,a,se(X))))}catch(Ne){B.e(Ne)}finally{B.f()}return W=1===t?"claiming":"".concat(t,"-XRB-Group"),L.next=68,{name:W,domain:"row",effect:"block",rows:R,blocks:z,poses:new Set(V),d:a};case 68:L.next=59;break;case 70:L.next=75;break;case 72:L.prev=72,L.t2=L.catch(57),G.e(L.t2);case 75:return L.prev=75,G.f(),L.finish(75);case 78:if(!n.br){L.next=101;break}F=Object(u.a)(Object(we.d)(I,t,1)),L.prev=80,F.s();case 82:if((K=F.n()).done){L.next=93;break}Y=K.value,J=Object(l.a)(Y,2),Q=J[0],Z=J[1],q=[],$=Object(u.a)(Q);try{for($.s();!(ee=$.n()).done;)te=ee.value,q.push.apply(q,Object(v.a)(He(e,a,le(te))))}catch(Ne){$.e(Ne)}finally{$.f()}return ne=1===t?"pointing":"".concat(t,"-XBR-Group"),L.next=91,{name:ne,domain:"block",effect:"row",rows:Z,blocks:Q,poses:new Set(q),d:a};case 91:L.next=82;break;case 93:L.next=98;break;case 95:L.prev=95,L.t3=L.catch(80),F.e(L.t3);case 98:return L.prev=98,F.f(),L.finish(98);case 101:if(!n.cb&&!n.bc){L.next=149;break}if(ae=Ge(e,a),!n.cb){L.next=126;break}re=Object(u.a)(Object(we.d)(ae,t,0)),L.prev=105,re.s();case 107:if((ce=re.n()).done){L.next=118;break}ie=ce.value,oe=Object(l.a)(ie,2),fe=oe[0],ve=oe[1],de=[],he=Object(u.a)(fe);try{for(he.s();!(be=he.n()).done;)pe=be.value,de.push.apply(de,Object(v.a)(He(e,a,ue(pe))))}catch(Ne){he.e(Ne)}finally{he.f()}return ke=1===t?"claiming":"".concat(t,"-XCB-Group"),L.next=116,{name:ke,domain:"col",effect:"block",cols:fe,blocks:ve,poses:new Set(de),d:a};case 116:L.next=107;break;case 118:L.next=123;break;case 120:L.prev=120,L.t4=L.catch(105),re.e(L.t4);case 123:return L.prev=123,re.f(),L.finish(123);case 126:if(!n.bc){L.next=149;break}ge=Object(u.a)(Object(we.d)(ae,t,1)),L.prev=128,ge.s();case 130:if((ye=ge.n()).done){L.next=141;break}me=ye.value,Oe=Object(l.a)(me,2),_e=Oe[0],je=Oe[1],Ce=[],xe=Object(u.a)(_e);try{for(xe.s();!(Ee=xe.n()).done;)Se=Ee.value,Ce.push.apply(Ce,Object(v.a)(He(e,a,le(Se))))}catch(Ne){xe.e(Ne)}finally{xe.f()}return Ae=1===t?"pointing":"".concat(t,"-XBC-Group"),L.next=139,{name:Ae,domain:"block",effect:"col",cols:je,blocks:_e,poses:new Set(Ce),d:a};case 139:L.next=130;break;case 141:L.next=146;break;case 143:L.prev=143,L.t5=L.catch(128),ge.e(L.t5);case 146:return L.prev=146,ge.f(),L.finish(146);case 149:a++,L.next=2;break;case 152:case"end":return L.stop()}}),Ne,null,[[7,23,26,29],[31,47,50,53],[57,72,75,78],[80,95,98,101],[105,120,123,126],[128,143,146,149]])}var De=L.a.mark(ze),Re=xe.new.apply(xe,Object(v.a)(Ce));function ze(e,t){var n,a,r,c,i,o,s,f;return L.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(t&&t.search++,!Ve(e)){v.next=5;break}return v.next=4,e;case 4:return v.abrupt("return");case 5:n=Be(e),a=Object(l.a)(n,2),r=a[0],c=a[1],i=Object(u.a)(c),v.prev=7,i.s();case 9:if((o=i.n()).done){v.next=17;break}if(s=o.value,f=Y(e),Ue(f,r,s,t)&&We(f,t)){v.next=14;break}return v.abrupt("continue",15);case 14:return v.delegateYield(ze(f,t),"t0",15);case 15:v.next=9;break;case 17:v.next=22;break;case 19:v.prev=19,v.t1=v.catch(7),i.e(v.t1);case 22:return v.prev=22,i.f(),v.finish(22);case 25:case"end":return v.stop()}}),De,null,[[7,19,22,25]])}var Ve=function(e){var t,n=Object(u.a)(be);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=ye(e,a).value;if(xe.is(r))return!1}}catch(c){n.e(c)}finally{n.f()}return!0},Be=function(e){var t,n,a,r=10,c=Object(u.a)(be);try{for(c.s();!(a=c.n()).done;){var i=a.value,o=ye(e,i).value;if(xe.is(o)){var l=xe.entries(o);l.length<r&&(t=i,n=l,r=l.length)}}}catch(s){c.e(s)}finally{c.f()}return[t,n]},Ue=function(e,t,n,a){a&&a.setCellValue++;var r=ye(e,t).value;return!!xe.has(r,n)&&(e[t.row][t.col].value=n,Xe(e,he(t),n,a))},Xe=function(e,t,n,a){a&&a.basicEliminate++;var r,c=Object(u.a)(t);try{for(c.s();!(r=c.n()).done;){var i=r.value,o=ye(e,i).value;if(xe.has(o,n)){var l=xe.delete(o,n);if(xe.isEmpty(l))return!1;e[i.row][i.col].value=l}}}catch(s){c.e(s)}finally{c.f()}return!0},We=function(e,t){var n;t&&t.eliminate++;do{n=!1;for(var a=0,r=[0,1];a<r.length;a++){var c,i=r[a],o=Object(u.a)(Pe(e,1,i));try{for(o.s();!(c=o.n()).done;){var l=c.value,s=Object(v.a)(l.poses)[0],f=Object(v.a)(l.notes)[0];if(!Ue(e,s,f,t))return!1;n=!0}}catch(d){o.e(d)}finally{o.f()}}}while(n);return!0},Fe=L.a.mark($e),Ke=L.a.mark(tt),Ye=L.a.mark(nt),Je=L.a.mark(at),Qe=function(){function e(t){var n=this;Object(I.a)(this,e),this.jumpTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e<n._historyLowerBound||(n._curCellsIdx=e,n._curCellsIdx<0?n._curCellsIdx=0:n._curCellsIdx>=n._cellsHistory.length&&(n._curCellsIdx=n._cellsHistory.length-1),t&&n._cut(),n._rollback(),n._notify())},this.revertTo=function(e){n.jumpTo(e,!0)},this.jump=function(e){n.jumpTo(n.curIdx+e)},this.jumpToFirst=function(){n.jumpTo(0)},this.jumpToLast=function(){n.jumpTo(n.lastIdx)},this.getCurCells=function(){return n._txCells?n._txCells:n.cells},this.getCell=function(e){var t=e.row,a=e.col;return n.getCurCells()[t][a]},this._setCellValue=function(e,t){n._startTx(),n._txSetCellValue(e,t)},this._shouldNotify=!0,this.subscribers=[],this._setPuzzle(t||e.defaultPuzzle)}return Object(G.a)(e,[{key:"_setPuzzle",value:function(t){this._cellsHistory=[],this._curCellsIdx=-1,this._txCells=null,this._historyLowerBound=0;var n=e.parse(t);t!==e.defaultPuzzle&&(this._results=function(e){var t,n=K((function(){return{value:Re}})),a=Object(u.a)(be);try{for(a.s();!(t=a.n()).done;){var r=t.value,c=ye(e,r);if(!xe.is(c.value)&&(n[r.row][r.col].origin=c.origin,!Ue(n,r,c.value)))return[]}}catch(b){a.e(b)}finally{a.f()}var i,o=new Date,l={search:0,setCellValue:0,basicEliminate:0,eliminate:0},s=[],f=Object(u.a)(ze(n,l));try{for(f.s();!(i=f.n()).done;){var v=i.value,d=new Date;if(we.b.log("#".concat(s.length,">puzzle solving time: ").concat(d-o,"ms, ").concat(JSON.stringify(l))),s.push(v),s.length>1)break}}catch(b){f.e(b)}finally{f.f()}var h=new Date;return we.b.log("puzzle solving final time: ".concat(h-o,"ms, ").concat(JSON.stringify(l))),s}(n)),this._setCells(n,"init"),this.puzzle=this.stringify(),this._notify()}},{key:"solve",value:function(){this._results&&this._results.length>0&&(this._setCells(this._results[0],"solve"),this._notify())}},{key:"setHistoryLowerBound",value:function(e){this._historyLowerBound=e}},{key:"clearHistoryLowerBound",value:function(){this._historyLowerBound=0}},{key:"_cut",value:function(){this._curCellsIdx+1<this._cellsHistory.length&&(this._cellsHistory=this._cellsHistory.slice(0,this._curCellsIdx+1))}},{key:"_setCells",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._cut(),this._curCellsIdx++,this._cellsHistory.push({idx:this._curCellsIdx,cells:e,action:t,payload:n,get desc(){return"[".concat(t,"] ").concat(n.name||"")}})}},{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"_disableNotify",value:function(){this._shouldNotify=!1}},{key:"_enableNotify",value:function(){this._shouldNotify=!0}},{key:"_notify",value:function(){if(this._shouldNotify){this._checkComplete();var e,t=Object(u.a)(this.subscribers);try{for(t.s();!(e=t.n()).done;){(0,e.value)((function(e){return e+1}))}}catch(n){t.e(n)}finally{t.f()}}}},{key:"stringify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(f.a)({placedAsOrigin:!1,withNotes:!0,originAsPlaced:!1},t),e=e||this.cells;var n,a=[],r=Object(u.a)(be);try{for(r.s();!(n=r.n()).done;){var c=n.value,i=e[c.row][c.col],o=i.origin,l=i.value;if(xe.is(l)){if(!t.withNotes){a.push("0");continue}xe.isEmpty(l)?a.push("0"):a.push.apply(a,["n"].concat(Object(v.a)(xe.entries(l)),["N"]))}else!t.placedAsOrigin&&!o||t.originAsPlaced?a.push("p",l):a.push(l)}}catch(s){r.e(s)}finally{r.f()}return a.join("")}},{key:"calcAvailableDigits",value:function(e){var t=new Set([1,2,3,4,5,6,7,8,9]);if(!e)return t;if(this.getCell(e).origin)return new Set;var n,a=Object(u.a)(he(e));try{for(a.s();!(n=a.n()).done;){var r=n.value,c=this.getCell(r).value;xe.is(c)||t.delete(c)}}catch(i){a.e(i)}finally{a.f()}return t}},{key:"calcRemainingDigits",value:function(){var e,t={1:9,2:9,3:9,4:9,5:9,6:9,7:9,8:9,9:9},n=Object(u.a)(be);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=this.getCell(a).value;xe.is(r)||t[r]--}}catch(c){n.e(c)}finally{n.f()}return t}},{key:"calcAvailablePositions",value:function(e){if(!(e>=1&&e<=9))return null;var t,n=ge((function(){return!0})),a=Object(u.a)(be);try{for(a.s();!(t=a.n()).done;){var r=t.value,c=this.getCell(r).value;if(!xe.is(c)&&(n[r.row][r.col]=!1,c===e)){var i,o=Object(u.a)(he(r));try{for(o.s();!(i=o.n()).done;){var l=i.value,s=l.row,f=l.col;n[s][f]=!1}}catch(v){o.e(v)}finally{o.f()}}}}catch(v){a.e(v)}finally{a.f()}return n}},{key:"_txSetCellValue",value:function(e,t){var n=e.row,a=e.col;if(t!==this.getCell(e).value){var r=this.getCurCells();if(this._txCells===r&&(this._txCells=Object(v.a)(r)),this._txCells[n]===r[n]&&(this._txCells[n]=Object(v.a)(r[n])),this._txCells[n][a]===r[n][a]&&(this._txCells[n][a]=Object(f.a)({},r[n][a])),this._txCells[n][a].value=t,!xe.is(t)){var c,i=Object(u.a)(he(e));try{for(i.s();!(c=i.n()).done;){var o=c.value,l=this.getCell(o);xe.is(l.value)&&this._txSetCellValue(o,xe.delete(l.value,t))}}catch(s){i.e(s)}finally{i.f()}}}}},{key:"_startTx",value:function(){this._txCells||(this._txCells=this.getCurCells())}},{key:"_commit",value:function(e,t){this._txCells&&this._txCells!==this.cells&&(this._setCells(this._txCells,e,t),this._txCells=null,this._notify())}},{key:"_rollback",value:function(){this._txCells=null}},{key:"_handlActions",value:function(t,n){switch(t){case e.actions.RESET:this._setPuzzle(this.puzzle);break;case e.actions.NOTE:this._note(n);break;case e.actions.AUTO_NOTE:this._autoNote();break;case e.actions.AUTO_PLACE:this._autoPlace();break;case e.actions.AUTO_POINTING:this._autoPointing();break;case e.actions.AUTO_CLAIMING:this._autoClaiming();break;case e.actions.AUTO_PLACE_POINTING_CLAIMING:this._autoPlacePointingClaiming();break;case e.actions.UPDATE_CELL_VALUE:this._updateCellValue(n);break;case e.actions.ELIMINATE_GROUP:!function(e,t,n){if(1===e.n)n(Object(v.a)(e.poses)[0],Object(v.a)(e.notes)[0]);else if(0===e.cls){var a,r=e.domains,c=r.row,i=r.col,o=r.block,l=[].concat(Object(v.a)(se(c)||[]),Object(v.a)(ue(i)||[]),Object(v.a)(le(o)||[])),s=Object(u.a)(l);try{for(s.s();!(a=s.n()).done;){var f=a.value,d=t(f).value;xe.is(d)&&!e.poses.has(f)&&n(f,xe.delete.apply(xe,[d].concat(Object(v.a)(e.notes))))}}catch(g){s.e(g)}finally{s.f()}}else if(1===e.cls){var h,b=Object(u.a)(e.poses);try{for(b.s();!(h=b.n()).done;){var p=h.value,k=t(p).value;n(p,xe.new.apply(xe,Object(v.a)(xe.entries(k).filter((function(t){return e.notes.has(t)})))))}}catch(g){b.e(g)}finally{b.f()}}}(n,this.getCell,this._setCellValue);break;case e.actions.ELIMINATE_XGROUP:!function(e,t,n){var a=[];if("row"===e.effect){var r,c=Object(u.a)(e.rows);try{for(c.s();!(r=c.n()).done;){var i=r.value;a.push.apply(a,Object(v.a)(se(i)))}}catch(y){c.e(y)}finally{c.f()}}else if("col"===e.effect){var o,l=Object(u.a)(e.cols);try{for(l.s();!(o=l.n()).done;){var s=o.value;a.push.apply(a,Object(v.a)(ue(s)))}}catch(y){l.e(y)}finally{l.f()}}else if("block"===e.effect){var f,d=Object(u.a)(e.blocks);try{for(d.s();!(f=d.n()).done;){var h=f.value;a.push.apply(a,Object(v.a)(le(h)))}}catch(y){d.e(y)}finally{d.f()}}for(var b=0,p=a;b<p.length;b++){var k=p[b],g=t(k).value;xe.is(g)&&!e.poses.has(k)&&n(k,xe.delete(g,e.d))}}(n,this.getCell,this._setCellValue);break;case e.actions.ELIMINATE_CHAIN:this._eliminateChain(n);break;case e.actions.ELIMINATE_TRIAL_ERROR:this._eliminateTrialError(n);break;case e.actions.HANDLE_TIP:this._handleTip(n)}}},{key:"dispatch",value:function(e,t,n){(n=Object(f.a)({commit:!0,log:!0},n||{})).log&&(we.b.group("[".concat(e,"]")),t&&we.b.log("->payload:",t),n&&we.b.log("->options:",n)),this._startTx(),this._handlActions(e,t),n.log&&we.b.groupEnd(),n.commit&&this._commit(e,t)}},{key:"reset",value:function(){this.dispatch(e.actions.RESET)}},{key:"note",value:function(t){this.dispatch(e.actions.NOTE,t)}},{key:"updateCellValue",value:function(t,n,a,r){this.dispatch(e.actions.UPDATE_CELL_VALUE,{isNoting:t,pos:n,value:a,name:"".concat(r||(t?"note":"place")," ").concat(a,"@").concat(n)})}},{key:"autoNote",value:function(){this.dispatch(e.actions.AUTO_NOTE)}},{key:"autoPlacePointingClaiming",value:function(){this.dispatch(e.actions.AUTO_PLACE_POINTING_CLAIMING)}},{key:"autoPlace",value:function(){this.dispatch(e.actions.AUTO_PLACE)}},{key:"autoPointing",value:function(){this.dispatch(e.actions.AUTO_POINTING)}},{key:"autoClaiming",value:function(){this.dispatch(e.actions.AUTO_CLAIMING)}},{key:"eliminateGroup",value:function(t){this.dispatch(e.actions.ELIMINATE_GROUP,t)}},{key:"eliminateXGroup",value:function(t){this.dispatch(e.actions.ELIMINATE_XGROUP,t)}},{key:"eliminateChain",value:function(t){this.dispatch(e.actions.ELIMINATE_CHAIN,t)}},{key:"eliminateTrialError",value:function(t){this.dispatch(e.actions.ELIMINATE_TRIAL_ERROR,t)}},{key:"handleTip",value:function(t){this.dispatch(e.actions.HANDLE_TIP,t)}},{key:"_checkValidity",value:function(){for(var e=this,t=0,n=[["row",se],["col",ue],["block",le]];t<n.length;t++){var a,r=Object(l.a)(n[t],2),c=r[0],i=r[1],o=Object(u.a)(R);try{var f=function(){var t,n,r=a.value,o=new Set(Ce),l=Object(u.a)(i(r));try{for(l.s();!(t=l.n()).done;){var f=t.value,v=e.getCell(f).value;if("row"===c&&xe.isEmpty(v))return{v:{domain:"cell",cell:f,digits:new Set}};xe.is(v)?xe.entries(v).forEach((function(e){return o.delete(e)})):o.delete(v)}}catch(d){l.e(d)}finally{l.f()}if(0!==o.size)return{v:(n={domain:c},Object(s.a)(n,c,r),Object(s.a)(n,"digits",o),n)}};for(o.s();!(a=o.n()).done;){var v=f();if("object"===typeof v)return v.v}}catch(d){o.e(d)}finally{o.f()}}}},{key:"_checkComplete",value:function(){var e,t=Object(u.a)(be);try{for(t.s();!(e=t.n()).done;){var n=e.value,a=this.getCell(n).value;if(xe.is(a))return this._isComplete=!1,!1}}catch(r){t.e(r)}finally{t.f()}return this._isComplete=!0,!0}},{key:"_note",value:function(e){var t=this.getCell(e).value;xe.is(t)&&(xe.size(t)>0||this._setCellValue(e,xe.new.apply(xe,Object(v.a)(this.calcAvailableDigits(e)))))}},{key:"_autoNote",value:function(){var t,n=Object(u.a)(be);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.dispatch(e.actions.NOTE,a,{commit:!1,log:!1})}}catch(r){n.e(r)}finally{n.f()}}},{key:"_autoPlacePointingClaiming",value:function(){try{var t=0;do{t=0,t+=this._autoPlace(),this._commit(e.actions.AUTO_PLACE),t+=this._autoPointing(),this._commit(e.actions.AUTO_POINTING),t+=this._autoClaiming(),this._commit(e.actions.AUTO_CLAIMING)}while(t>0)}catch(n){we.b.log(n)}}},{key:"_autoPlace",value:function(){var t=0,n=!1;we.b.group("[auto place]");do{n=!1;for(var a=0,r=[0,1];a<r.length;a++){var c,i=r[a],o=Object(u.a)(Pe(this.getCurCells(),1,i));try{for(o.s();!(c=o.n()).done;){var l=c.value;this.dispatch(e.actions.ELIMINATE_GROUP,l,{commit:!1}),t++,n=!0;break}}catch(s){o.e(s)}finally{o.f()}}}while(n);return we.b.groupEnd(),t}},{key:"_autoPointing",value:function(){var t=0;we.b.group("[auto pointing]");var n,a=Object(u.a)(Me(this.getCurCells(),1,{br:!0,bc:!0}));try{for(a.s();!(n=a.n()).done;){var r=n.value;we.b.log(r),this.dispatch(e.actions.ELIMINATE_XGROUP,r,{commit:!1}),t++}}catch(c){a.e(c)}finally{a.f()}return we.b.groupEnd(),t}},{key:"_autoClaiming",value:function(){var t=0;we.b.group("[auto claiming]");var n,a=Object(u.a)(Me(this.getCurCells(),1,{rb:!0,cb:!0}));try{for(a.s();!(n=a.n()).done;){var r=n.value;this.dispatch(e.actions.ELIMINATE_XGROUP,r,{commit:!1}),t++}}catch(c){a.e(c)}finally{a.f()}return we.b.groupEnd(),t}},{key:"_updateCellValue",value:function(e){var t=e.isNoting,n=e.pos,a=e.value;t?this._noteCellValue(n,a):this._placeCellValue(n,a)}},{key:"_placeCellValue",value:function(e,t){var n=this.getCell(e);n.origin||(n.value===t&&(t=xe.new()),this._setCellValue(e,t))}},{key:"_noteCellValue",value:function(e,t){var n=this.getCell(e).value;if(xe.is(n)){var a=n;a=xe.has(a,t)?xe.delete(a,t):xe.add(a,t),this._setCellValue(e,a)}}},{key:"findGroup",value:function(e){for(var t=1;t<=8;t++)for(var n=0,a=[0,1];n<a.length;n++){var r,c=a[n],i=Object(u.a)(Pe(e,t,c));try{for(i.s();!(r=i.n()).done;){return r.value}}catch(o){i.e(o)}finally{i.f()}}}},{key:"findXGroup",value:function(e){for(var t=1;t<=8;t++){var n,a=Object(u.a)(Me(e,t));try{for(a.s();!(n=a.n()).done;){var r=n.value;return r.type="X-Group",r}}catch(c){a.e(c)}finally{a.f()}}}},{key:"findTip",value:function(e){e=Object(f.a)({trial:!0,chain:{withoutALS:!1}},e);var t=this.getCurCells();return this.findGroup(t)||this.findXGroup(t)||this.findChain(t,e.chain)||e.trial&&this.findTrialError()}},{key:"_handleTip",value:function(e){"group"===e.type?this.eliminateGroup(e):"X-Group"===e.type?this.eliminateXGroup(e):"chain"===e.type?this.eliminateChain(e):"trial-error"===e.type&&this.eliminateTrialError(e)}},{key:"findTrialError",value:function(){var e=this;this._disableNotify();for(var t=this._curCellsIdx,n=Object(we.h)(be.filter((function(t){var n=e.getCell(t).value;return xe.is(n)}))),a=0,r=[!1,{maxDepth:15},{maxDepth:25},{maxDepth:Number.MAX_VALUE}];a<r.length;a++){var c,i=r[a],o=Object(u.a)(n);try{for(o.s();!(c=o.n()).done;){var l,s=c.value,f=this.getCell(s).value,v=Object(u.a)(xe.entries(f));try{for(v.s();!(l=v.n()).done;){var d=l.value;we.b.enabled=!0,we.b.log("try: ".concat(d,"@").concat(s," ").concat(JSON.stringify(i))),we.b.enabled=!1;var h=0;this.updateCellValue(!1,s,d,"try"),this.autoPlacePointingClaiming();var b=this._checkValidity();if(!b&&i){for(var p=this.findTip({trial:!1,chain:{withoutALS:!0}});p&&(h++,this.handleTip(p),this.autoPlacePointingClaiming(),!(b=this._checkValidity()))&&!(h>i.maxDepth);)p=this.findTip({trial:!1,chain:{withoutALS:!0}});this._checkComplete()&&(b=!0)}if(b){var k=function(){we.b.enabled=!0,e._enableNotify();var n=e._curCellsIdx,a=new Set(e._cellsHistory.filter((function(e){var a=e.idx;return a>=t&&a<=n})).map((function(e){return e.cells})));return{v:{startIdx:t,endIdx:n,includedCells:a,pos:s,d:d,err:b,type:"trial-error",name:"try".concat(h?"*"+h:""," ").concat(d,"@").concat(s)}}}();if("object"===typeof k)return k.v}this.jumpTo(t)}}catch(g){v.e(g)}finally{v.f()}}}catch(g){o.e(g)}finally{o.f()}}this.jumpTo(t),this._enableNotify()}},{key:"_eliminateTrialError",value:function(e){var t=e.startIdx,n=e.pos,a=e.d;if(!0!==e.err){this.revertTo(t);var r=this.getCell(n).value;xe.is(r)&&this._setCellValue(n,xe.delete(r,a))}}},{key:"findChain",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(f.a)({withoutALS:!0},t);var n=ht(e,{alsSizes:[1,2,3,4,5]}),a=Object(l.a)(n,4),r=a[0],c=a[1],i=a[2],o=a[3];we.b.log("dPoses:",r),we.b.log("dGroupPoses:",c),we.b.log("dAlsces:",i),we.b.log("dLinks:",o);for(var s=Object(we.h)(Ce),v={dLinks:o,dAlsces:i,val:!1,cells:e},d=[function(e){return r[e]}],h=[].concat(d,[function(e){return(c[e]||[]).filter((function(e){return e.isGroup}))}]),b={tryDigitLinks:!0,tryCellLinks:!1,tryGroupLinks:!1,tryAlscLinks:!1,posSrcs:h,searchChain:$e,earlyExitLen:7},p=0,k=[20];p<k.length;p++)for(var g=k[p],y=0,m=[b,Object(f.a)(Object(f.a)({},b),{},{tryCellLinks:!0}),Object(f.a)(Object(f.a)({},b),{},{tryCellLinks:!0,tryGroupLinks:!0})];y<m.length;y++){var O,_=m[y],j=Object(u.a)(_.posSrcs);try{for(j.s();!(O=j.n()).done;){var w,C=O.value,x=Object(f.a)(Object(f.a)(Object(f.a)({},v),{},{maxLength:g},_),{},{count:0}),E=Object(u.a)(s);try{for(E.s();!(w=E.n()).done;){var N=w.value;x.td=N;var S,A=Object(u.a)(_.searchChain(N,C(N)||[],x));try{for(A.s();!(S=A.n()).done;){var P=S.value;return qe(P)}}catch(K){A.e(K)}finally{A.f()}}}catch(K){E.e(K)}finally{E.f()}if(x.res)return qe(x.res)}}catch(K){j.e(K)}finally{j.f()}}if(!t.withoutALS)for(var T=[function(e){return Object.values(i[e]||{})}],L=Object(f.a)(Object(f.a)({},b),{},{tryDigitLinks:!1,posSrcs:[]}),I=0,G=[Object(f.a)(Object(f.a)({},L),{},{tryAlscLinks:!0,maxLength:9,posSrcs:T}),Object(f.a)(Object(f.a)({},b),{},{tryDigitLinks:!0,tryGroupLinks:!0,tryAlscLinks:!0,maxLength:9,posSrcs:h})];I<G.length;I++){var H,M=G[I],D=Object(u.a)(M.posSrcs);try{for(D.s();!(H=D.n()).done;){var R,z=H.value,V=Object(f.a)(Object(f.a)(Object(f.a)({},v),M),{},{count:0}),B=Object(u.a)(s);try{for(B.s();!(R=B.n()).done;){var U=R.value;V.td=U;var X,W=Object(u.a)(M.searchChain(U,z(U)||[],V));try{for(W.s();!(X=W.n()).done;){var F=X.value;return we.b.log("als count:",V.count),qe(F)}}catch(K){W.e(K)}finally{W.f()}}}catch(K){B.e(K)}finally{B.f()}if(V.res)return we.b.log("als count:",V.count),qe(V.res);we.b.log("als count:",V.count)}}catch(K){D.e(K)}finally{D.f()}}}},{key:"_eliminateChain",value:function(e){var t,n=Object(u.a)(e.effectedPoses);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=this.getCell(a).value;if(xe.is(r)){var c=r;c=e.keep?xe.new.apply(xe,Object(v.a)(e.keepDs)):xe.delete(r,e.d),this._setCellValue(a,c)}}}catch(i){n.e(i)}finally{n.f()}}},{key:"results",get:function(){return this._results}},{key:"isComplete",get:function(){return this._isComplete}},{key:"initialPuzzle",get:function(){return this.puzzle}},{key:"cells",get:function(){return this._cellsHistory[this._curCellsIdx].cells}},{key:"cellsRecord",get:function(){return this._cellsHistory[this._curCellsIdx]}},{key:"curIdx",get:function(){return this._curCellsIdx}},{key:"lastIdx",get:function(){return this._cellsHistory.length-1}},{key:"hasPrev",get:function(){return this._curCellsIdx>0}},{key:"hasNext",get:function(){return this._curCellsIdx<this._cellsHistory.length-1}}],[{key:"parse",value:function(t){if(!t||t.length<81)throw new Error("bad sudoku puzzle format [".concat(t,"]"));var n=t.match(e.cellPattern);if(81!==n.length)throw new Error("bad sudoku puzzle format [".concat(t,"]"));var a,r=n.map((function(t){if(t.startsWith("n")&&t.endsWith("N")){var n=t.slice(1,-1).split("").map((function(e){return parseInt(e)}));return{value:xe.new.apply(xe,Object(v.a)(n))}}if(t.startsWith("p"))return{value:parseInt(t[1])};if(e.valuePattern.test(t))return{value:parseInt(t),origin:!0};if("0"===t||"."===t)return{value:xe.new()};throw new Error("impossible")})),c=K(),i=Object(u.a)(be);try{for(i.s();!(a=i.n()).done;){var o=a.value;c[o.row][o.col]=r[o.idx]}}catch(l){i.e(l)}finally{i.f()}return c}}]),e}();Qe.defaultPuzzle="\n  000000000 000000000 000000000\n  000000000 000000000 000000000\n  000000000 000000000 000000000\n ",Qe.cellPattern=/(\d)|(p\d)|(n[1-9]*N)|\./g,Qe.valuePattern=/^[1-9]$/,Qe.actions={RESET:"Reset",NOTE:"Note",UPDATE_CELL_VALUE:"Update Cell",AUTO_NOTE:"Auto Note",AUTO_POINTING:"Auto Pointing",AUTO_CLAIMING:"Auto Claiming",AUTO_PLACE:"Auto Place",AUTO_PLACE_POINTING_CLAIMING:"Auto Place/Pointing/Claiming",ELIMINATE_GROUP:"X Group",ELIMINATE_XGROUP:"X XGroup",ELIMINATE_CHAIN:"X Chain",ELIMINATE_TRIAL_ERROR:"X Trial Error",HANDLE_TIP:"Handle Tip"};var Ze=function(e){return e.isAlsc?"a":e.isGroup?"g":"d"},qe=function(e){e.type="chain";var t,n=e.chain[0].pos,a=e.chain[e.chain.length-1],r=a.pos,c=e.d,i=!1,o=!1,l=!1,s=Object(u.a)(e.chain);try{for(s.s();!(t=s.n()).done;){var f=t.value;if(f.d!==c&&(i=!0),f.pos.isAlsc?l=!0:f.pos.isGroup&&(o=!0),i&&o&&l)break}}catch(d){s.e(d)}finally{s.f()}var v=[e.chain.length-1];return o&&v.push("G"),l&&v.push("ALS"),v.push(i?"XY":"X","Chain"),v.push([Ze(n),Ze(r),a.d===c?"-x":"-xy"].join("")),e.name=v.join("-"),e};function $e(e,t,n){var a,r,c,i,o,l,s;return L.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:a=Object(u.a)(t),f.prev=1,a.s();case 3:if((r=a.n()).done){f.next=31;break}c=r.value,i={pos:c,d:e,val:n.val},o=Object(u.a)(at([],i,n)),f.prev=7,o.s();case 9:if((l=o.n()).done){f.next=21;break}if(!((s=l.value).chain.length<n.maxLength)){f.next=19;break}if(!(s.chain.length<=n.earlyExitLen)){f.next=17;break}return f.next=15,s;case 15:f.next=19;break;case 17:n.res=s,n.maxLength=s.chain.length;case 19:f.next=9;break;case 21:f.next=26;break;case 23:f.prev=23,f.t0=f.catch(7),o.e(f.t0);case 26:return f.prev=26,o.f(),f.finish(26);case 29:f.next=3;break;case 31:f.next=36;break;case 33:f.prev=33,f.t1=f.catch(1),a.e(f.t1);case 36:return f.prev=36,a.f(),f.finish(36);case 39:case"end":return f.stop()}}),Fe,null,[[1,33,36,39],[7,23,26,29]])}var et=function(e,t){return void 0!==e&&e===t};function tt(e,t,n){var r,c,i,o,l,s,f,d,h,b,p,k,g,y,m,O,_,j,w,C;return L.a.wrap((function(x){for(;;)switch(x.prev=x.next){case 0:if(r=t.pos,c=t.d,i=t.val,o=n.cells,l=n.td,!(!1===n.val&&!0===i&&e.length>1)){x.next=31;break}if(s=e[0].pos,c!==l){x.next=14;break}f=new Set,d=[].concat(Object(v.a)(it(s)),Object(v.a)(it(r))),h=Object(u.a)(Oe.apply(a,Object(v.a)(d)));try{for(h.s();!(b=h.n()).done;)p=b.value,k=ye(o,p),g=k.value,xe.has(g,c)&&f.add(p)}catch(E){h.e(E)}finally{h.f()}if(!(f.size>0)){x.next=12;break}return x.next=12,{chain:[].concat(Object(v.a)(e),[t]),effectedPoses:f,d:l};case 12:x.next=31;break;case 14:if(s.key!==r.key){x.next=21;break}return x.delegateYield(L.a.mark((function n(){var a,i,s,f,d,h,b;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((a=it(r)).length>1)){n.next=3;break}return n.abrupt("return",{v:void 0});case 3:i=new Set,s=Object(u.a)(a);try{for(s.s();!(f=s.n()).done;)d=f.value,h=ye(o,d),b=h.value,xe.entries(b).forEach((function(e){return i.add(e)}))}catch(E){s.e(E)}finally{s.f()}if(i.delete(c),i.delete(l),!(i.size>0)){n.next=11;break}return n.next=11,{chain:[].concat(Object(v.a)(e),[t]),effectedPoses:new Set(a),d:l,effectedDs:i,keep:!0,keepDs:[c,l]};case 11:case"end":return n.stop()}}),n)}))(),"t0",16);case 16:if("object"!==typeof(y=x.t0)){x.next=19;break}return x.abrupt("return",y.v);case 19:x.next=31;break;case 21:if(m=it(s),1!==(O=it(r)).length||1!==m.length){x.next=31;break}if(_=m[0],j=O[0],!(et(j.row,_.row)||et(j.col,_.col)||et(j.block,_.block))){x.next=31;break}if(w=ye(o,j),C=w.value,!xe.has(C,l)){x.next=31;break}return x.next=31,{chain:[].concat(Object(v.a)(e),[t]),effectedPoses:new Set([j]),d:l};case 31:case"end":return x.stop()}}),Ke)}function nt(e,t,n){var a,r,c,i,o,l,s,d,h,b,p,k,g,y,m,O,_,j,w,C,x,E,N,S;return L.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(a=t.pos,r=t.d,c=t.val,i=n.dLinks,o=n.dAlsces,!n.tryDigitLinks){A.next=29;break}l=0,s=[i[r][a][c],n.tryGroupLinks?i[r][a].group[c]:[]];case 4:if(!(l<s.length)){A.next=29;break}d=s[l],h=Object(u.a)(d),A.prev=7,h.s();case 9:if((b=h.n()).done){A.next=18;break}if(p=b.value,!rt(e,k={pos:p,val:!c,d:r})){A.next=14;break}return A.abrupt("continue",16);case 14:return A.next=16,[[].concat(Object(v.a)(e),[t]),k];case 16:A.next=9;break;case 18:A.next=23;break;case 20:A.prev=20,A.t0=A.catch(7),h.e(A.t0);case 23:return A.prev=23,h.f(),A.finish(23);case 26:l++,A.next=4;break;case 29:if(!n.tryCellLinks){A.next=50;break}g=Object(u.a)(i[r][a].cell[c]),A.prev=31,g.s();case 33:if((y=g.n()).done){A.next=42;break}if(m=y.value,!rt(e,O={pos:a,val:!c,d:m})){A.next=38;break}return A.abrupt("continue",40);case 38:return A.next=40,[[].concat(Object(v.a)(e),[t]),O];case 40:A.next=33;break;case 42:A.next=47;break;case 44:A.prev=44,A.t1=A.catch(31),g.e(A.t1);case 47:return A.prev=47,g.f(),A.finish(47);case 50:if(!n.tryAlscLinks){A.next=73;break}_=Object(u.a)(i[r][a].alsc[c]),A.prev=52,_.s();case 54:if((j=_.n()).done){A.next=65;break}if(w=j.value,C=null,x=null,c?(E=w,C=Object(f.a)(Object(f.a)({},t),{},{pos:o[r][a]}),x={pos:E,val:!c,d:E.d}):(N=w.als,S=w.alsc,C=Object(f.a)(Object(f.a)({},t),{},{pos:o[r][a],als:N}),x={pos:S,val:!c,d:S.d,als:N}),!rt(e,x)){A.next=61;break}return A.abrupt("continue",63);case 61:return A.next=63,[[].concat(Object(v.a)(e),[C]),x];case 63:A.next=54;break;case 65:A.next=70;break;case 67:A.prev=67,A.t2=A.catch(52),_.e(A.t2);case 70:return A.prev=70,_.f(),A.finish(70);case 73:case"end":return A.stop()}}),Ye,null,[[7,20,23,26],[31,44,47,50],[52,67,70,73]])}function at(e,t,n){var a,r,c;return L.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n.count++,!(e.length+1>=n.maxLength)){i.next=3;break}return i.abrupt("return");case 3:return i.delegateYield(tt(e,t,n),"t0",4);case 4:a=Object(u.a)(nt(e,t,n)),i.prev=5,a.s();case 7:if((r=a.n()).done){i.next=12;break}return c=r.value,i.delegateYield(at.apply(void 0,Object(v.a)(c).concat([n])),"t1",10);case 10:i.next=7;break;case 12:i.next=17;break;case 14:i.prev=14,i.t2=i.catch(5),a.e(i.t2);case 17:return i.prev=17,a.f(),i.finish(17);case 20:case"end":return i.stop()}}),Je,null,[[5,14,17,20]])}var rt=function(e,t){var n,a=it(t.pos),r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var c=n.value;if(c.val===t.val&&c.d===t.d&&c.pos.key===t.pos.key)return!0;if(c.d===t.d&&c.val&&t.val&&(c.pos.poses||t.pos.poses)&&ot(a,it(c.pos)))return!0}}catch(i){r.e(i)}finally{r.f()}return!1},ct=function(e,t,n,a,r){var c,i;if(a.length>1)return i={key:"".concat(r,"@").concat(e).concat(t,"block").concat(n),d:r,isGroup:!0,domain:new Set([e])},Object(s.a)(i,e,t),Object(s.a)(i,"block",n),Object(s.a)(i,"poses",a),Object(s.a)(i,"toString",(function(){return this.key})),i;var o=a[0];return c={key:o.key,d:r,isGroup:!1,domain:new Set([e])},Object(s.a)(c,e,t),Object(s.a)(c,"block",n),Object(s.a)(c,"pos",o),Object(s.a)(c,"poses",a),Object(s.a)(c,"toString",(function(){return this.key})),c},it=function(e){return e.isGroup||e.isAlsc?Object(v.a)(e.poses):[e]};var ot=function(e,t){return Object(we.f)(new Set(e),new Set(t)).size>0},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return void 0!==t.row&&e.row===t.row&&e.key!==t.key}))},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return void 0!==t.col&&e.col===t.col&&e.key!==t.key}))},ut=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=t.filter((function(e){return e.block===n.block&&e.key!==n.key&&!ot(e.poses,n.isGroup?n.poses:[n])})),r=a.filter((function(e){return e.isGroup})),c=Object(u.a)(a.filter((function(e){return!e.isGroup})));try{for(c.s();!(e=c.n()).done;){var i,o=e.value,l=!0,s=Object(u.a)(r);try{for(s.s();!(i=s.n()).done;){var f=i.value;if(ot(f.poses,o.poses)){l=!1;break}}}catch(v){s.e(v)}finally{s.f()}l&&r.push(o)}}catch(v){c.e(v)}finally{c.f()}return r};function ft(e,t){for(var n=new Set,a=new Set,r=0,c=[["row",lt],["col",st],["block",ut]];r<c.length;r++){var i=Object(l.a)(c[r],2),o=i[0],s=i[1];if(!t.isGroup||"block"===o||t.domain.has(o)){var f,v=0,d=null,h=Object(u.a)(s(e,t));try{for(h.s();!(f=h.n()).done;){var b=f.value;v++,b.isGroup&&(t.isGroup?(a.add(b),d=b):new Set(b.poses).has(t)||(a.add(b),d=b))}}catch(p){h.e(p)}finally{h.f()}1===v&&d&&n.add(d)}}return{false:n,true:a}}function vt(e,t,n){for(var a=new Set,r=new Set,c=function(){var c=Object(l.a)(o[i],2),s=c[0],f=c[1],v=n,d=new Set;if(n.isGroup){if("block"!==s&&!n.domain.has(s))return"continue";v=n.poses[0],d=new Set(n.poses)}var h,b=0,p=null,k=Object(u.a)(f(v).filter((function(e){return!d.has(e)})));try{for(k.s();!(h=k.n()).done;){var g=h.value,y=ye(e,g).value;xe.has(y,t)&&(r.add(g),b++,p=g)}}catch(m){k.e(m)}finally{k.f()}1===b&&a.add(p)},i=0,o=[["row",ve],["col",de],["block",fe]];i<o.length;i++)c();return{false:a,true:r}}function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return e[t]}function ht(e,t){var n,a=function(e){for(var t={},n=0,a=[["row",Q],["col",$]];n<a.length;n++){var r,c=Object(l.a)(a[n],2),i=c[0],o=c[1],s=Object(u.a)(o);try{for(s.s();!(r=s.n()).done;){var f,v=r.value,d={},h=0,b=Object(u.a)(v);try{for(b.s();!(f=b.n()).done;){var p=f.value;h=p[i];var k=ye(e,p).value;if(xe.is(k)){var g,y=Object(we.e)(d,p.block,{}),m=Object(u.a)(xe.entries(k));try{for(m.s();!(g=m.n()).done;){var O=g.value;Object(we.e)(y,O,[]).push(p)}}catch(G){m.e(G)}finally{m.f()}}}}catch(G){b.e(G)}finally{b.f()}for(var _=0,j=Object.entries(d);_<j.length;_++)for(var w=Object(l.a)(j[_],2),C=w[0],x=w[1],E=0,N=Object.entries(x);E<N.length;E++){var S=Object(l.a)(N[E],2),A=S[0],P=S[1],T=parseInt(C),L=parseInt(A),I=Object(we.e)(t,L,[]);P.length>1?I.push(ct(i,h,T,P,L)):function(){var e=P[0],t=I.filter((function(t){return t.pos===e}))[0];t||(t=ct(i,h,T,P,L),I.push(t)),t.domain.add(i),t[i]=h}()}}}catch(G){s.e(G)}finally{s.f()}}return t}(e),r=function(e,t,n){for(var a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object(f.a)({alsSizes:[1,2,3,4,5,6,7,8]},n);for(var a={},r={},c=0,i=[se,ue,le];c<i.length;c++){var o,s=i[c],d=Object(u.a)(R);try{for(d.s();!(o=d.n()).done;){var h,b=o.value,p=Ae(e,s(b)),k=Object.values(Object(we.a)(p,0)),g=Object(u.a)(n.alsSizes);try{for(g.s();!(h=g.n()).done;){var y,m=h.value,O=Object(u.a)(Object(we.c)(k,m));try{for(O.s();!(y=O.n()).done;){var _=Object(l.a)(y.value,2),j=_[0],w=_[1],C=Ae(e,j),x=Object(we.a)(C,1,"d","poses"),E=[].concat(Object(v.a)(Object(v.a)(j).map((function(e){return e.key})).sort()),[Object(v.a)(w).sort().join("")]).join("-"),N=a[E]||{key:E,poses:j,digits:w,domains:Se(j),digitInfos:x,toString:function(){return this.key}};a[E]=N;var S,A=Object(u.a)(w);try{for(A.s();!(S=A.n()).done;){var P=S.value,T=x[P],L=T.poses,I=Se(L),G=Object(we.e)(r,P,{}),H=null,M=null;if(1===L.size){var D=Object(v.a)(L)[0];H=D.key,M=G[H]||Object(f.a)(Object(f.a)({},T),{},{isAlsc:!0,domains:I,cell:D,key:H,type:"cell",alses:[],toString:function(){return this.key}})}else{var z=bt(P,t,I,L);z?(H=z.key,M=G[H]||Object(f.a)(Object(f.a)({},T),{},{isAlsc:!0,domains:I,group:z,key:z.key,type:"group",isGroup:!0,alses:[],toString:function(){return this.key}})):(H=Object(v.a)(L).map((function(e){return e.key})).sort().join("-"),M=G[H]||Object(f.a)(Object(f.a)({},T),{},{isAlsc:!0,domains:I,key:H,type:"alsc",alses:[],toString:function(){return this.key}}))}M.alses.push(N),G[H]=M,x[P]=M}}catch(V){A.e(V)}finally{A.f()}}}catch(V){O.e(V)}finally{O.f()}}}catch(V){g.e(V)}finally{g.f()}}}catch(V){d.e(V)}finally{d.f()}}return r}(e,t,n),r={},c=0,i=Object.values(a);c<i.length;c++)for(var o=i[c],s=0,d=Object.values(o);s<d.length;s++){var h,b=d[s],p=b.d,k=b.alses,g=Object(we.e)(r,p,{}),y=pt(o,b),m=[],O=Object(u.a)(k);try{for(O.s();!(h=O.n()).done;)for(var _=h.value,j=0,w=Object.values(_.digitInfos);j<w.length;j++){var C=w[j];C!==b&&m.push({als:_,alsc:C})}}catch(x){O.e(x)}finally{O.f()}g[b]={true:y,false:m}}return[a,r]}(e,a,t),c=Object(l.a)(r,2),i=c[0],o=c[1],s={},d={},h=Object(u.a)(be);try{for(h.s();!(n=h.n()).done;){var b=n.value,p=ye(e,b).value;if(xe.is(p)){var k,g=xe.entries(p),y=Object(u.a)(g);try{var m=function(){var t=k.value;Object(we.e)(d,t,[]).push(b);var n=Object(we.e)(s,t,{}),r=vt(e,t,b);n[b]=r,r.group=ft(a[t],b);var c=new Set(g.filter((function(e){return e!==t})));r.cell={false:2===g.length?c:new Set,true:c},r.alsc=dt(o[t],b)||{false:new Set,true:new Set}};for(y.s();!(k=y.n()).done;)m()}catch(X){y.e(X)}finally{y.f()}}}}catch(X){h.e(X)}finally{h.f()}for(var O=0,_=Object.entries(a);O<_.length;O++){var j,w=Object(l.a)(_[O],2),C=w[0],x=w[1],E=parseInt(C),N=Object(we.e)(s,E,{}),S=Object(u.a)(x.filter((function(e){return e.isGroup})));try{for(S.s();!(j=S.n()).done;){var A=j.value,P=vt(e,E,A);N[A]=P,P.group=ft(a[E],A),P.cell={false:new Set,true:new Set},P.alsc=dt(o[E],A)||{false:new Set,true:new Set}}}catch(X){S.e(X)}finally{S.f()}}for(var T=0,L=Object.entries(i);T<L.length;T++){var I,G=Object(l.a)(L[T],2),H=G[0],M=G[1],D=parseInt(H),z=Object(we.e)(s,D,{}),V=Object(u.a)(Object.values(M).filter((function(e){return"alsc"===e.type})));try{for(V.s();!(I=V.n()).done;){var B=I.value,U={false:new Set,true:new Set};z[B]=U,U.group={false:new Set,true:new Set},U.cell={false:new Set,true:new Set},U.alsc=dt(o[D],B)||{false:new Set,true:new Set}}}catch(X){V.e(X)}finally{V.f()}}return[d,a,i,s]}var bt=function(e,t,n,a){var r=n.row,c=n.col,i=n.block,o="".concat(e,"@row").concat(r,"col").concat(c,"block").concat(i),l=t[e].filter((function(e){return e.isGroup&&e.key===o&&e.poses.size===a.size}));if(1===l.length)return l[0]};function pt(e,t){for(var n=[],a=t.poses,r=t.domains,c=0,i=Object.entries(r);c<i.length;c++)for(var o=Object(l.a)(i[c],2),s=o[0],u=o[1],f=0,v=Object.values(e);f<v.length;f++){var d=v[f];d!==t&&(d.domains[s]===u&&(ot(d.poses,a)||n.push(d)))}return n}var kt=function(e,t,n,a,r,c){var i=[k.a.Note];if(e===t&&i.push(k.a.ActiveValue),r){var o=null;if(n?o=r.highlights:a&&(o=r.effect),o){var l=o,s=l.posNotes,u=l.posSubNotes,f=o,v=f.notes,d=f.subNotes;s&&u&&(v=s[c],d=u[c]),v&&v.has(e)?i.push(k.a.MarkedNoteValue):d&&d.has(e)&&i.push(k.a.MarkedValue),n&&a&&r.effect.notes.has(e)&&i.push(k.a.Effected)}}return i.join(" ")},gt=c.a.memo((function(e){var t=e.value,n=e.origin,a=e.pos,r=e.activePos,i=e.activeVal,o=e.available,l=e.showAvail,s=e.isNoting,u=e.onClick,f=e.marks,v=a.block,d=a.row,h=a.col,b=[],p=null,g=!1;if(r){var y=r.row,m=r.col,O=r.block;d===y&&h===m?(g=!0,b.push(k.a.Selected)):d!==y&&h!==m&&v!==O||b.push(k.a.Related)}var _=o;o?(b.push(k.a.Available),l&&b.push(s?k.a.Note:k.a.Place)):null===o?(b.push(k.a.Available),_=!0):s||n||t!==i||(b.push(k.a.Available),_=!0);var j=!1,w=!1,C=!1;if(f){var x=f.domain,E=f.effect,N=f.highlights;if(x){var S=x.rows,A=x.cols,T=x.blocks,L=x.cells;S&&S.has(d)&&(w=!0),A&&A.has(h)&&(w=!0),T&&T.has(v)&&(w=!0),L&&L.has(a)&&(w=!0)}if(E){var I=E.rows,G=E.cols,H=E.blocks,M=E.cells;I&&I.has(d)&&(C=!0),G&&G.has(h)&&(C=!0),H&&H.has(v)&&(C=!0),M&&M.has(a)&&(C=!0)}N&&N.cells.has(a)&&(j=!0)}if(j?(b.push(k.a.MarkedHighlight),f.highlights.withoutOutlinePoses&&f.highlights.withoutOutlinePoses.has(a)&&b.push(k.a.WithoutOutline)):w&&b.push(k.a.MarkedDomain),C&&b.push(k.a.MarkedEffect),xe.is(t)){b.push(k.a.Notes);var R=t;xe.size(R)>0&&(p=D.map((function(e,t){return c.a.createElement("div",{key:t,className:k.a.RowNotes},e.map((function(e){return c.a.createElement("div",{key:e,className:kt(e+1,i,j,C,f,a)},xe.has(R,e+1)?P[e+1]:null)})))})))}else b.push(k.a.Value),!n&&b.push(k.a.Placed),t!==i||g||b.push(k.a.ActiveValue),j&&f.highlights.values&&f.highlights.values.has(t)&&b.push(k.a.MarkedValue),p=P[t];return c.a.createElement("div",{className:b.join(" "),onClick:_?function(){return u(a)}:void 0},p)})),yt=n(20),mt=n.n(yt),Ot=function(e){var t=e.block,n=e.activePos,a=e.activeVal,r=e.cells,i=e.availableCells,o=e.cellClickedHandler,l=e.showAvail,s=e.isNoting,u=e.marks,f=t%2===1;return c.a.createElement("div",{className:"".concat(mt.a.Block," ").concat(f?mt.a.Odd:"")},oe(t).map((function(e,t){return c.a.createElement("div",{key:t,className:mt.a.Row},e.map((function(e){return c.a.createElement(gt,Object.assign({key:e.key},ye(r,e),{pos:e,activePos:n,activeVal:a,available:i&&i[e.row][e.col],onClick:o,showAvail:l,isNoting:s,marks:u}))})))})))},_t=n(10),jt=n(11);function wt(){var e=Object(_t.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  ","\n"]);return wt=function(){return e},e}function Ct(){var e=Object(_t.a)(["\n  width: ",";\n  height: 0;\n  padding-top: ","%;\n  position: relative;\n"]);return Ct=function(){return e},e}var xt=jt.a.div(Ct(),(function(e){var t=e.width;return void 0!==t?t:"auto"}),(function(e){return 100/e.ratio})),Et=jt.a.div(wt(),(function(e){var t=e.fixed,n=e.scroll;return t?"\n    height: 100%;\n    overflow: ".concat(n?"scroll":"hidden",";\n  "):"\n  min-height: 100%;\n  "})),Nt=function(e){var t=e.ratio,n=void 0===t?1:t,a=e.fixed,r=void 0===a||a,i=e.scroll,o=void 0!==i&&i,l=e.children;return c.a.createElement(xt,{ratio:n},c.a.createElement(Et,{fixed:r,scroll:o},l))},St=n(37),At=n.n(St),Pt=function(e,t){var n=e.row,a=e.col,r=H(t),c=Object(l.a)(r,2),i=c[0];return[(a+(c[1]+.5)/3+.35/100)*(.985/9)+(.5*(Math.floor(a/3)+1)-.25)/100,(n+(i+.5)/3+.35/100)*(.985/9)+(.5*(Math.floor(n/3)+1)-.25)/100]};function Tt(){var e=Object(_t.a)(["\n  user-select: none;\n  pointer-events: none;\n  position: absolute;\n  transform-origin: top left;\n"]);return Tt=function(){return e},e}var Lt=jt.a.div.attrs((function(e){var t=e.x,n=e.y,a=e.distance,r=e.deg,c=e.type;return{style:{borderTop:"2px ".concat(c," red"),width:"".concat(100*a,"%"),height:"".concat(100*a,"%"),transform:"translate(".concat(t/a*100,"%, ").concat(n/a*100,"%)\n    rotate(").concat(r,"deg)\n    translate(").concat(.01/a*100,"%)")}}}))(Tt()),It=function(e){var t=e.type,n=void 0===t?"solid":t,a=e.startPos,r=e.startDigit,i=e.endPos,o=e.endDigit,s=Pt(a,r),u=Pt(i,o),f=function(e,t){var n=Object(l.a)(e,2),a=n[0],r=n[1],c=Object(l.a)(t,2),i=c[0]-a,o=c[1]-r;return Math.sqrt(i*i+o*o)}(s,u),v=function(e,t,n){var a=Object(l.a)(e,2),r=a[0],c=a[1],i=Object(l.a)(t,2),o=i[0]-r,s=i[1]-c;return Math.acos(o/n)*(s<0?-1:1)/Math.PI*180}(s,u,f);return c.a.createElement(Lt,{x:s[0],y:s[1],distance:f-.02,deg:v,type:n},c.a.createElement("div",{className:At.a.Pointer}))};function Gt(){var e=Object(_t.a)(["\n  user-select: none;\n  pointer-events: none;\n  position: absolute;\n  border: 1px solid red;\n"]);return Gt=function(){return e},e}var Ht=jt.a.div.attrs((function(e){var t=e.sx,n=e.sy,a=e.ex,r=e.ey;return{style:{top:"".concat(100*n-.8,"%"),left:"".concat(100*t-.8,"%"),right:"".concat(100*(1-a)-.8,"%"),bottom:"".concat(100*(1-r)-.8,"%")}}}))(Gt()),Mt=function(e){var t,n,a,r,i=e.domain,o=e.row,s=e.col,u=e.block;"row"===i?(t=a=o,r=(n=F(u)[0])+2):"col"===i&&(n=r=s,a=(t=W(u)[0])+2);var f=Pt({row:t,col:n},1),v=Object(l.a)(f,2),d=v[0],h=v[1],b=Pt({row:a,col:r},9),p=Object(l.a)(b,2),k=p[0],g=p[1];return c.a.createElement(Ht,{sx:d,sy:h,ex:k,ey:g})},Dt=n(21),Rt=n.n(Dt),zt=function(e){var t=e.isComplete,n=e.availablePositions,a=e.cells,r=e.activeVal,i=e.activePos,o=e.cellClickedHandler,l=e.showAvail,s=e.isNoting,u=e.marks;i&&(r=ye(a,i).value);var f=[Rt.a.SudokuBoard];return t&&f.push(Rt.a.Complete),c.a.createElement(Nt,{ratio:1},c.a.createElement("div",{className:f.join(" ")},u&&u.frames&&u.frames.map((function(e){return c.a.createElement(Mt,e)})),u&&u.arrows&&u.arrows.map((function(e,t){return c.a.createElement(It,Object.assign({key:"".concat(e.startPos,"-").concat(e.endPos,"#").concat(t)},e))})),D.map((function(e,t){return c.a.createElement("div",{key:t,className:Rt.a.Row},e.map((function(e){return c.a.createElement(Ot,{key:e,block:e,cells:a,activePos:i,activeVal:r,availableCells:n,cellClickedHandler:o,showAvail:l,isNoting:s,marks:u})})))}))))},Vt=n(42);function Bt(){var e=Object(_t.a)(["\n  &::before {\n    content: '';\n    width: 1px;\n    margin-left: -1px;\n    float: left;\n    height: 0;\n    padding-top: ","%;\n  }\n  &::after {\n    content: '';\n    display: table;\n    clear: both;\n  }\n"]);return Bt=function(){return e},e}var Ut=jt.a.div(Bt(),(function(e){return 100/e.ratio})),Xt=function(e){var t=e.ratio,n=void 0===t?1:t,a=e.children,r=Object(Vt.a)(e,["ratio","children"]);return c.a.createElement(Ut,Object.assign({ratio:n},r),a)},Wt=n(13),Ft=n.n(Wt),Kt=c.a.memo((function(e){var t=e.isNoting,n=e.activeVal,a=e.availableDigits,i=e.remainingDigits,o=e.digitClickedHandler,l=Object(r.useCallback)((function(e){var t=[Ft.a.Digit];return e===n&&t.push(Ft.a.active),a.has(e)||t.push(Ft.a.Disabled),t.join(" ")}),[n,a]);return c.a.createElement("div",{className:"".concat(Ft.a.Digits," ").concat(t?Ft.a.isNoting:"")},c.a.createElement(Xt,{className:l(1),onClick:a.has(1)?function(){return o(1)}:void 0},P[1],c.a.createElement("div",{className:Ft.a.Count},P[i[1]])),[2,3,4,5,6,7,8,9].map((function(e){return c.a.createElement("div",{key:e,className:l(e),onClick:a.has(e)?function(){return o(e)}:void 0},P[e],c.a.createElement("div",{className:Ft.a.Count},P[i[e]]))})))})),Yt=n(12),Jt=n.n(Yt),Qt=function(e){var t=e.cellsRecord,n=e.hasPrev,a=e.hasNext,r=e.jump,i=e.jumpToFirst,o=e.jumpToLast,l=e.remainingDigits,s=e.activeVal,u=e.availableDigits,f=e.digitClickedHandler,v=e.showAvail,d=e.isNoting,h=e.withALS,p=e.deselectHandler,k=e.toggleShowAvailHandler,g=e.toggleIsNotingHandler,y=e.toggleWithALSHandler,m=e.solveHandler,O=e.resetHandler,_=e.eraseValueHandler,j=e.autoNoteHandler,w=e.autoPlacePointingClaimingHandler,C=e.tip,x=e.tipHandler,E=e.cancelTipHandler,N=e.changeChainStepHandler,S=e.jumpToTrailStartHandler;return c.a.createElement("div",{className:Jt.a.Controls},c.a.createElement("div",{className:Jt.a.History},c.a.createElement(b,{disabled:!n,onClick:i},"<<"),c.a.createElement(b,{disabled:!n,onClick:function(){return r(-1)}},"<"),c.a.createElement(b,{disabled:!a,onClick:function(){return r(1)}},">"),c.a.createElement(b,{disabled:!a,onClick:o},">>"),c.a.createElement("span",null,"#",t.idx),c.a.createElement("span",null,t.desc)),c.a.createElement("div",{className:Jt.a.Panel},c.a.createElement(b,{onClick:m},"Solve"),c.a.createElement(b,{onClick:O},"Reset"),c.a.createElement(b,{onClick:_},"Erase"),c.a.createElement(b,{onClick:p},"Deselect"),c.a.createElement(b,{type:v?"On":"Off",onClick:k},"Avail"),c.a.createElement(b,{type:d?"On":"Off",onClick:g},"Note"),c.a.createElement(b,{type:h?"On":"Off",onClick:y},"ALS")),c.a.createElement(Kt,{isNoting:d,activeVal:s,availableDigits:u,remainingDigits:l,digitClickedHandler:f}),c.a.createElement("div",{className:Jt.a.Tools},c.a.createElement(b,{onClick:j},"note"),c.a.createElement(b,{onClick:w},"place/point/claim"),c.a.createElement("div",{className:Jt.a.Tip},c.a.createElement(b,{type:C&&"On",onClick:x},C?C.name:"tip"),C&&c.a.createElement(b,{type:"Warn",onClick:E},"X"),C&&"chain"===C.type&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:Jt.a.ChainSteper,onClick:function(){return N(-1)}},"<"),c.a.createElement("span",{className:Jt.a.ChainSteper,onClick:function(){return N(1)}},">")),C&&"trial-error"===C.type&&c.a.createElement("span",{className:Jt.a.ChainSteper,onClick:S},"<start"))))},Zt=n(25),qt=n.n(Zt),$t=function(e){var t=e.show,n=e.onClick,a=e.absolute,r=void 0!==a&&a;if(!t)return null;var i=[qt.a.Backdrop];return r&&i.push(qt.a.Absolute),c.a.createElement("div",{className:i.join(" "),onClick:n})},en=n(22),tn=n.n(en),nn=c.a.memo(c.a.memo((function(e){var t=e.show,n=void 0!==t&&t,a=e.close,r=e.children,i=[tn.a.Modal];return n&&i.push(tn.a.Show),c.a.createElement(c.a.Fragment,null,c.a.createElement($t,{show:n,onClick:a}),c.a.createElement("div",{className:i.join(" ")},c.a.createElement("div",{className:tn.a.Close,onClick:a},"X"),r))})),(function(e,t){return!e.show&&!t.show})),an=n(38),rn=n.n(an),cn=n(39),on=n.n(cn),ln=function(){return c.a.createElement("div",{className:on.a.Loader},"Loading...")},sn=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement($t,{show:!0,absolute:!0}),c.a.createElement("div",{className:rn.a.Spinner},c.a.createElement(ln,null)))},un=n(40),fn=n.n(un),vn=n(15),dn=n.n(vn),hn=function(e){var t=e.sudoku,n=void 0===t?new Qe:t,a=e.startNewGameHandler,i=e.newGameHandler,o=e.emptyHandler,d=Object(r.useState)(!1),h=Object(l.a)(d,2),p=h[0],k=h[1],g=Object(r.useState)(!1),y=Object(l.a)(g,2),m=y[0],O=y[1],_=Object(r.useState)(0),j=Object(l.a)(_,2)[1];Object(r.useEffect)((function(){return n.subscribe(j),function(){n.unsubscribe(j)}}),[n]);var w=Object(r.useState)({pos:null,val:0}),C=Object(l.a)(w,2),x=C[0],E=C[1],N=x.pos,S=x.val,A=Object(r.useState)(!1),P=Object(l.a)(A,2),T=P[0],L=P[1],I=Object(r.useState)(!0),G=Object(l.a)(I,2),H=G[0],M=G[1],D=Object(r.useState)(!1),R=Object(l.a)(D,2),z=R[0],V=R[1],B=Object(r.useState)(null),U=Object(l.a)(B,2),X=U[0],W=U[1],F=Object(r.useState)(2),K=Object(l.a)(F,2),Y=K[0],J=K[1],Q=n.cellsRecord,Z=n.isComplete,q=Q.cells,$=Object(r.useMemo)((function(){return n.calcAvailableDigits(N,q)}),[N,n,q]),ee=Object(r.useMemo)((function(){return n.calcAvailablePositions(S,q)}),[S,n,q]),te=Object(r.useMemo)((function(){return n.calcRemainingDigits(q)}),[n,q]),ne=Object(r.useCallback)((function(){i(n.stringify(q,{placedAsOrigin:!0,withNotes:!1}))}),[q,i,n]),ae=Object(r.useCallback)((function(){i(n.stringify(q,{originAsPlaced:!0,withNotes:!1}),!1)}),[q,i,n]),re=Object(r.useCallback)((function(e){0!==S?n.updateCellValue(H,e,S):E((function(t){var n=t.pos;return n&&e===n&&(e=null),{pos:e,val:0}}))}),[S,H,n]),ie=Object(r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)E({pos:null,val:e});else{if(!$.has(e))return;N?n.updateCellValue(H,N,e):E((function(t){var n=t.val,a=e;return n===e&&(a=0),{pos:null,val:a}}))}}),[N,$,H,n]),oe=Object(r.useCallback)((function(){E({pos:null,val:0})}),[]),le=Object(r.useCallback)((function(){n.solve()}),[n]),se=Object(r.useCallback)((function(){window.confirm&&!window.confirm("Are you sure to reset?")||(n.reset(),oe())}),[oe,n]),ue=Object(r.useCallback)((function(){N&&n.updateCellValue(!1,N,xe.new())}),[N,n]),fe=Object(r.useCallback)((function(){L((function(e){return!e}))}),[]),ve=Object(r.useCallback)((function(){M((function(e){return!e}))}),[]),de=Object(r.useCallback)((function(){V((function(e){return!e}))}),[]),he=Object(r.useCallback)((function(){n.autoNote()}),[n]),be=Object(r.useCallback)((function(){n.autoPlacePointingClaiming()}),[n]),pe=Object(r.useCallback)((function(){oe(),X?(W(null),n.clearHistoryLowerBound(),n.handleTip(X)):(k(!0),setTimeout((function(){var e=n.findTip({chain:{withoutALS:!z}});k(!1),e&&(we.b.log("tip:",e),W(e),"chain"===e.type?J(e.chain.length):"trial-error"===e.type&&(n.setHistoryLowerBound(e.startIdx),!0!==e.err&&e.err.digits.size>0&&ie(Object(v.a)(e.err.digits)[0],!0)))}),0))}),[oe,ie,n,X,z]),ke=Object(r.useCallback)((function(){X&&(W(null),"trial-error"===X.type&&(n.clearHistoryLowerBound(),n.revertTo(X.startIdx)))}),[n,X]),ge=Object(r.useCallback)((function(e,t){N&&E((function(n){var a=n.pos,r=a.row,c=a.col;return{val:0,pos:ce((r+9+e)%9,(c+9+t)%9)}}))}),[N]),ye=Object(r.useCallback)((function(e){S&&E((function(t){return{pos:null,val:(t.val-1+e+9)%9+1}}))}),[S]),me=Object(r.useMemo)((function(){if(X)if("group"===X.type){for(var e=X.cls,t=X.domains,n=X.poses,a=X.notes,r={},c=0,i=Object.entries(t);c<i.length;c++){var o=Object(l.a)(i[c],2),d=o[0],h=o[1];r[d+"s"]=new Set([h])}if(0===e)return{effect:Object(f.a)(Object(f.a)({},r),{},{notes:a}),highlights:{cells:n,notes:a}};if(1===e)return{domain:Object(f.a)(Object(f.a)({},r),{},{notes:a}),highlights:{cells:n,notes:a}}}else if("X-Group"===X.type){var b=X.domain,p=X.rows,k=X.cols,g=X.blocks,y=X.poses,m=X.d,O=new Set([m]);if("row"===b)return{domain:{rows:p},effect:{cols:k,blocks:g,notes:O},highlights:{cells:y,notes:O}};if("col"===b)return{domain:{cols:k},effect:{rows:p,blocks:g,notes:O},highlights:{cells:y,notes:O}};if("block"===b)return{domain:{blocks:g},effect:{rows:p,cols:k,notes:O},highlights:{cells:y,notes:O}}}else{if("chain"===X.type){var _=X.chain,j=X.effectedPoses,w=X.d,C=X.effectedDs,x=_.slice(0,Y),E=[];x.forEach((function(e){var t=e.pos;t.isAlsc||E.push.apply(E,Object(v.a)(it(t)))}));var N=new Set(E),S=new Set(E);it(_[0].pos).forEach((function(e){return S.delete(e)})),it(_[_.length-1].pos).forEach((function(e){return S.delete(e)}));var A,P=C||new Set([w]),T={},L={},I=Object(u.a)(x);try{for(I.s();!(A=I.n()).done;){var G=A.value,H=T;G.d!==w&&(H=L);var M,D=G.pos,R=Object(u.a)(it(D));try{for(R.s();!(M=R.n()).done;){var z=M.value,V=H[z]||new Set;H[z]=V,V.add(G.d)}}catch(he){R.e(he)}finally{R.f()}}}catch(he){I.e(he)}finally{I.f()}var B=[],U={},W=null,F=null;x.forEach((function(e){var t=e.pos,n=e.als;if(t.isAlsc)W=n,F=t;else if(t.isGroup){var a=t.key,r=t.domain,c=t.block,i=t.row,o=t.col;B.push({key:a,domain:Object(v.a)(r)[0],block:c,row:i,col:o})}})),U.cells=W&&W.poses,F&&it(F).forEach((function(e){return N.add(e)}));var K,J=[],Z=x[0],q=Object(u.a)(x.slice(1));try{for(q.s();!(K=q.n()).done;){var $=K.value,ee=je(it(Z.pos),it($.pos)),te=Object(l.a)(ee,2),ne=te[0],ae=te[1];J.push({startPos:ne,startDigit:Z.d,endPos:ae,endDigit:$.d,type:$.val?"solid":"dashed"}),Z=$}}catch(he){q.e(he)}finally{q.f()}var re=x.length===_.length?{cells:j,notes:P}:null;return{domain:U,frames:B,arrows:J,effect:re,highlights:{cells:N,posNotes:T,posSubNotes:L,withoutOutlinePoses:S}}}if("trial-error"===X.type){var ce=X.startIdx,ie=X.pos,oe=X.d,le=X.err,se=new Set([oe]),ue=null;if(!0===le)ue={highlights:{cells:new Set([ie]),values:se,notes:se}};else{var fe,ve=le.domain,de=le.digits;if(Q.idx>=ce)ue={effect:(fe={},Object(s.a)(fe,ve+"s",new Set([le[ve]])),Object(s.a)(fe,"notes",de),Object(s.a)(fe,"values",de),fe),highlights:{cells:new Set([ie]),values:se,notes:se}}}if(Q.idx>=ce)return ue}}}),[Q.idx,Y,X]),Oe=Object(r.useCallback)((function(e){if(X&&"chain"===X.type){var t=X.chain.length;J((function(n){return(n-1+e+t)%t+1}))}}),[X]),_e=Object(r.useCallback)((function(){X&&"trial-error"===X.type&&n.jumpTo(X.startIdx)}),[n,X]);Object(r.useEffect)((function(){var e=function(e){if(we.b.log(e),e.code.startsWith("Digit")){var t=parseInt(e.key);ie(t)}else if("N"===e.key)a();else if("n"===e.key)e.ctrlKey?he():ve();else if("a"===e.key)e.ctrlKey?fe():de();else if("s"!==e.key||e.isComposing||e.metaKey)if("r"!==e.key||e.isComposing||e.metaKey)if("e"===e.key)ue();else if("b"===e.key)S||N||re(ce(4,4));else if("d"===e.key||"Escape"===e.key)oe();else if("t"===e.key)pe();else if("x"===e.key)ke();else if("y"===e.key)Oe(-1),_e();else if("u"===e.key)Oe(1);else if("p"===e.key)be();else if("h"===e.key||"ArrowLeft"===e.key)N?ge(0,-1):S?ye(-1):n.jumpToFirst();else if("l"===e.key||"ArrowRight"===e.key)N?ge(0,1):S?ye(1):n.jumpToLast();else if("j"===e.key||"ArrowDown"===e.key)N?ge(1,0):S?ye(-1):n.jump(-1);else{if("k"!==e.key&&"ArrowUp"!==e.key)return;N?ge(-1,0):S?ye(1):n.jump(1)}else se();else le()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[N,S,he,be,ke,re,Oe,oe,ie,ue,_e,ge,ye,se,le,a,n,X,pe,ve,fe,de]),Object(r.useEffect)((function(){if(X){if(X.includedCells&&X.includedCells.has(q))return;W(null),n.clearHistoryLowerBound()}}),[q]);var Ce=null;if(m){var Ee=new URL(window.location),Ne=n.initialPuzzle,Se=n.stringify();Ee.search="?puzzle="+Se,Ce=c.a.createElement("div",{className:dn.a.QRCode},c.a.createElement(fn.a,{size:256,value:Ee.toString()}),c.a.createElement("p",null,Ne),c.a.createElement("p",null,Se))}return c.a.createElement(c.a.Fragment,null,p&&c.a.createElement(sn,null),c.a.createElement(nn,{show:m,close:function(){return O(!1)}},Ce),c.a.createElement("div",{className:dn.a.Menu},c.a.createElement(b,{onClick:a},"New"),c.a.createElement(b,{onClick:ne},"Start"),c.a.createElement(b,{onClick:ae},"Edit"),c.a.createElement(b,{onClick:o},"Empty"),c.a.createElement(b,{onClick:function(){return O(!0)}},"Share")),c.a.createElement("div",{className:dn.a.Board},c.a.createElement(zt,{isComplete:Z,cells:q,availablePositions:ee,activeVal:S,activePos:N,cellClickedHandler:re,showAvail:T,isNoting:H,marks:me})),c.a.createElement("div",{className:dn.a.Controls},c.a.createElement(Qt,{cellsRecord:Q,hasPrev:n.hasPrev,hasNext:n.hasNext,jump:n.jump,jumpToFirst:n.jumpToFirst,jumpToLast:n.jumpToLast,remainingDigits:te,activeVal:S,availableDigits:$,digitClickedHandler:ie,showAvail:T,isNoting:H,withALS:z,solveHandler:le,resetHandler:se,eraseValueHandler:ue,deselectHandler:oe,toggleShowAvailHandler:fe,toggleIsNotingHandler:ve,toggleWithALSHandler:de,autoNoteHandler:he,autoPlacePointingClaimingHandler:be,tip:X,tipHandler:pe,cancelTipHandler:ke,changeChainStepHandler:Oe,jumpToTrailStartHandler:_e})),c.a.createElement("div",{className:dn.a.Info}))},bn=n(26),pn=n.n(bn),kn=function(e){var t=e.cancelNewGameHandler,n=e.newGameHandler,a=e.error,i=Object(r.useState)(""),o=Object(l.a)(i,2),s=o[0],u=o[1],f=Object(r.useCallback)((function(e){u(e.target.value)}),[]),v=Object(r.useRef)();return Object(r.useEffect)((function(){v.current.focus()}),[]),Object(r.useEffect)((function(){var e=function(e){if("Escape"===e.key)t();else{if("Enter"!==e.key||!e.shiftKey)return;n(s)}e.preventDefault()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[t,n,s]),c.a.createElement("div",{className:pn.a.NewGame},c.a.createElement("h1",null,"input a new puzzle"),a&&c.a.createElement("div",{className:pn.a.Error},a.message),c.a.createElement("textarea",{ref:v,id:"puzzle",name:"puzzle",inputMode:"numeric",onChange:f,value:s,placeholder:"901002708\n570060000\n000000004\n000000000\n700421900\n000098030\n300506070\n009003000\n000080051"}),c.a.createElement(b,{onClick:t},"Cancel"),c.a.createElement(b,{onClick:function(){return n(s)}},"Done"))},gn=n(41),yn=n.n(gn),mn=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useCallback)((function(e){e&&(0===e.length?a("this sudoku has no solution"):e.length>1&&a("this sudoku has multi solutions"))}),[]),o=Object(r.useState)((function(){var e=new URLSearchParams(window.location.search).get("puzzle");try{var t=new Qe(e);return i(t.results),t}catch(n){return console.error(n),new Qe}})),s=Object(l.a)(o,2),u=s[0],f=s[1],v=Object(r.useState)(!1),d=Object(l.a)(v,2),h=d[0],b=d[1],p=Object(r.useState)(null),k=Object(l.a)(p,2),g=k[0],y=k[1],m=Object(r.useCallback)((function(){b(!0)}),[]),O=Object(r.useCallback)((function(){b(!1)}),[]),_=Object(r.useCallback)((function(e){try{var t=new Qe(e);i&&i(t.results),f(t),b(!1),y(null)}catch(n){console.error(n),y(n)}}),[i]),j=Object(r.useCallback)((function(){_()}),[_]);Object(r.useEffect)((function(){n&&(alert(n),a(null))}),[n]),Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("debug");we.g(null!==e)}),[]);var w=null;return w=h?c.a.createElement(kn,{cancelNewGameHandler:O,newGameHandler:_,error:g}):c.a.createElement(hn,{sudoku:u,startNewGameHandler:m,newGameHandler:_,emptyHandler:j}),c.a.createElement("div",{className:yn.a.Sudoku},w)};function On(){return c.a.createElement(mn,null)}var _n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function jn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(c.a.createElement(On,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sudoku-tool",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/sudoku-tool","/service-worker.js");_n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):jn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):jn(t,e)}))}}()}],[[43,1,2]]]);
//# sourceMappingURL=main.2ceb8ae9.chunk.js.map